<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="I will follow this path until the end">
<meta property="og:type" content="website">
<meta property="og:title" content="Yuki">
<meta property="og:url" content="http://sukixj.github.io/page/2/index.html">
<meta property="og:site_name" content="Yuki">
<meta property="og:description" content="I will follow this path until the end">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Yuki">
<meta name="twitter:description" content="I will follow this path until the end">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://sukixj.github.io/page/2/"/>





  <title>Yuki</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Yuki</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">It's You</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Startseite
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archiv
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sukixj.github.io/2017/10/29/qbkqccd2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuki">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/29/qbkqccd2/" itemprop="url">清北考前冲刺Day2</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-10-29T21:33:42+08:00">
                2017-10-29
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="上午"><a href="#上午" class="headerlink" title="上午"></a>上午</h1><p><strong>期望得分：30+30+60=120</strong><br><strong>实际得分：30+0+0=30 QAQ</strong><br><del>心态炸了</del></p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-1bba0066afaaf77d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-05bf7d9b0c608db3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><img src="http://upload-images.jianshu.io/upload_images/8471136-c218138b6ec29185.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><strong>这题我RE了（<del>reading error</del>）</strong><br>他竟然可以不按顺序跳。。<br>前30分dfs把自己绕了一个小时（<del>我好弱呀</del>）。<br>其实这题很简单：<br><strong>第一个20分把 c[ i ]从小到大排个序，然后挨个比就好了</strong><br><strong>第二个三十分就把h[ i ]从小到大排个序，因为这样他们之间差值的和最小，然后也是挨个比就好了。</strong><br><strong>满分做法：先把准备跳楼的代价排序，满足准备跳楼的代价最小，然后区间内的c[ i ]的总和是与顺序无关的，再按高度排序，尽可能跳更多的楼（qaq）。</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 51</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n,t,Ans;</div><div class="line"><span class="keyword">struct</span> node &#123;</div><div class="line">	<span class="keyword">int</span> c,h;</div><div class="line">	<span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> node b)<span class="keyword">const</span> &#123;</div><div class="line">		<span class="keyword">return</span> c&lt;b.c;</div><div class="line">	&#125;</div><div class="line">&#125; q[maxn];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"meet.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"meet.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;q[i].c);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;q[i].h);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;t);</div><div class="line">	sort(q+<span class="number">1</span>,q+n+<span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>; j&lt;=n; j++) &#123; </div><div class="line">			<span class="keyword">int</span> now=t;</div><div class="line">			<span class="keyword">int</span> mx=max(q[i].h,q[j].h),mn=min(q[i].h,q[j].h);</div><div class="line">			now-=<span class="built_in">abs</span>(q[i].h-q[j].h)+q[i].c+q[j].c;</div><div class="line">			<span class="keyword">if</span>(now&lt;<span class="number">0</span>)<span class="keyword">continue</span>;</div><div class="line">			<span class="keyword">int</span> ans=<span class="number">2</span>;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>; k&lt;=n; k++) &#123;</div><div class="line">				<span class="keyword">if</span>(k==i||k==j||q[k].h&gt;mx||q[k].h&lt;mn)<span class="keyword">continue</span>;</div><div class="line">				<span class="keyword">if</span>(now-q[k].c&lt;<span class="number">0</span>)<span class="keyword">continue</span>;</div><div class="line">				now-=q[k].c;</div><div class="line">				ans++;</div><div class="line">			&#125;</div><div class="line">			Ans=max(Ans,ans);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(Ans==<span class="number">0</span>&amp;&amp;q[<span class="number">1</span>].c&lt;=t)Ans=<span class="number">1</span>;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>,Ans);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>也可以用dp：<strong>首先显而易见的是，跳楼的过程中楼房的高度应该是单调的，所以我们第一步可以按照从低到高排序，这样在做动态规划的时候就拥有了明确的转移方向，不存在有效性。<br>另f[ i ][ j ]表示跳到了第i座楼且已经跳了j次楼的最小花费，转移枚举下一次跳到i+1到n中那一座楼即可。<br>最后出答案枚举所有可能的状态，将花费满足条件的计入答案即可。</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;list&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bitset&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;numeric&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> f[<span class="number">100</span>][<span class="number">100</span>];</div><div class="line"><span class="keyword">struct</span> rec</div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> d,t;</div><div class="line">	rec()&#123;&#125;</div><div class="line">	rec(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</div><div class="line">	&#123;</div><div class="line">		d=a;t=b;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> rec &amp;a)<span class="keyword">const</span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> t&lt;a.t;</div><div class="line">	&#125;</div><div class="line">&#125;z[<span class="number">100</span>];</div><div class="line"><span class="keyword">class</span> GUMIAndSongsDiv1 &#123;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">maxSongs</span><span class="params">(<span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; duration, <span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; tone, <span class="keyword">int</span> T)</span> </span>&#123;</div><div class="line">		<span class="keyword">int</span> n=duration.size();</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">0</span>;a&lt;n;a++)</div><div class="line">			z[a]=rec(duration[a],tone[a]);</div><div class="line">		sort(z,z+n);</div><div class="line">		<span class="built_in">memset</span>(f,<span class="number">0x3f</span>,<span class="keyword">sizeof</span>(f));</div><div class="line">		f[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">0</span>;</div><div class="line">		f[<span class="number">0</span>][<span class="number">1</span>]=z[<span class="number">0</span>].d;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>;a&lt;n;a++)</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> b=<span class="number">0</span>;b&lt;=a+<span class="number">1</span>;b++)</div><div class="line">				<span class="keyword">if</span> (!b) f[a][b]=<span class="number">0</span>;</div><div class="line">				<span class="keyword">else</span></div><div class="line">				&#123;</div><div class="line">					<span class="keyword">for</span> (<span class="keyword">int</span> c=<span class="number">0</span>;c&lt;a;c++)</div><div class="line">						f[a][b]=min(f[a][b],f[c][b<span class="number">-1</span>]+z[a].d+(b==<span class="number">1</span> ? <span class="number">0</span> : z[a].t-z[c].t));</div><div class="line">				&#125;</div><div class="line">		<span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">0</span>;a&lt;n;a++)</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> b=<span class="number">1</span>;b&lt;=n;b++)</div><div class="line">				<span class="keyword">if</span> (f[a][b]&lt;=T) ans=max(ans,b);</div><div class="line">		<span class="keyword">return</span> ans;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">KawigiEdit_RunTest</span><span class="params">(<span class="keyword">int</span> testNum, <span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; p0, <span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; p1, <span class="keyword">int</span> p2, <span class="keyword">bool</span> hasAnswer, <span class="keyword">int</span> p3)</span> </span>&#123;</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Test "</span> &lt;&lt; testNum &lt;&lt; <span class="string">": ["</span> &lt;&lt; <span class="string">"&#123;"</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; <span class="keyword">int</span>(p0.size()) &gt; i; ++i) &#123;</div><div class="line">		<span class="keyword">if</span> (i &gt; <span class="number">0</span>) &#123;</div><div class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">","</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="built_in">cout</span> &lt;&lt; p0[i];</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"&#125;"</span> &lt;&lt; <span class="string">","</span> &lt;&lt; <span class="string">"&#123;"</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; <span class="keyword">int</span>(p1.size()) &gt; i; ++i) &#123;</div><div class="line">		<span class="keyword">if</span> (i &gt; <span class="number">0</span>) &#123;</div><div class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">","</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="built_in">cout</span> &lt;&lt; p1[i];</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"&#125;"</span> &lt;&lt; <span class="string">","</span> &lt;&lt; p2;</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"]"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">	GUMIAndSongsDiv1 *obj;</div><div class="line">	<span class="keyword">int</span> answer;</div><div class="line">	obj = <span class="keyword">new</span> GUMIAndSongsDiv1();</div><div class="line">	<span class="keyword">clock_t</span> startTime = clock();</div><div class="line">	answer = obj-&gt;maxSongs(p0, p1, p2);</div><div class="line">	<span class="keyword">clock_t</span> endTime = clock();</div><div class="line">	<span class="keyword">delete</span> obj;</div><div class="line">	<span class="keyword">bool</span> res;</div><div class="line">	res = <span class="literal">true</span>;</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Time: "</span> &lt;&lt; <span class="keyword">double</span>(endTime - startTime) / CLOCKS_PER_SEC &lt;&lt; <span class="string">" seconds"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">	<span class="keyword">if</span> (hasAnswer) &#123;</div><div class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"Desired answer:"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"\t"</span> &lt;&lt; p3 &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Your answer:"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"\t"</span> &lt;&lt; answer &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">	<span class="keyword">if</span> (hasAnswer) &#123;</div><div class="line">		res = answer == p3;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (!res) &#123;</div><div class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"DOESN'T MATCH!!!!"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">double</span>(endTime - startTime) / CLOCKS_PER_SEC &gt;= <span class="number">2</span>) &#123;</div><div class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"FAIL the timeout"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">		res = <span class="literal">false</span>;</div><div class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (hasAnswer) &#123;</div><div class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"Match :-)"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"OK, but is it right?"</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">""</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">	<span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"meet.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"meet.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line"></div><div class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; duration;</div><div class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; tone;</div><div class="line">	<span class="keyword">int</span> n,T;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>;a&lt;=n;a++)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> v;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;v);</div><div class="line">		duration.push_back(v);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>;a&lt;=n;a++)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> v;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;v);</div><div class="line">		tone.push_back(v);</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">	GUMIAndSongsDiv1 *obj;</div><div class="line">	<span class="keyword">int</span> answer;</div><div class="line">	obj = <span class="keyword">new</span> GUMIAndSongsDiv1();</div><div class="line">	answer = obj-&gt;maxSongs(duration, tone, T);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,answer);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-70fb8addf2f35088.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><img src="http://upload-images.jianshu.io/upload_images/8471136-18d3b7d0a644b350.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>先看的T3感觉可做就先去做的T3，结果这道题没来得及做，爆零&gt;_&lt;<br>30分的暴力：2的n次方枚举，比较好拿。然后60分做法就是枚举n个数看看是不是满足条件。<br><strong>满分做法：令 a1,a2,……,an 为一组答案，那么给出的n <em> ( n-1 ) / 2 个数中，最小的一定等于 a1+a2 ，次小的一定等于 a1+a3，为了确定a1 a2 a3我们还需要 a2 + a3 的值。由于 a1 + a4 可能小于 a2 + a3 ，所以我们不能确定 a2 + a3 的值，那么由于数据范围挺小的，枚举 a2 + a3 是 n </em> ( n-1 ) / 2 中的哪一个就好了。确定了 a2 + a3 之后我们发现 a1 a2 a3 的值就都有了，然后 a1+a4 一定是剩下中最小的，依次类推一个一个解出剩下的数就搞定了。</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">310</span>;</div><div class="line"><span class="keyword">int</span> n,m,res[maxn],ans[maxn][maxn],z[maxn*maxn],cnt;</div><div class="line"><span class="keyword">bool</span> use[maxn*maxn];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> p)</span> </span>&#123;</div><div class="line">	<span class="built_in">memset</span>(use,<span class="literal">false</span>,<span class="keyword">sizeof</span>(use));</div><div class="line">	<span class="keyword">if</span> ((z[<span class="number">1</span>]+z[<span class="number">2</span>]+z[p])&amp;<span class="number">1</span>) <span class="keyword">return</span>;</div><div class="line">	res[<span class="number">1</span>]=(z[<span class="number">1</span>]+z[<span class="number">2</span>]+z[p])/<span class="number">2</span>-z[p];</div><div class="line">	res[<span class="number">2</span>]=z[<span class="number">1</span>]-res[<span class="number">1</span>];</div><div class="line">	res[<span class="number">3</span>]=z[<span class="number">2</span>]-res[<span class="number">1</span>];</div><div class="line">	use[<span class="number">1</span>]=use[<span class="number">2</span>]=use[p]=<span class="literal">true</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">4</span>,b=<span class="number">3</span>; a&lt;=n; a++) &#123;</div><div class="line">		<span class="keyword">while</span> (b&lt;=m &amp;&amp; use[b])</div><div class="line">			b++;</div><div class="line">		<span class="keyword">if</span> (b&gt;m) <span class="keyword">return</span>;</div><div class="line">		res[a]=z[b]-res[<span class="number">1</span>];</div><div class="line">		use[b]=<span class="literal">true</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> c=<span class="number">2</span>; c&lt;a; c++) &#123;</div><div class="line">			<span class="keyword">if</span> (res[c]&gt;res[a]) <span class="keyword">return</span>;</div><div class="line">			<span class="keyword">int</span> v=res[c]+res[a];</div><div class="line">			<span class="keyword">int</span> p=lower_bound(z+<span class="number">1</span>,z+m+<span class="number">1</span>,v)-z;</div><div class="line">			<span class="keyword">if</span> (z[p]!=v) <span class="keyword">return</span>;</div><div class="line">			<span class="keyword">int</span> px=p;</div><div class="line">			<span class="keyword">while</span> (px &amp;&amp; z[px]==z[p])</div><div class="line">				px--;</div><div class="line">			px++;</div><div class="line">			<span class="keyword">while</span> (px&lt;=m &amp;&amp; z[px]==z[p] &amp;&amp; use[px])</div><div class="line">				px++;</div><div class="line">			<span class="keyword">if</span> (z[px]!=z[p] || use[px]) <span class="keyword">return</span>;</div><div class="line">			p=px;</div><div class="line">			use[p]=<span class="literal">true</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	cnt++;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>; a&lt;=n; a++)</div><div class="line">		ans[cnt][a]=res[a];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"city.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"city.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">	m=n*(n<span class="number">-1</span>)/<span class="number">2</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>; a&lt;=m; a++)</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;z[a]);</div><div class="line">	sort(z+<span class="number">1</span>,z+m+<span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">3</span>; a&lt;=m;) &#123;</div><div class="line">		check(a);</div><div class="line">		<span class="keyword">int</span> b=a;</div><div class="line">		<span class="keyword">while</span> (b&lt;=m &amp;&amp; z[b]==z[a])</div><div class="line">			b++;</div><div class="line">		a=b;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,cnt);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>; a&lt;=cnt; a++)</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> b=<span class="number">1</span>; b&lt;=n; b++) &#123;</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%d"</span>,ans[a][b]);</div><div class="line">			<span class="keyword">if</span> (b==n) <span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">			<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">" "</span>);</div><div class="line">		&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-42b033c675dc2845.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><del>我是分块60分暴力啊，为什么爆零了呀。</del><br><strong>做法的核心思想是按 p 的大小分不同的做法，首先注意到 p &gt; 10000 是没有什么意义的，所以我们按照 sqrt( 10000 ) = 100 进行分块来做。<br>对于 p &lt;= 100 的，我们发现对于 p &lt;= 100，总共的可能的询问也就只有 100 * ( 100 - 1 ) / 2 = 4950 种( p , v )的取值，所以我们可以预处理这一部分。我们枚举一个 p 和一个 v ，对一个( p , v )开一个 vector，将所有模 p 等于 v 的数全部放到这个 vector 里面来，那么每次询问的时候，只需要直接在这个 vector 里面二分区间内有多少个在这个 vector 里面即可。<br>对于 p &gt; 100 的，情况就比较多了没法预处理了，但是注意到可能被统计到答案里面的数，只有 v , p + v , 2p + v …………之类的数，这样可能的数只有 sqrt( n ) 个，所以我们提前对每一个 v 开一个 vector ，把所有等于 v 的数全部放到这个 vector 里面。之后每一次询问的时候，我们去 v , p + v , 2p + v ……这每一个 vector 里面二分即可。<br>这样总的复杂度就是O( nlog( n )sqrt( n ) )了，就可以过了。vector 常数比较大我也不知道能不能过，不过这个也可以直接用数组或者链表实现。</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">310</span>;</div><div class="line"><span class="keyword">int</span> n,m,res[maxn],ans[maxn][maxn],z[maxn*maxn],cnt;</div><div class="line"><span class="keyword">bool</span> use[maxn*maxn];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> p)</span> </span>&#123;</div><div class="line">	<span class="built_in">memset</span>(use,<span class="literal">false</span>,<span class="keyword">sizeof</span>(use));</div><div class="line">	<span class="keyword">if</span> ((z[<span class="number">1</span>]+z[<span class="number">2</span>]+z[p])&amp;<span class="number">1</span>) <span class="keyword">return</span>;</div><div class="line">	res[<span class="number">1</span>]=(z[<span class="number">1</span>]+z[<span class="number">2</span>]+z[p])/<span class="number">2</span>-z[p];</div><div class="line">	res[<span class="number">2</span>]=z[<span class="number">1</span>]-res[<span class="number">1</span>];</div><div class="line">	res[<span class="number">3</span>]=z[<span class="number">2</span>]-res[<span class="number">1</span>];</div><div class="line">	use[<span class="number">1</span>]=use[<span class="number">2</span>]=use[p]=<span class="literal">true</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">4</span>,b=<span class="number">3</span>; a&lt;=n; a++) &#123;</div><div class="line">		<span class="keyword">while</span> (b&lt;=m &amp;&amp; use[b])</div><div class="line">			b++;</div><div class="line">		<span class="keyword">if</span> (b&gt;m) <span class="keyword">return</span>;</div><div class="line">		res[a]=z[b]-res[<span class="number">1</span>];</div><div class="line">		use[b]=<span class="literal">true</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> c=<span class="number">2</span>; c&lt;a; c++) &#123;</div><div class="line">			<span class="keyword">if</span> (res[c]&gt;res[a]) <span class="keyword">return</span>;</div><div class="line">			<span class="keyword">int</span> v=res[c]+res[a];</div><div class="line">			<span class="keyword">int</span> p=lower_bound(z+<span class="number">1</span>,z+m+<span class="number">1</span>,v)-z;</div><div class="line">			<span class="keyword">if</span> (z[p]!=v) <span class="keyword">return</span>;</div><div class="line">			<span class="keyword">int</span> px=p;</div><div class="line">			<span class="keyword">while</span> (px &amp;&amp; z[px]==z[p])</div><div class="line">				px--;</div><div class="line">			px++;</div><div class="line">			<span class="keyword">while</span> (px&lt;=m &amp;&amp; z[px]==z[p] &amp;&amp; use[px])</div><div class="line">				px++;</div><div class="line">			<span class="keyword">if</span> (z[px]!=z[p] || use[px]) <span class="keyword">return</span>;</div><div class="line">			p=px;</div><div class="line">			use[p]=<span class="literal">true</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	cnt++;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>; a&lt;=n; a++)</div><div class="line">		ans[cnt][a]=res[a];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"city.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"city.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">	m=n*(n<span class="number">-1</span>)/<span class="number">2</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>; a&lt;=m; a++)</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;z[a]);</div><div class="line">	sort(z+<span class="number">1</span>,z+m+<span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">3</span>; a&lt;=m;) &#123;</div><div class="line">		check(a);</div><div class="line">		<span class="keyword">int</span> b=a;</div><div class="line">		<span class="keyword">while</span> (b&lt;=m &amp;&amp; z[b]==z[a])</div><div class="line">			b++;</div><div class="line">		a=b;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,cnt);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>; a&lt;=cnt; a++)</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> b=<span class="number">1</span>; b&lt;=n; b++) &#123;</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%d"</span>,ans[a][b]);</div><div class="line">			<span class="keyword">if</span> (b==n) <span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">			<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">" "</span>);</div><div class="line">		&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><del>上午真的不知道在想什么</del></p>
<hr>
<h1 id="下午"><a href="#下午" class="headerlink" title="下午"></a>下午</h1><p><strong>期望得分：100+100+0=200</strong><br><strong>实际得分：100+90+0=190( 10分WA至今未解之谜 )</strong><br><img src="http://upload-images.jianshu.io/upload_images/8471136-b23b51fb95804932.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><img src="http://upload-images.jianshu.io/upload_images/8471136-d7922062125cfac7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><del>这是入门难度的题吧</del><br><del>我还用了stack</del><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="built_in">stack</span> &lt;<span class="keyword">char</span>&gt; st;</div><div class="line"><span class="keyword">int</span> ans;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"shower.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"shower.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="keyword">char</span> c;</div><div class="line">	<span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;c) &#123;</div><div class="line">		<span class="keyword">if</span>(!st.empty() &amp;&amp; st.top()==<span class="string">'('</span>) &#123;</div><div class="line">			<span class="keyword">if</span>(c==<span class="string">')'</span>) st.pop();</div><div class="line">			<span class="keyword">if</span>(c==<span class="string">'('</span>) st.push(c);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span> st.push(c);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">while</span>(!st.empty()) &#123;</div><div class="line">		<span class="keyword">char</span> a=st.top();</div><div class="line">		st.pop();</div><div class="line">		<span class="keyword">char</span> b=st.top();</div><div class="line">		st.pop();</div><div class="line">		<span class="keyword">if</span>(a==b) ans++;</div><div class="line">		<span class="keyword">else</span> ans+=<span class="number">2</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>,ans);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>STD：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1000010</span>;</div><div class="line"><span class="keyword">char</span> s[maxn];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	freopen(<span class="string">"shower.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"shower.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%s"</span>,s+<span class="number">1</span>);</div><div class="line">    <span class="keyword">int</span> l=<span class="built_in">strlen</span>(s+<span class="number">1</span>),ans=<span class="number">0</span>,v=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>;a&lt;=l;a++)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span> (s[a]==<span class="string">'('</span>) v++;</div><div class="line">        <span class="keyword">else</span> v--;</div><div class="line">        <span class="keyword">if</span> (v&lt;<span class="number">0</span>) v=<span class="number">1</span>,ans++;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans+(v&gt;&gt;<span class="number">1</span>));</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-8a4e92f8c5ce754b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>这题我和标程做法也不太一样，<strong>没用前缀和直接二分到小于 n 的质数的位置然后暴力加，每次一个一个的移动，类似于滑动窗口</strong>，不会超时（为什么会WA一个点啊啊啊啊啊）。<br>求助：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 1000005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> prime[MAXN],n,tot,t;</div><div class="line"><span class="keyword">bool</span> vis[MAXN];</div><div class="line"><span class="keyword">struct</span> Query &#123;</div><div class="line">	<span class="keyword">int</span> N,k;</div><div class="line">&#125;q[<span class="number">2017</span>];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Get_Prime</span><span class="params">()</span> </span>&#123; </div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++) &#123;</div><div class="line">		<span class="keyword">if</span>(vis[i]==<span class="literal">false</span>) prime[++tot]=i;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=tot&amp;&amp;i*prime[j]&lt;=n;j++) &#123;</div><div class="line">			vis[i*prime[j]]=<span class="literal">true</span>;</div><div class="line">			<span class="keyword">if</span>(i%prime[j]==<span class="number">0</span>) <span class="keyword">break</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"diary.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"diary.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;t);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=t;i++) &#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;q[i].N,&amp;q[i].k);</div><div class="line">		n=max(n,q[i].N);</div><div class="line">	&#125;</div><div class="line">	Get_Prime();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=t;i++) &#123;</div><div class="line">		<span class="keyword">int</span> l=<span class="number">1</span>,r=tot,pos;</div><div class="line">		<span class="keyword">while</span>(l&lt;=r) &#123;</div><div class="line">			<span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">			<span class="keyword">if</span>(prime[m]&gt;=q[i].N) r=m;</div><div class="line">			<span class="keyword">else</span> l=m+<span class="number">1</span>;</div><div class="line">			<span class="keyword">if</span>(l==r) &#123;</div><div class="line">				pos=l;</div><div class="line">				<span class="keyword">while</span>(prime[pos]&gt;=q[i].N) pos--;</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">			&#125; </div><div class="line">		&#125;</div><div class="line">		<span class="keyword">int</span> sum=<span class="number">0</span>;</div><div class="line">		<span class="keyword">int</span> flag=<span class="number">1</span>;</div><div class="line">		<span class="keyword">if</span>(pos&lt;q[i].k) flag=<span class="number">0</span>;</div><div class="line">		<span class="keyword">else</span> <span class="keyword">for</span>(<span class="keyword">int</span> j=pos;j&gt;=pos-q[i].k+<span class="number">1</span>;j--) sum+=prime[j];</div><div class="line">		l=pos-q[i].k+<span class="number">1</span>,r=pos;</div><div class="line">		<span class="keyword">if</span>(flag) <span class="keyword">while</span>(sum&gt;q[i].N) &#123;</div><div class="line">			sum-=prime[r];</div><div class="line">			r--;</div><div class="line">			l--;</div><div class="line">			<span class="keyword">if</span>(l&lt;<span class="number">1</span>) &#123;</div><div class="line">				flag=<span class="number">0</span>;</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">			&#125;</div><div class="line">			sum+=prime[l];</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(!flag) <span class="built_in">printf</span>(<span class="string">"-1\n"</span>);</div><div class="line">		<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,sum);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>正解：<strong>首先第一步显然你需要处理出1-10^6之间的所有质数，方法有很多，你可以用线性筛，当然不是必要的，用nloglogn或者nlogn的筛法甚至打表都是ok的。<br>接下来就是每次怎么处理答案，对所有质数记个前缀和之后你就会发现直接二分K个质数从哪里开始就好了。</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1000010</span>;</div><div class="line"><span class="keyword">int</span> prime[maxn],cnt;</div><div class="line"><span class="keyword">bool</span> flag[maxn];</div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> sum[maxn];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	freopen(<span class="string">"diary.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"diary.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">2</span>;a&lt;=<span class="number">1000000</span>;a++)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span> (!flag[a])</div><div class="line">		&#123;</div><div class="line">			cnt++;</div><div class="line">			prime[cnt]=a;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> b=<span class="number">1</span>,c;b&lt;=cnt &amp;&amp; (c=a*prime[b])&lt;=<span class="number">1000000</span>;b++)</div><div class="line">		&#123;</div><div class="line">			flag[c]=<span class="literal">true</span>;</div><div class="line">			<span class="keyword">if</span> (a % prime[b]==<span class="number">0</span>) <span class="keyword">break</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>;a&lt;=cnt;a++)</div><div class="line">		sum[a]=prime[a]+sum[a<span class="number">-1</span>];</div><div class="line">	<span class="keyword">int</span> t;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;t);</div><div class="line">	<span class="keyword">for</span> (;t--;)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> n,k;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;k);</div><div class="line">		<span class="keyword">int</span> l=<span class="number">1</span>,r=cnt-k+<span class="number">2</span>;</div><div class="line">		<span class="keyword">if</span> (r&lt;=<span class="number">1</span>)</div><div class="line">		&#123;</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"-1\n"</span>);</div><div class="line">			<span class="keyword">continue</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">while</span> (l+<span class="number">1</span>!=r)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">			<span class="keyword">if</span> (sum[m+k<span class="number">-1</span>]-sum[m<span class="number">-1</span>]&gt;n) r=m;</div><div class="line">			<span class="keyword">else</span> l=m;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> (sum[l+k<span class="number">-1</span>]-sum[l<span class="number">-1</span>]&lt;=n) <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,(<span class="keyword">int</span>)(sum[l+k<span class="number">-1</span>]-sum[l<span class="number">-1</span>]));</div><div class="line">		<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"-1\n"</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-c8303f006c483ec7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><img src="http://upload-images.jianshu.io/upload_images/8471136-01bbf09622d6b9bf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><del>你见过暴力都不会打的题吗</del><br>正解：<strong>用f(i)表示第i棵树的值的话，会发现<br>f(i)=f(i-1)+f(i-2)+一坨奇怪的东西<br>这坨奇怪的东西大概是某棵树中到某个点的距离之和的几个组合方式，所以你会发现本质问题实际上需要求第i棵树中所有点到第j个点的距离之和<br>用g[i][j]表示这个东西，那么我们实际上要想办法求g[i][j]，那么这个递归的往下用记忆化搜索的方式来求。大概的式子可以看std</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> mo=<span class="number">1000000007</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">100</span>;</div><div class="line"><span class="keyword">int</span> n,id1[maxn],id2[maxn],l[maxn],res[maxn];</div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> num1[maxn],num2[maxn],size[maxn];</div><div class="line"><span class="keyword">struct</span> rec</div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> p;</div><div class="line">	<span class="keyword">long</span> <span class="keyword">long</span> p1,p2;</div><div class="line">	rec()&#123;&#125;</div><div class="line">	rec(<span class="keyword">int</span> a,<span class="keyword">long</span> <span class="keyword">long</span> b,<span class="keyword">long</span> <span class="keyword">long</span> c)</div><div class="line">	&#123;</div><div class="line">		p=a;</div><div class="line">		<span class="keyword">if</span> (b&lt;c) p1=b,p2=c;</div><div class="line">		<span class="keyword">else</span> p1=c,p2=b;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> rec &amp;a)<span class="keyword">const</span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span> (p!=a.p) <span class="keyword">return</span> p&lt;a.p;</div><div class="line">		<span class="keyword">if</span> (p1!=a.p1) <span class="keyword">return</span> p1&lt;a.p1;</div><div class="line">		<span class="keyword">return</span> p2&lt;a.p2;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"><span class="built_in">map</span>&lt; pair&lt;<span class="keyword">int</span>,<span class="keyword">long</span> <span class="keyword">long</span> &gt; ,<span class="keyword">int</span> &gt; ma;</div><div class="line"><span class="built_in">map</span>&lt;rec,<span class="keyword">int</span>&gt; ma2;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">long</span> <span class="keyword">long</span> p1,<span class="keyword">long</span> <span class="keyword">long</span> p2)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span> (!p) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">	<span class="keyword">if</span> (p1==p2) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">	rec x=rec(p,p1,p2);</div><div class="line">	<span class="keyword">if</span> (ma2.count(x)) <span class="keyword">return</span> ma2[x];</div><div class="line">	<span class="keyword">if</span> (p1&lt;size[id1[p]])</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span> (p2&lt;size[id1[p]]) ma2[x]=solve(id1[p],p1,p2);</div><div class="line">		<span class="keyword">else</span> ma2[x]=((<span class="keyword">long</span> <span class="keyword">long</span>)solve(id1[p],num1[p],p1)+solve(id2[p],num2[p],p2-size[id1[p]])+l[p])%mo;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span> (p2&lt;size[id1[p]]) ma2[x]=((<span class="keyword">long</span> <span class="keyword">long</span>)solve(id1[p],num1[p],p2)+solve(id2[p],num2[p],p1-size[id1[p]])+l[p])%mo;</div><div class="line">		<span class="keyword">else</span> ma2[x]=solve(id2[p],p1-size[id1[p]],p2-size[id1[p]]);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ma2[x];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">long</span> <span class="keyword">long</span> n)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span> (p==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">	pair&lt;<span class="keyword">int</span>,<span class="keyword">long</span> <span class="keyword">long</span>&gt; px;</div><div class="line">	px=make_pair(p,n);</div><div class="line">	<span class="keyword">if</span> (ma.count(make_pair(p,n))) <span class="keyword">return</span> ma[px];</div><div class="line">	<span class="keyword">if</span> (n&lt;size[id1[p]]) ma[px]=(((<span class="keyword">long</span> <span class="keyword">long</span>)solve(id1[p],num1[p],n)+l[p])*(size[id2[p]]%mo)%mo+solve(id2[p],num2[p])+solve(id1[p],n))%mo;</div><div class="line">	<span class="keyword">else</span> ma[px]=(((<span class="keyword">long</span> <span class="keyword">long</span>)solve(id2[p],num2[p],n-size[id1[p]])+l[p])*(size[id1[p]]%mo)%mo+solve(id1[p],num1[p])+solve(id2[p],n-size[id1[p]]))%mo;</div><div class="line">	<span class="keyword">return</span> ma[px];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	freopen(<span class="string">"cloth.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"cloth.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="keyword">while</span> (~<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n))</div><div class="line">	&#123;</div><div class="line">		ma.clear();</div><div class="line">		ma2.clear();</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>;a&lt;=n;a++)</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%d%d%I64d%I64d%d"</span>,&amp;id1[a],&amp;id2[a],&amp;num1[a],&amp;num2[a],&amp;l[a]);</div><div class="line">		size[<span class="number">0</span>]=<span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>;a&lt;=n;a++)</div><div class="line">			size[a]=size[id1[a]]+size[id2[a]];</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>;a&lt;=n;a++)</div><div class="line">			res[a]=((<span class="keyword">long</span> <span class="keyword">long</span>)solve(id1[a],num1[a])*(size[id2[a]]%mo)%mo+(<span class="keyword">long</span> <span class="keyword">long</span>)(size[id1[a]]%mo)*(size[id2[a]]%mo)%mo*l[a]%mo+(<span class="keyword">long</span> <span class="keyword">long</span>)solve(id2[a],num2[a])*(size[id1[a]]%mo)%mo+res[id1[a]]+res[id2[a]])%mo;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>;a&lt;=n;a++)</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,res[a]);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>上午30+下午190=总共220，真是不应该，正常发挥应该可以比这个分数高的，有读题的原因也有时间不够的原因。。。还要慢慢改进不足之处。<del>AK不存在</del><br> <del>下次先拿奖再说（滑稽</del><br> <del>还是先去把我的T2调出来吧</del></strong></p>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sukixj.github.io/2017/10/28/qbkqccd1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuki">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/28/qbkqccd1/" itemprop="url">清北考前冲刺Day1</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-10-28T21:10:41+08:00">
                2017-10-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="上午"><a href="#上午" class="headerlink" title="上午"></a>上午</h1><p><strong>期望得分：100+100+0=200</strong><br><strong>实际得分：100+100+20=220</strong></p>
<h2 id="立方数-cubic"><a href="#立方数-cubic" class="headerlink" title="立方数(cubic)"></a>立方数(cubic)</h2><p><strong>Time Limit:1000ms   Memory Limit:128MB</strong></p>
<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>LYK定义了一个数叫“立方数”，若一个数可以被写作是一个正整数的3次方，则这个数就是立方数，例如1,8,27就是最小的3个立方数。<br>现在给定一个数P，LYK想要知道这个数是不是立方数。<br>当然你有可能随机输出一些莫名其妙的东西来骗分，因此LYK有T次询问~</p>
<h3 id="输入格式-cubic-in"><a href="#输入格式-cubic-in" class="headerlink" title="输入格式(cubic.in)"></a>输入格式(cubic.in)</h3><p>第一行一个数T，表示有T组数据。<br>接下来T行，每行一个数P。</p>
<h3 id="输出格式-cubic-out"><a href="#输出格式-cubic-out" class="headerlink" title="输出格式(cubic.out)"></a>输出格式(cubic.out)</h3><p>输出T行，对于每个数如果是立方数，输出“YES”，否则输出“NO”。</p>
<h3 id="输入样例"><a href="#输入样例" class="headerlink" title="输入样例"></a>输入样例</h3><p>3<br>8<br>27<br>28</p>
<h3 id="输出样例"><a href="#输出样例" class="headerlink" title="输出样例"></a>输出样例</h3><p>YES<br>YES<br>NO</p>
<h3 id="数据范围"><a href="#数据范围" class="headerlink" title="数据范围"></a>数据范围</h3><p>对于30%的数据p&lt;=100。<br>对于60%的数据p&lt;=10^6。<br>对于100%的数据p&lt;=10^18，T&lt;=100。</p>
<p><strong>开个数组存下规定范围内的所有立方数（因为p的范围所以数组开到10^6就好了），二分查找。</strong><br><strong>注意：一定要开 long long（包括循环中的 i ）</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 1000005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> t;</div><div class="line">ll a[MAXN];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"cubic.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"cubic.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;t);</div><div class="line">	<span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=MAXN;i++) a[i]=i*i*i;</div><div class="line">	<span class="keyword">while</span>(t--) &#123;</div><div class="line">		ll x;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%I64d"</span>,&amp;x);</div><div class="line">		<span class="keyword">int</span> l=<span class="number">1</span>,r=<span class="number">1000000</span>;</div><div class="line">		<span class="keyword">bool</span> flag=<span class="number">0</span>;</div><div class="line">		<span class="keyword">while</span>(l&lt;=r) &#123;</div><div class="line">			<span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">			<span class="keyword">if</span>(a[m]&gt;=x) r=m;</div><div class="line">			<span class="keyword">else</span> l=m+<span class="number">1</span>;</div><div class="line">			<span class="keyword">if</span>(l==r) &#123;</div><div class="line">				flag= a[l] == x ? <span class="number">0</span> : <span class="number">1</span>;</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">			&#125; </div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(!flag) <span class="built_in">printf</span>(<span class="string">"YES\n"</span>);</div><div class="line">		<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"NO\n"</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><del>其实暴力判断也可以过</del><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> A;</div><div class="line"><span class="keyword">int</span> T;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">work</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> x)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; ; i++)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span> (<span class="number">1l</span>l*i*i*i==x) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">        <span class="keyword">if</span> (<span class="number">1l</span>l*i*i*i&gt;x) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    freopen(<span class="string">"cubic.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">    freopen(<span class="string">"cubic.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">while</span> (T--)</div><div class="line">    &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%I64d"</span>,&amp;A);</div><div class="line">        <span class="keyword">if</span> (work(A)) <span class="built_in">puts</span>(<span class="string">"YES"</span>); <span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">"NO"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="立方数2-cubicp"><a href="#立方数2-cubicp" class="headerlink" title="立方数2(cubicp)"></a>立方数2(cubicp)</h2><p><strong>Time Limit:1000ms   Memory Limit:128MB</strong></p>
<h3 id="题目描述-1"><a href="#题目描述-1" class="headerlink" title="题目描述"></a>题目描述</h3><p>LYK定义了一个数叫“立方数”，若一个数可以被写作是一个正整数的3次方，则这个数就是立方数，例如1,8,27就是最小的3个立方数。<br>LYK还定义了一个数叫“立方差数”，若一个数可以被写作是两个立方数的差，则这个数就是“立方差数”，例如7(8-1),26(27-1),19(27-8)都是立方差数。<br>现在给定一个数P，LYK想要知道这个数是不是立方差数。<br>当然你有可能随机输出一些莫名其妙的东西，因此LYK有T次询问~<br>这个问题可能太难了…… 因此LYK规定P是个质数！</p>
<h3 id="输入格式-cubicp-in"><a href="#输入格式-cubicp-in" class="headerlink" title="输入格式(cubicp.in)"></a>输入格式(cubicp.in)</h3><p>第一行一个数T，表示有T组数据。<br>接下来T行，每行一个数P。</p>
<h3 id="输出格式-cubicp-out"><a href="#输出格式-cubicp-out" class="headerlink" title="输出格式(cubicp.out)"></a>输出格式(cubicp.out)</h3><p>输出T行，对于每个数如果是立方差数，输出“YES”，否则输出“NO”。</p>
<h3 id="输入样例-1"><a href="#输入样例-1" class="headerlink" title="输入样例"></a>输入样例</h3><p>5<br>2<br>3<br>5<br>7<br>11</p>
<h3 id="输出样例-1"><a href="#输出样例-1" class="headerlink" title="输出样例"></a>输出样例</h3><p>NO<br>NO<br>NO<br>YES<br>NO</p>
<h3 id="数据范围-1"><a href="#数据范围-1" class="headerlink" title="数据范围"></a>数据范围</h3><p>对于30%的数据p&lt;=100。<br>对于60%的数据p&lt;=10^6。<br>对于100%的数据p&lt;=10^12，T&lt;=100。</p>
<p><del><strong>我的方法真的很奇妙</strong></del><br>看了一下第一题跑出的数组，因为是立方差，所以我就随便找几个数减减看是不是素数，然后我就发现一个规律 <strong>素数应该都在相邻两个立方数的差中！</strong> 然后就和第一题一样了，又存了一个数组，二分查找。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 1000005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> t;</div><div class="line">ll a[MAXN],b[MAXN];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"cubicp.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"cubicp.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;t);</div><div class="line">	<span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=MAXN;i++) a[i]=i*i*i;</div><div class="line">	<span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=MAXN;i++) b[i]=a[i+<span class="number">1</span>]-a[i];</div><div class="line">	<span class="keyword">while</span>(t--) &#123;</div><div class="line">		ll x;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%I64d"</span>,&amp;x);</div><div class="line">		<span class="keyword">int</span> l=<span class="number">1</span>,r=<span class="number">1000000</span>;</div><div class="line">		<span class="keyword">bool</span> flag=<span class="number">0</span>;</div><div class="line">		<span class="keyword">while</span>(l&lt;=r) &#123;</div><div class="line">			<span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">			<span class="keyword">if</span>(b[m]&gt;=x) r=m;</div><div class="line">			<span class="keyword">else</span> l=m+<span class="number">1</span>;</div><div class="line">			<span class="keyword">if</span>(l==r) &#123;</div><div class="line">				flag= b[l] == x ? <span class="number">0</span> : <span class="number">1</span>;</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">			&#125; </div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(!flag) <span class="built_in">printf</span>(<span class="string">"YES\n"</span>);</div><div class="line">		<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"NO\n"</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>std是用了立方差公式，化简（令 a - b == 1（因为 p 是素数）），然后和第一题一样暴力枚举，就。。。又过了。</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    freopen(<span class="string">"cubicp.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">    freopen(<span class="string">"cubicp.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">    <span class="keyword">int</span> t,flag;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;t);</div><div class="line">    <span class="keyword">long</span> <span class="keyword">long</span> p;</div><div class="line">    <span class="keyword">while</span>(t--)</div><div class="line">    &#123;</div><div class="line">        flag=<span class="number">0</span>;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%I64d"</span>,&amp;p);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">1e6</span>+<span class="number">10</span>;i++)</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">if</span>(<span class="number">3l</span>l*i*i+<span class="number">3</span>*i+<span class="number">1</span>==p)</div><div class="line">            &#123;</div><div class="line">                flag=<span class="number">1</span>;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (<span class="number">3l</span>l*i*i+<span class="number">3</span>*i+<span class="number">1</span>&gt;p) <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(flag) <span class="built_in">printf</span>(<span class="string">"YES\n"</span>);</div><div class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"NO\n"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="猜数字-number"><a href="#猜数字-number" class="headerlink" title="猜数字(number)"></a>猜数字(number)</h2><p><strong>Time Limit:1000ms   Memory Limit:128MB</strong></p>
<h3 id="题目描述-2"><a href="#题目描述-2" class="headerlink" title="题目描述"></a>题目描述</h3><p>LYK在玩猜数字游戏。<br>总共有n个互不相同的正整数，LYK每次猜一段区间的最小值。形如[li,ri]这段区间的### 数字的最小值一定等于xi。<br>我们总能构造出一种方案使得LYK满意。直到…… LYK自己猜的就是矛盾的！<br>例如LYK猜[1,3]的最小值是2，[1,4]的最小值是3，这显然就是矛盾的。<br>你需要告诉LYK，它第几次猜数字开始就已经矛盾了。</p>
<h3 id="输入格式-number-in"><a href="#输入格式-number-in" class="headerlink" title="输入格式(number.in)"></a>输入格式(number.in)</h3><p>第一行两个数n和T，表示有n个数字，LYK猜了T次。<br>接下来T行，每行三个数分别表示li,ri和xi。</p>
<h3 id="输出格式-number-out"><a href="#输出格式-number-out" class="headerlink" title="输出格式(number.out)"></a>输出格式(number.out)</h3><p>输出一个数表示第几次开始出现矛盾，如果一直没出现矛盾输出T+1。</p>
<h3 id="输入样例-2"><a href="#输入样例-2" class="headerlink" title="输入样例"></a>输入样例</h3><p>20 4<br>1 10 7<br>5 19 7<br>3 12 8<br>1 20 1</p>
<h3 id="输出样例-2"><a href="#输出样例-2" class="headerlink" title="输出样例"></a>输出样例</h3><p>3</p>
<h3 id="数据范围-2"><a href="#数据范围-2" class="headerlink" title="数据范围"></a>数据范围</h3><p>对于50%的数据n&lt;=8，T&lt;=10。<br>对于80%的数据n&lt;=1000，T&lt;=1000。<br>对于100%的数据1&lt;=n,T&lt;=1000000,1&lt;=li&lt;=ri&lt;=n,1&lt;=xi&lt;=n（但并不保证一开始的所有数都是1~n的）。</p>
<h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h3><p>建议使用读入优化<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</div><div class="line">	<span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">for</span>(; !<span class="built_in">isdigit</span>(ch); ch = getchar()) <span class="keyword">if</span>(ch == <span class="string">'-'</span>) f = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">for</span>(; <span class="built_in">isdigit</span>(ch); ch = getchar()) x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + ch - <span class="string">'0'</span>;</div><div class="line">	<span class="keyword">return</span> x * f;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>一开始就奔着O（nT）的暴力分（<del>80呢</del>）去的，想当然的认为再次覆盖一个更大的数就会产生矛盾（<del>凑出了样例</del>），其实这样并不对，因为它的最小值可能会在任意位置出现，不能只判断询问的区间，gg~~</strong><br><strong>正解：二分答案+并查集O（nlogn * α（n））</strong><br><del>直接放正解吧</del><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 1000011</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> min(x, y) ((x) &lt; (y) ? (x) : (y))</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> max(x, y) ((x) &gt; (y) ? (x) : (y))</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n, q, ans;</div><div class="line"><span class="keyword">int</span> f[N];</div><div class="line"><span class="keyword">struct</span> node</div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> x, y, z;</div><div class="line">&#125;p[N], t[N];</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</div><div class="line">	<span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">for</span>(; !<span class="built_in">isdigit</span>(ch); ch = getchar()) <span class="keyword">if</span>(ch == <span class="string">'-'</span>) f = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">for</span>(; <span class="built_in">isdigit</span>(ch); ch = getchar()) x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + ch - <span class="string">'0'</span>;</div><div class="line">	<span class="keyword">return</span> x * f;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node x, node y)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">return</span> x.z &gt; y.z;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">return</span> x == f[x] ? x : f[x] = find(f[x]);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> k)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> i, j, x, y, lmin, lmax, rmin, rmax;</div><div class="line">	<span class="keyword">for</span>(i = <span class="number">1</span>; i &lt;= n + <span class="number">1</span>; i++) f[i] = i;</div><div class="line">	<span class="keyword">for</span>(i = <span class="number">1</span>; i &lt;= k; i++) t[i] = p[i];</div><div class="line">	<span class="built_in">std</span>::sort(t + <span class="number">1</span>, t + k + <span class="number">1</span>, cmp);</div><div class="line">	lmin = lmax = t[<span class="number">1</span>].x;</div><div class="line">	rmin = rmax = t[<span class="number">1</span>].y;</div><div class="line">	<span class="keyword">for</span>(i = <span class="number">2</span>; i &lt;= k; i++)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span>(t[i].z &lt; t[i - <span class="number">1</span>].z)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">if</span>(find(lmax) &gt; rmin) <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">			<span class="keyword">for</span>(j = find(lmin); j &lt;= rmax; j++)</div><div class="line">				f[find(j)] = find(rmax + <span class="number">1</span>);</div><div class="line">			lmin = lmax = t[i].x;</div><div class="line">			rmin = rmax = t[i].y;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span></div><div class="line">		&#123;</div><div class="line">			lmin = min(lmin, t[i].x);</div><div class="line">			lmax = max(lmax, t[i].x);</div><div class="line">			rmin = min(rmin, t[i].y);</div><div class="line">			rmax = max(rmax, t[i].y);</div><div class="line">			<span class="keyword">if</span>(lmax &gt; rmin) <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"><span class="comment">//	cout&lt;&lt;find(1)&lt;&lt;endl;</span></div><div class="line">	<span class="keyword">if</span>(find(lmax) &gt; rmin) <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    freopen(<span class="string">"number.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">    freopen(<span class="string">"number.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="keyword">int</span> i, x, y, mid;</div><div class="line">	n = read();</div><div class="line">	q = read();</div><div class="line">	<span class="keyword">for</span>(i = <span class="number">1</span>; i &lt;= q; i++)</div><div class="line">		p[i].x = read(), p[i].y = read(), p[i].z = read();</div><div class="line">	x = <span class="number">1</span>, y = q;</div><div class="line">	<span class="comment">//cout&lt;&lt;check(2)&lt;&lt;endl;</span></div><div class="line">	<span class="comment">//return 0;</span></div><div class="line">	ans = q + <span class="number">1</span>;</div><div class="line">	<span class="keyword">while</span>(x &lt;= y)</div><div class="line">	&#123;</div><div class="line">		mid = (x + y) &gt;&gt; <span class="number">1</span>;</div><div class="line">		<span class="keyword">if</span>(check(mid)) ans = mid, y = mid - <span class="number">1</span>;</div><div class="line">		<span class="keyword">else</span> x = mid + <span class="number">1</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><del>感觉上午还是蛮幸运的</del> </p>
<hr>
<h1 id="下午"><a href="#下午" class="headerlink" title="下午"></a>下午</h1><p><strong>期望得分：（50+）+30+0=80+</strong><br><strong>实际得分：20+30+0=50</strong></p>
<h2 id="水题-water"><a href="#水题-water" class="headerlink" title="水题(water)"></a>水题(water)</h2><p><strong>Time Limit:1000ms   Memory Limit:128MB</strong></p>
<h3 id="题目描述-3"><a href="#题目描述-3" class="headerlink" title="题目描述"></a>题目描述</h3><p>LYK出了道水题。<br>这个水题是这样的：有两副牌，每副牌都有n张。<br>对于第一副牌的每张牌长和宽分别是xi和yi。对于第二副牌的每张牌长和宽分别是aj和bj。第一副牌的第i张牌能覆盖第二副牌的第j张牌当且仅当xi&gt;=aj并且yi&gt;=bj。（注意牌不能翻转）当然一张牌只能去覆盖最多一张牌，而不能覆盖好多张。<br>LYK想让两副牌的各n张一一对应叠起来。它想知道第二副牌最多有几张能被第一副牌所覆盖。</p>
<h3 id="输入格式-water-in"><a href="#输入格式-water-in" class="headerlink" title="输入格式(water.in)"></a>输入格式(water.in)</h3><p>第一行一个数n。<br>接下来n行，每行两个数xi,yi。<br>接下来n行，每行两个数aj,bj。</p>
<h3 id="输出格式-water-out"><a href="#输出格式-water-out" class="headerlink" title="输出格式(water.out)"></a>输出格式(water.out)</h3><p>输出一个数表示答案。</p>
<h3 id="输入样例-3"><a href="#输入样例-3" class="headerlink" title="输入样例"></a>输入样例</h3><p>3<br>2 3<br>5 7<br>6 8<br>4 1<br>2 5<br>3 4</p>
<h3 id="输出样例-3"><a href="#输出样例-3" class="headerlink" title="输出样例"></a>输出样例</h3><p>2</p>
<h3 id="数据范围-3"><a href="#数据范围-3" class="headerlink" title="数据范围"></a>数据范围</h3><p>对于50%的数据n&lt;=10。<br>对于80%的数据n&lt;=1000。<br>对于100%的数据1&lt;=n&lt;=100000，1&lt;=xi,yi,aj,bj&lt;=10^9。</p>
<p><strong>看到这道题第一感觉就是无从下手，瞎贪心（<del>竟然贪了五个</del>），以为能骗挺多分的，结果。。。（<del>好像写错了？</del></strong><br><del>其实前三十分可以枚举全排列的</del><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 100005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> x=<span class="number">0</span>,f=<span class="number">1</span>;<span class="keyword">char</span> ch=getchar();</div><div class="line">	<span class="keyword">while</span>(ch&lt;<span class="string">'0'</span> || ch&gt;<span class="string">'9'</span>) &#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>)f=<span class="number">-1</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch&gt;=<span class="string">'0'</span> &amp;&amp; ch&lt;=<span class="string">'9'</span>) &#123;x=x*<span class="number">10</span>+ch-<span class="string">'0'</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">return</span> x*f;</div><div class="line">&#125;</div><div class="line"><span class="keyword">struct</span> card &#123;</div><div class="line">	<span class="keyword">int</span> x,y;</div><div class="line">&#125;c1[MAXN],c2[MAXN];</div><div class="line"><span class="keyword">int</span> n,ans,vis[MAXN];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">comp1</span><span class="params">(card a,card b)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> a.x&lt;b.x;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">comp2</span><span class="params">(card a,card b)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> a.y&lt;b.y;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">comp3</span><span class="params">(card a,card b)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> a.x*a.y&lt;b.x*b.y;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">greedy1</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> res=<span class="number">0</span>;</div><div class="line">	sort(c1+<span class="number">1</span>,c1+n+<span class="number">1</span>,comp1);</div><div class="line">	sort(c2+<span class="number">1</span>,c2+n+<span class="number">1</span>,comp1);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="keyword">if</span>(c1[i].x&gt;=c2[i].x &amp;&amp; c1[i].y&gt;=c2[i].y) res++;</div><div class="line">	<span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">greedy2</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> res=<span class="number">0</span>;</div><div class="line">	sort(c1+<span class="number">1</span>,c1+n+<span class="number">1</span>,comp2);</div><div class="line">	sort(c2+<span class="number">1</span>,c2+n+<span class="number">1</span>,comp2);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="keyword">if</span>(c1[i].x&gt;=c2[i].x &amp;&amp; c1[i].y&gt;=c2[i].y) res++;</div><div class="line">	<span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">greedy3</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> res=<span class="number">0</span>;</div><div class="line">	sort(c1+<span class="number">1</span>,c1+n+<span class="number">1</span>,comp3);</div><div class="line">	sort(c2+<span class="number">1</span>,c2+n+<span class="number">1</span>,comp3);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="keyword">if</span>(c1[i].x&gt;=c2[i].x &amp;&amp; c1[i].y&gt;=c2[i].y) res++;</div><div class="line">	<span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">greedy4</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> res=<span class="number">0</span>;</div><div class="line">	random_shuffle(c1+<span class="number">1</span>,c1+n+<span class="number">1</span>);</div><div class="line">	random_shuffle(c2+<span class="number">1</span>,c2+n+<span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="keyword">if</span>(c1[i].x&gt;=c2[i].x &amp;&amp; c1[i].y&gt;=c2[i].y) res++;</div><div class="line">	<span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">greedy5</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> res=<span class="number">0</span>;</div><div class="line">	sort(c1+<span class="number">1</span>,c1+n+<span class="number">1</span>,comp3);</div><div class="line">	sort(c2+<span class="number">1</span>,c2+n+<span class="number">1</span>,comp3);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">		<span class="keyword">int</span> l=<span class="number">1</span>,r=n;</div><div class="line">		<span class="keyword">bool</span> flag=<span class="number">0</span>;</div><div class="line">		<span class="keyword">while</span>(l&lt;=r) &#123;</div><div class="line">			<span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">			<span class="keyword">if</span>(c2[m].x*c2[m].y&gt;=c1[i].x*c1[i].y) r=m;</div><div class="line">			<span class="keyword">else</span> l=m+<span class="number">1</span>;</div><div class="line">			<span class="keyword">if</span>(l==r) &#123;</div><div class="line">				<span class="keyword">if</span>(vis[l]) <span class="keyword">break</span>;</div><div class="line">				<span class="keyword">if</span>(c1[i].x&gt;=c2[l].x &amp;&amp; c1[i].y&gt;=c2[l].y) res++;</div><div class="line">				vis[l]=<span class="number">1</span>;</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">			&#125; </div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"water.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"water.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	n=read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) c1[i].x=read(),c1[i].y=read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) c2[i].x=read(),c2[i].y=read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="keyword">if</span>(c1[i].x&gt;=c2[i].x &amp;&amp; c1[i].y&gt;=c2[i].y) ans++;</div><div class="line">	ans=max(greedy1(),ans);</div><div class="line">	ans=max(ans,greedy2());</div><div class="line">	ans=max(ans,greedy3());</div><div class="line">	ans=max(ans,greedy4());</div><div class="line">	ans=max(ans,greedy5());</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>,ans);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><del>说好的水题呢</del></p>
<p>贪心正解好像和我第5个贪心差不太多，不过用的数组维护，不支持删除，就打了个vis，可能就是这个地方不对吧。跟std学了一个很好的数据结构——<strong>multiset</strong>，<strong>支持插入重复元素的set。</strong><br><strong>对x[i]从小到大进行排序。<br>每次遇到B类牌，将y值插入进某个数据结构（multiset）中<br>遇到A类牌（不考虑x），找这个数据结构中y值尽可能大且不超过这张牌的y值,然后删除。</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n;</div><div class="line"><span class="built_in">multiset</span> &lt;<span class="keyword">int</span>&gt; s;</div><div class="line"><span class="keyword">struct</span> node &#123;<span class="keyword">int</span> x,y;&#125; a[<span class="number">100005</span>],b[<span class="number">100005</span>];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp</span><span class="params">(node i,node j)</span> </span>&#123;<span class="keyword">return</span> i.x&lt;j.x;&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    freopen(<span class="string">"water.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">    freopen(<span class="string">"water.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">    <span class="keyword">int</span> T;</div><div class="line">    T=<span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span>(T--)</div><div class="line">    &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;a[i].x,&amp;a[i].y);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;b[i].x,&amp;b[i].y);</div><div class="line">        sort(a,a+n,cmp);</div><div class="line">        sort(b,b+n,cmp);</div><div class="line">        s.clear();</div><div class="line">        <span class="keyword">int</span> k=<span class="number">0</span>,ans=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">while</span>(a[i].x&gt;=b[k].x&amp;&amp;k&lt;n)</div><div class="line">            &#123;</div><div class="line">                 s.insert(b[k].y);</div><div class="line">                 k++;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(s.empty())<span class="keyword">continue</span>;</div><div class="line">            <span class="built_in">multiset</span>&lt;<span class="keyword">int</span>&gt;::iterator it=s.upper_bound(a[i].y);</div><div class="line">            <span class="keyword">if</span> (it==s.begin()) <span class="keyword">continue</span>; it--;</div><div class="line">            ans++; s.erase(it);</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="梦境-dream"><a href="#梦境-dream" class="headerlink" title="梦境(dream)"></a>梦境(dream)</h2><p><strong>Time Limit:1000ms   Memory Limit:128MB</strong></p>
<h3 id="题目描述-4"><a href="#题目描述-4" class="headerlink" title="题目描述"></a>题目描述</h3><p>LYK做了一个梦。<br>这个梦是这样的，LYK是一个财主，有一个仆人在为LYK打工。<br>不幸的是，又到了月末，到了给仆人发工资的时间。但这个仆人很奇怪，它可能想要至少x块钱，并且当LYK凑不出恰好x块钱时，它不会找零钱给LYK。<br>LYK知道这个x一定是1~n之间的正整数。当然抠门的LYK只想付给它的仆人恰好x块钱。但LYK只有若干的金币，每个金币都价值一定数量的钱（注意任意两枚金币所代表的钱一定是不同的，且这个钱的个数一定是正整数）。LYK想带最少的金币，使得对于任意x，都能恰好拼出这么多钱。并且LYK想知道有多少携带金币的方案总数。<br>具体可以看样例。</p>
<h3 id="输入格式-dream-in"><a href="#输入格式-dream-in" class="headerlink" title="输入格式(dream.in)"></a>输入格式(dream.in)</h3><p>第一行一个数n，如题意所示。</p>
<h3 id="输出格式-dream-out"><a href="#输出格式-dream-out" class="headerlink" title="输出格式(dream.out)"></a>输出格式(dream.out)</h3><p>输出两个数，第一个数表示LYK至少携带的金币个数，第二数表示方案总数。 </p>
<h3 id="输入样例-4"><a href="#输入样例-4" class="headerlink" title="输入样例"></a>输入样例</h3><p>6</p>
<h3 id="输出样例-4"><a href="#输出样例-4" class="headerlink" title="输出样例"></a>输出样例</h3><p>3 2</p>
<h3 id="样例解释"><a href="#样例解释" class="headerlink" title="样例解释"></a>样例解释</h3><p>LYK需要至少带3枚金币，有两种方案，分别是{1,2,3}，{1,2,4}来恰好得到任意的1~n之间的x。</p>
<h3 id="输入样例2"><a href="#输入样例2" class="headerlink" title="输入样例2"></a>输入样例2</h3><p>10</p>
<h3 id="输出样例2"><a href="#输出样例2" class="headerlink" title="输出样例2"></a>输出样例2</h3><p>4 8</p>
<h3 id="数据范围-4"><a href="#数据范围-4" class="headerlink" title="数据范围"></a>数据范围</h3><p>对于30%的数据n&lt;=10。<br>对于60%的数据n&lt;=100。<br>对于100%的数据n&lt;=1000。</p>
<p>表示只会求最少用多少枚金币（int ( log ( n ) / log ( 2 ) ) + 1）啊啊啊啊啊。<br>第二问手玩了一下前三十分。。。<br>dfs写炸了。<br><del>代码丑就不放了</del><br><strong>正解：<br>方案总数：dp，搜索<br>2^0 + 2^1 + … + 2^k = O(n)<br>k = log ( n )</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> Max,<span class="keyword">int</span> Sum,<span class="keyword">int</span> S)</span>  </span>&#123; <span class="comment">// Sum&lt;2^S </span></div><div class="line">	<span class="keyword">if</span> (S==X) &#123;</div><div class="line">		<span class="keyword">if</span> (Sum&gt;=n) ans++;</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=Max+<span class="number">1</span>; i&lt;=Sum+<span class="number">1</span>; i++)</div><div class="line">		dfs(i,Sum+i,S+<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">// dfs(Max,Sum,S) // Max金币最大值，Sum所有金币的和，S金币的数量</span></div></pre></td></tr></table></figure></p>
<p><strong>dp[i][j][k] 当前有i个金币，金币和是j，最大的金币k。<br>if (dp[i][j][k]) 枚举下一枚金币是啥。</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n,sum,ans,dp[<span class="number">1005</span>][<span class="number">1005</span>],DP[<span class="number">1005</span>][<span class="number">1005</span>],i,j,k,l;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"dream.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"dream.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">	sum=<span class="keyword">int</span>(<span class="built_in">log</span>(n)/<span class="built_in">log</span>(<span class="number">2</span>)+<span class="number">0.000000001</span>)+<span class="number">1</span>;</div><div class="line">	dp[<span class="number">1</span>][<span class="number">1</span>]=<span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;sum; i++) &#123;</div><div class="line">		<span class="keyword">for</span> (j=<span class="number">1</span>; j&lt;=n; j++)</div><div class="line">			<span class="keyword">for</span> (k=<span class="number">1</span>; k&lt;=n; k++)</div><div class="line">				<span class="keyword">if</span> (dp[j][k])</div><div class="line">					<span class="keyword">for</span> (l=k+<span class="number">1</span>; l&lt;=j+<span class="number">1</span>; l++)</div><div class="line">						DP[min(n,j+l)][l]+=dp[j][k];</div><div class="line">		<span class="keyword">for</span> (j=<span class="number">1</span>; j&lt;=n; j++) <span class="keyword">for</span> (k=<span class="number">1</span>; k&lt;=n; k++) &#123;</div><div class="line">				dp[j][k]=DP[j][k];</div><div class="line">				DP[j][k]=<span class="number">0</span>;</div><div class="line">			&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> (j=<span class="number">1</span>; j&lt;=n; j++) ans+=dp[n][j];</div><div class="line">	<span class="built_in">cout</span>&lt;&lt;sum&lt;&lt;<span class="string">' '</span>&lt;&lt;ans;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="动态规划-dp"><a href="#动态规划-dp" class="headerlink" title="动态规划(dp)"></a>动态规划(dp)</h2><p><strong>Time Limit:1000ms   Memory Limit:128MB</strong></p>
<h3 id="题目描述-5"><a href="#题目描述-5" class="headerlink" title="题目描述"></a>题目描述</h3><p>LYK在学习dp，有一天它看到了一道关于dp的题目。<br>这个题目是这个样子的：一开始有n个数，一段区间的价值为这段区间相同的数的对数。我们想把这n个数切成恰好k段区间。之后这n个数的价值为这k段区间的价值和。我们想让最终这n个数的价值和尽可能少。<br>例如6个数1,1,2,2,3,3要切成3段，一个好方法是切成[1],[1,2],[2,3,3]，这样只有第三个区间有1的价值。因此这6个数的价值为1。<br>LYK并不会做，丢给了你。</p>
<h3 id="输入格式-dp-in"><a href="#输入格式-dp-in" class="headerlink" title="输入格式(dp.in)"></a>输入格式(dp.in)</h3><p>第一行两个数n,k。<br>接下来一行n个数ai表示这n个数。</p>
<h3 id="输出格式-dp-out"><a href="#输出格式-dp-out" class="headerlink" title="输出格式(dp.out)"></a>输出格式(dp.out)</h3><p>一个数表示答案。 </p>
<h3 id="输入样例-5"><a href="#输入样例-5" class="headerlink" title="输入样例"></a>输入样例</h3><p>10 2<br>1 2 1 2 1 2 1 2 1 2</p>
<h3 id="输出样例-5"><a href="#输出样例-5" class="headerlink" title="输出样例"></a>输出样例</h3><p>8</p>
<h3 id="数据范围-5"><a href="#数据范围-5" class="headerlink" title="数据范围"></a>数据范围</h3><p>对于30%的数据n&lt;=10。<br>对于60%的数据n&lt;=1000。<br>对于100%的数据1&lt;=n&lt;=100000,1&lt;=k&lt;=min(n,20),1&lt;=ai&lt;=n。<br>其中有30%的数据满足ai完全相同均匀分布在所有数据中。</p>
<p>区间DP好像不会写，我想打前三十暴力的，但是当时好像脑子抽筋了，没想出来怎么写，就转去想均匀分布的那三十分，<del>但是写炸了</del>。<br>其实听老师讲后发现第三题其实挺难的，状态比较难表示。</p>
<p><strong>dp[i][j] 表示1~i中， 切了j刀的最优解。</strong><br><strong>dp[i][j]=min{dp[k][j-1]+sum(k+1,i)}</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</div><div class="line"><span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=n; i++) g[i]=sum(<span class="number">1</span>,i);</div><div class="line"><span class="keyword">for</span> (j=<span class="number">1</span>; j&lt;=m; j++)</div><div class="line">&#123;</div><div class="line">  <span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=n; i++) &#123;f[i]=g[i]; g[i]=<span class="number">1000000000</span>;&#125;</div><div class="line">  <span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=n; i++) <span class="comment">//求g[1]~g[n]</span></div><div class="line">    <span class="keyword">for</span> (k=i<span class="number">-1</span>; k&gt;=<span class="number">0</span>; k--) <span class="comment">//g[1]~g[n]有可能能从f[0]~f[n-1]转移而来</span></div><div class="line">      g[i]=min(g[i],f[k]+sum(k+<span class="number">1</span>,i));</div><div class="line"></div><div class="line">&#125;</div><div class="line"><span class="built_in">cout</span>&lt;&lt;g[n];</div><div class="line">  <span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=n; i++) <span class="comment">//求g[1]~g[n]</span></div><div class="line">    <span class="keyword">for</span> (k=i<span class="number">-1</span>; k&gt;=<span class="number">0</span>; k--) <span class="comment">//g[1]~g[n]有可能能从f[0]~f[n-1]转移而来</span></div><div class="line">      g[i]=min(g[i],f[k]+sum(k+<span class="number">1</span>,i));</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> fl,<span class="keyword">int</span> fr)</span> <span class="comment">//要求g[fl]~g[fr]，可以用f[l]~f[r]进行转移</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span> (fl&gt;fr) <span class="keyword">return</span>;</div><div class="line">	<span class="keyword">int</span> mid=(fl+fr)&gt;&gt;<span class="number">1</span>,mi;</div><div class="line">	LL mx=<span class="number">1L</span>L&lt;&lt;<span class="number">60</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=l;i&lt;=r;i++) <span class="comment">// 求g[mid]</span></div><div class="line">	<span class="keyword">if</span> (i&lt;mid)</div><div class="line">	&#123;</div><div class="line">		move(i+<span class="number">1</span>,mid); <span class="comment">//求sum(i+1,mid) -&gt; tot;</span></div><div class="line">		<span class="keyword">if</span> (f[i]+tot&lt;mx) mx=f[i]+tot,mi=i;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//mi 表示最优解的位置，mx 最优解是多少</span></div><div class="line">	g[mid]=mx;</div><div class="line">	work(l,mi,fl,mid<span class="number">-1</span>);</div><div class="line">	work(mi,r,mid+<span class="number">1</span>,fr);</div><div class="line">&#125;</div><div class="line">work(<span class="number">0</span>,n<span class="number">-1</span>,<span class="number">1</span>,n)  <span class="comment">// 求g[1]~g[n]  可以用f[0]~f[n-1]转移</span></div><div class="line"><span class="comment">// c[i] i这个数字在当前区间出现了几次</span></div></pre></td></tr></table></figure></p>
<p>这个k是从大到小进行枚举，每次枚举时更新这个sum<br><strong>复杂度 20 * n^2 -&gt;70分</strong><br>满分做法需要控制住 j ，可以发现一个性质：<strong>随着i的增大，k不会减少。</strong><br><strong>20 * n^2的简单dp  -&gt;  在固定j的情况下 随着i的增大，k不降  -&gt;  分治求dp值</strong><br><del>讲了也不会</del><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100010</span>;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">int</span> c[N],a[N];</div><div class="line">LL f[N],g[N];</div><div class="line"><span class="keyword">int</span> p,q,n,k;</div><div class="line">LL tot;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">move</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span> </span>&#123; <span class="comment">// [p,q]之前的区间</span></div><div class="line">	<span class="keyword">while</span> (l&lt;p) p--,tot+=c[a[p]],c[a[p]]++;</div><div class="line">	<span class="keyword">while</span> (r&gt;q) q++,tot+=c[a[q]],c[a[q]]++;</div><div class="line">	<span class="keyword">while</span> (p&lt;l) c[a[p]]--,tot-=c[a[p]],p++;</div><div class="line">	<span class="keyword">while</span> (r&lt;q) c[a[q]]--,tot-=c[a[q]],q--;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> fl,<span class="keyword">int</span> fr)</span></span></div><div class="line"><span class="comment">//需要求dp[fl] ~ dp[fr]  最优解一定从l~r中的某一个转移过来</span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span> (fl&gt;fr) <span class="keyword">return</span>;</div><div class="line">	<span class="keyword">int</span> mid=(fl+fr)&gt;&gt;<span class="number">1</span>,mi;</div><div class="line">	LL mx=<span class="number">1L</span>L&lt;&lt;<span class="number">60</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=l; i&lt;=r; i++)</div><div class="line">		<span class="keyword">if</span> (i&lt;mid) &#123;</div><div class="line">			move(i+<span class="number">1</span>,mid);</div><div class="line">			-&gt; tot=sum(i+<span class="number">1</span>,mid);</div><div class="line">			<span class="keyword">if</span> (f[i]+tot&lt;mx) mx=f[i]+tot,mi=i;</div><div class="line">		&#125;</div><div class="line">	g[mid]=mx;</div><div class="line">	work(l,mi,fl,mid<span class="number">-1</span>);</div><div class="line">	work(mi,r,mid+<span class="number">1</span>,fr);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"dp.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"dp.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;k);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">	f[<span class="number">0</span>]=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) f[i]=<span class="number">1L</span>L&lt;&lt;<span class="number">60</span>;</div><div class="line">	<span class="keyword">while</span> (k--) &#123;</div><div class="line">		p=<span class="number">1</span>,q=<span class="number">0</span>,tot=<span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) c[i]=<span class="number">0</span>;</div><div class="line">		work(<span class="number">0</span>,n<span class="number">-1</span>,<span class="number">1</span>,n);</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=n; i++) f[i]=g[i],g[i]=<span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">cout</span>&lt;&lt;f[n];</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>上午220+下午50=总共280，可以接受，（<del>不过我们学校有400分大佬</del>），明天继续加油，<del>我 要 A K ！</del></strong></p>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sukixj.github.io/2017/10/22/math/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuki">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/22/math/" itemprop="url">无聊的数学</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-10-22T21:52:24+08:00">
                2017-10-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><del>有关数论的详细的定理证明我就先不写了，否则要写一年。</del></p>
<ul>
<li><h1 id="快速幂"><a href="#快速幂" class="headerlink" title="快速幂"></a>快速幂</h1><strong>快速幂会把幂次方运算从O（n）复杂度降低到O（logn）。</strong></li>
</ul>
<p><strong>假设求a的b次方，可以把b进行二进制分解，分解成若干个2的 i 次方相加。</strong><br>例如：$a^{11}=a^{2^0+2^1+2^3}$ -&gt; $a^{11}=a^{2^0}<em>a^{2^1}</em>a^{2^3}$<br><strong>注意取模</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function">ll <span class="title">Fast_pow</span><span class="params">(ll a,ll b,ll p)</span> </span>&#123;</div><div class="line">	ll r=<span class="number">1</span>,base=a;</div><div class="line">	<span class="keyword">while</span>(b) &#123;</div><div class="line">		<span class="keyword">if</span>(b&amp;<span class="number">1</span>) r=(r%p*base%p)%p;</div><div class="line">		base=(base%p*base%p)%p;</div><div class="line">		b&gt;&gt;=<span class="number">1</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> r%p;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<ul>
<li><h1 id="素数（质数）"><a href="#素数（质数）" class="headerlink" title="素数（质数）"></a>素数（质数）</h1><p><strong>因子只有1和其本身的数。</strong></p>
</li>
<li><h2 id="判断素数O（-sqrt-n-）"><a href="#判断素数O（-sqrt-n-）" class="headerlink" title="判断素数O（$ \sqrt{n} $）"></a>判断素数O（$ \sqrt{n} $）</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Prime</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(x&lt;=<span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=<span class="built_in">sqrt</span>(x);i++) </div><div class="line">	<span class="keyword">if</span>(!(x%i)) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<p><del>数学暂时弃疗</del>（<del>公式真难写</del>）</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sukixj.github.io/2017/10/22/string/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuki">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/22/string/" itemprop="url">萌萌哒的字符串</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-10-22T15:14:55+08:00">
                2017-10-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><h1 id="字符串哈希"><a href="#字符串哈希" class="headerlink" title="字符串哈希"></a>字符串哈希</h1><strong>字符串哈希就是一个字符串到一个整数的映射，常用于比较两个字符串是否相等。</strong><br><del>map大法好</del><br><del>set大法好</del></li>
</ul>
<p>hash值相等两个字符串大概率相等。<br>hash值不等两个字符串一定不相等。<br><strong>一般采取神奇的RK算法。</strong><br><strong>RK-hash 就是把一个字符串看作一个 base 进制的大整数，然后对一个<br>素数 p 取模。</strong><br><code>hash[i]=(hash[i-1] * base+s[i])%p</code><br><strong>base 可以取 31,131,13131 等，大于 |Σ| 即可。</strong><br><strong>注意要把 a 看作 1 而不是 0。</strong><br><strong>p 一定要是 long long 范围的一个素数，比如23333333333333333,10^18 + 9。</strong><br><strong>unsigned long long 自然溢出可以看作是对 2^64 取模，但是可以被特殊<br>构造卡掉。</strong><br>不放心可以多找几个素数同时算。<br><del><strong>瞎jb哈希才是最好玩的</strong></del><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 10005</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> seed 20020207</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ULL unsigned long long</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n;</div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> h[MAXN];</div><div class="line"><span class="built_in">string</span> s[MAXN];</div><div class="line"><span class="function">ULL <span class="title">hash</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</div><div class="line">	ULL value=<span class="number">0</span>;</div><div class="line">	<span class="keyword">int</span> x=<span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++) &#123;</div><div class="line">		value+=s[i]*x*seed;</div><div class="line">		x*=<span class="number">10</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> value;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">		<span class="built_in">cin</span>&gt;&gt;s[i];</div><div class="line">		h[i]=hash(s[i]);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line">	sort(h+<span class="number">1</span>,h+n+<span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">		<span class="keyword">if</span>(h[i]!=h[i+<span class="number">1</span>]) ans++;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>,ans);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<ul>
<li><h1 id="KMP"><a href="#KMP" class="headerlink" title="KMP"></a>KMP</h1><strong>KMP 是一个常用的单模式串匹配算法。</strong><br><strong>简单来说就是求B串在A串中能否匹配或者匹配到哪个位置。</strong><br>next 数组?<strong>最长的后缀等于前缀的位置。</strong><br>next 数组求法?<strong>自己与稍短一些的自己匹配。</strong><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1001</span>;</div><div class="line"><span class="keyword">int</span> Next[maxn];</div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; Ans;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">Get_Next</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> l=s.length(),t;</div><div class="line">    Next[<span class="number">0</span>]=<span class="number">-1</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;l;++i) &#123;</div><div class="line">        t=Next[i<span class="number">-1</span>];</div><div class="line">        <span class="keyword">while</span>(s[t+<span class="number">1</span>]!=s[i]&amp;&amp;t&gt;=<span class="number">0</span>)</div><div class="line">            t=Next[t];</div><div class="line">        <span class="keyword">if</span>(s[t+<span class="number">1</span>]==s[i])</div><div class="line">            Next[i]=t+<span class="number">1</span>;</div><div class="line">        <span class="keyword">else</span></div><div class="line">            Next[i]=<span class="number">-1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">KMP</span><span class="params">(<span class="built_in">string</span> s1,<span class="built_in">string</span> s2)</span> </span>&#123;</div><div class="line">    Get_Next(s2);</div><div class="line">    <span class="keyword">int</span> l1=s1.length();</div><div class="line">    <span class="keyword">int</span> l2=s2.length();</div><div class="line">    <span class="keyword">int</span> i=<span class="number">0</span>,j=<span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span>(j&lt;l1) &#123;</div><div class="line">        <span class="keyword">if</span>(s2[i]==s1[j]) &#123;</div><div class="line">            ++i;++j;</div><div class="line">            <span class="keyword">if</span>(i==l2) &#123;</div><div class="line">                Ans.push_back(j-l2+<span class="number">1</span>);</div><div class="line">                i=Next[i<span class="number">-1</span>]+<span class="number">1</span>;               </div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">if</span>(i==<span class="number">0</span>)</div><div class="line">                j++;</div><div class="line">            <span class="keyword">else</span></div><div class="line">                i=Next[i<span class="number">-1</span>]+<span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="built_in">string</span> s1,s2;</div><div class="line">    <span class="keyword">int</span> l;</div><div class="line">    <span class="built_in">cin</span>&gt;&gt;s1&gt;&gt;s2;</div><div class="line">    l=s2.length();</div><div class="line">    KMP(s1,s2);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;Ans.size();++i)</div><div class="line">    	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,Ans[i]);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;l;++i)</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>,Next[i]+<span class="number">1</span>);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><del><strong>扩展KMP</strong></del></p>
<hr>
<ul>
<li><h1 id="AC自动机（Trie图）"><a href="#AC自动机（Trie图）" class="headerlink" title="AC自动机（Trie图）"></a>AC自动机（Trie图）</h1><strong>由于AC自动机是基于Trie树的，所以顺便复习一下Trie树。</strong></li>
</ul>
<p><strong>多模式串匹配</strong><br>把 Trie 树上不存在的孩子用它 fail 节点的孩子补出来。<br>fail 节点的概念与 KMP 的 next 类似。<br>可以用一次 bfs 来求出。<br>若 trie[i][x] 存在，则 fail[trie[i][x]]=trie[fail[i]][x]。<br>否则，trie[i][x]=trie[fail[i]][x]。<br>没有 KMP 用单串 AC 自动机替代。(雾<br>简单来说<strong>AC自动机就是在Trie树上跑KMP。</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//求有多少模式串在文本串里出现过 </span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">struct</span> Trie &#123;</div><div class="line">	<span class="keyword">int</span> ch[<span class="number">26</span>];</div><div class="line">	<span class="keyword">int</span> end;</div><div class="line">	<span class="keyword">int</span> fail;</div><div class="line">&#125;AC[<span class="number">1000000</span>];</div><div class="line"><span class="keyword">int</span> cnt=<span class="number">0</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">index</span><span class="params">(<span class="keyword">char</span> c)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> c-<span class="string">'a'</span>;</div><div class="line">&#125; </div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Build_Trie</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> l=s.length();</div><div class="line">	<span class="keyword">int</span> now=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;l;i++) &#123;</div><div class="line">		<span class="keyword">int</span> id=index(s[i]);</div><div class="line">		<span class="keyword">if</span>(AC[now].ch[id]==<span class="number">0</span>) &#123;</div><div class="line">			AC[now].ch[id]=++cnt;</div><div class="line">		&#125;</div><div class="line">		now=AC[now].ch[id];</div><div class="line">	&#125;</div><div class="line">	AC[now].end++;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Get_fail</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++) &#123;</div><div class="line">		<span class="keyword">if</span>(AC[<span class="number">0</span>].ch[i]!=<span class="number">0</span>) &#123;</div><div class="line">			AC[AC[<span class="number">0</span>].ch[i]].fail=<span class="number">0</span>;</div><div class="line">			q.push(AC[<span class="number">0</span>].ch[i]);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">while</span>(!q.empty()) &#123;</div><div class="line">		<span class="keyword">int</span> u=q.front();</div><div class="line">		q.pop();</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++) &#123;</div><div class="line">			<span class="keyword">if</span>(AC[u].ch[i]!=<span class="number">0</span>) &#123;</div><div class="line">				AC[AC[u].ch[i]].fail=AC[AC[u].fail].ch[i];</div><div class="line">				q.push(AC[u].ch[i]);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">else</span> </div><div class="line">			  AC[u].ch[i]=AC[AC[u].fail].ch[i];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">AC_work</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> l=s.length();</div><div class="line">	<span class="keyword">int</span> now=<span class="number">0</span>,ans=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;l;i++) &#123;</div><div class="line">		now=AC[now].ch[index(s[i])];</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=now;j &amp;&amp; AC[j].end!=<span class="number">-1</span>;j=AC[j].fail) &#123;</div><div class="line">			ans+=AC[j].end;</div><div class="line">			AC[j].end=<span class="number">-1</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ans;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> n;</div><div class="line">	<span class="built_in">string</span> s;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">		<span class="built_in">cin</span>&gt;&gt;s;</div><div class="line">		Build_Trie(s);</div><div class="line">	&#125;</div><div class="line">	Get_fail();</div><div class="line">	<span class="built_in">cin</span>&gt;&gt;s;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>,AC_work(s));</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<ul>
<li><h1 id="Manacher"><a href="#Manacher" class="headerlink" title="Manacher"></a>Manacher</h1><strong>Manacher 是一个处理回文串的算法。</strong></li>
</ul>
<p>首先加一个小优化，就是在每个字符的间隔（包括头尾）添加特殊字符（如<em>），然后每个字符串的长度都会变成奇数，处理起来方便了许多，为了进一步减少编码的复杂度，可以在字符串的开始加入另一个特殊字符，这样就不用特殊处理越界问题。<br>a b c d e -&gt;$ </em> a <em> b </em> c <em> d </em> e *<br>记录 p[ i ] 表示从 i 这个点能满足回文向两边最大扩展的距离（包括 i ），这样每一个回文串就确定了。<br>我们假设 p[1 ~ i-1] 已经求好了，现在要求 p[ i ]：<br>假设之前能到的最右断点是 R ，对应的中点是 pos ，j 是 i 的对称点。</p>
<p>1.当i＜R时 </p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-12ff1c7cdfdfe012.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>由于L~R是回文，所以p[ i ] = p[ j ]（i的最长回文和j的最长回文相同）。 </p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-ff533ceea1fcf95a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>这种情况是另一种：j 的最长回文跳出 L 了。那么 i 的最长回文就不一定是 j 的最长回文了，但蓝色的肯定还是满足的。<br><strong>综上所述，p[ i ] = min(p[ 2 * pos-i ], R-i )。</strong><br>由于R是递增的，所以时间复杂度为O（n）。<br><strong>一个串的本质不同的回文串个数不超过 n 个。</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">void</span> manacher &#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%s"</span>,s+<span class="number">1</span>);</div><div class="line">	n=<span class="built_in">strlen</span>(s+<span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span>(i=n;i&gt;=<span class="number">1</span>;i--)</div><div class="line">		s[i*<span class="number">2</span>]=s[i];</div><div class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n*<span class="number">2</span>+<span class="number">1</span>;i+=<span class="number">2</span>)</div><div class="line">		s[i]=<span class="string">'*'</span>;</div><div class="line">	s[<span class="number">0</span>]=<span class="string">'$'</span>;</div><div class="line">	m=n*<span class="number">2</span>+<span class="number">1</span>;</div><div class="line">	R=pos=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">		<span class="keyword">if</span>(R&lt;i) &#123;</div><div class="line">			p[i]=<span class="number">0</span>;</div><div class="line">			<span class="keyword">for</span>(;s[i+p[i]+<span class="number">1</span>]==s[i-p[i]<span class="number">-1</span>];p[i]++);</div><div class="line">			R=p[i]+i;</div><div class="line">			pos=i;</div><div class="line">			<span class="keyword">continue</span>;</div><div class="line">		&#125;</div><div class="line">		j=pos*<span class="number">2</span>-i;</div><div class="line">		<span class="keyword">if</span>(i+p[j]&lt;R) &#123;</div><div class="line">			p[i]=p[j];</div><div class="line">			<span class="keyword">continue</span>;</div><div class="line">		&#125;</div><div class="line">		p[i]=R-i;</div><div class="line">		<span class="keyword">for</span>(;s[i+p[i]+<span class="number">1</span>]==s[i-p[i]<span class="number">-1</span>];p[i]++);</div><div class="line">		R=p[i]+i;</div><div class="line">		pos=i;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<ul>
<li><h1 id="后缀数组"><a href="#后缀数组" class="headerlink" title="后缀数组"></a><del>后缀数组</del></h1></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sukixj.github.io/2017/10/20/datastructure/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuki">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/20/datastructure/" itemprop="url">神奇的数据结构</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-10-20T16:00:00+08:00">
                2017-10-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="初级数据结构"><a href="#初级数据结构" class="headerlink" title="- 初级数据结构"></a>- 初级数据结构</h1><ul>
<li><h2 id="1、链表、双向链表（估计考试前是不会用了）"><a href="#1、链表、双向链表（估计考试前是不会用了）" class="headerlink" title="1、链表、双向链表（估计考试前是不会用了）"></a>1、链表、双向链表（<del>估计考试前是不会用了</del>）</h2></li>
<li><h4 id="定义链表："><a href="#定义链表：" class="headerlink" title="定义链表："></a>定义链表：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">struct</span> LinkList &#123;  </div><div class="line">    <span class="keyword">int</span> value;  </div><div class="line">    LinkList *next;  </div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
<li><h3 id="根据输入建立单链表"><a href="#根据输入建立单链表" class="headerlink" title="根据输入建立单链表"></a>根据输入建立单链表</h3><p><strong>将输入的节点插入到链表头部。</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function">LinkList *<span class="title">BuildList</span><span class="params">()</span> </span>&#123;  </div><div class="line">    LinkList *head = <span class="literal">NULL</span>;  </div><div class="line">    <span class="keyword">int</span> data;  </div><div class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;  </div><div class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;data) != EOF) &#123;  </div><div class="line">        <span class="comment">//scanf("%d", &amp;data);++i;  </span></div><div class="line">        LinkList *new_node = (LinkList *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LinkList));  </div><div class="line">        <span class="keyword">if</span> (<span class="literal">NULL</span> == new_node) &#123;  </div><div class="line">            <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"malloc failed"</span>);  </div><div class="line">            <span class="keyword">return</span> head;  </div><div class="line">        &#125;  </div><div class="line">        new_node-&gt;value = data;  </div><div class="line">        <span class="keyword">if</span> (head == <span class="literal">NULL</span>) &#123;  </div><div class="line">            new_node-&gt;next = <span class="literal">NULL</span>;  </div><div class="line">            head = new_node;  </div><div class="line">        &#125;  </div><div class="line">        <span class="keyword">else</span> &#123;  </div><div class="line">            new_node-&gt;next = head;  </div><div class="line">            head = new_node;  </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">    <span class="keyword">return</span> head;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><h3 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//在链表头部插入节点  </span></div><div class="line"><span class="function">LinkList *<span class="title">InsertToHead</span><span class="params">(<span class="keyword">int</span> value, LinkList *head)</span> </span>&#123;  </div><div class="line">    LinkList *new_node = (LinkList *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LinkList));  </div><div class="line">    <span class="keyword">if</span> (new_node == <span class="literal">NULL</span>) &#123;  </div><div class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"malloc failed"</span>);  </div><div class="line">        <span class="keyword">return</span> head;  </div><div class="line">    &#125;  </div><div class="line">    new_node-&gt;value = value;  </div><div class="line">    new_node-&gt;next = <span class="literal">NULL</span>;  </div><div class="line">    <span class="keyword">if</span> (head == <span class="literal">NULL</span>) &#123;  </div><div class="line">        head = new_node;  </div><div class="line">    &#125;  </div><div class="line">    <span class="keyword">else</span> &#123;  </div><div class="line">        new_node-&gt;next = head;  </div><div class="line">        head = new_node;  </div><div class="line">    &#125;  </div><div class="line">    <span class="keyword">return</span> head;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//链表尾部插入节点</span></div><div class="line"><span class="function">LinkList *<span class="title">InsertToTail</span><span class="params">(<span class="keyword">int</span> value, LinkList *head)</span> </span>&#123;</div><div class="line">	LinkList *new_node = (LinkList *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LinkList));</div><div class="line">	<span class="keyword">if</span> (new_node == <span class="literal">NULL</span>) &#123;</div><div class="line">		<span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">"malloc failed"</span>);</div><div class="line">		<span class="keyword">return</span> head;</div><div class="line">	&#125;</div><div class="line">	new_node-&gt;value = value;</div><div class="line">	new_node-&gt;next = <span class="literal">NULL</span>;</div><div class="line"></div><div class="line">	<span class="keyword">if</span> (head == <span class="literal">NULL</span>)</div><div class="line">		head = new_node;</div><div class="line">	<span class="keyword">else</span> &#123;</div><div class="line">		LinkList *pnode = head;</div><div class="line">		<span class="keyword">while</span> (pnode-&gt;next != <span class="literal">NULL</span>)</div><div class="line">			pnode = pnode-&gt;next;</div><div class="line">		pnode-&gt;next = new_node;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> head;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//删除某节点  </span></div><div class="line"><span class="function">LinkList *<span class="title">DeletebyValue</span><span class="params">(<span class="keyword">int</span> value, LinkList* head)</span> </span>&#123;  </div><div class="line">    <span class="keyword">if</span> (head == <span class="literal">NULL</span>)  </div><div class="line">        <span class="keyword">return</span> head;  </div><div class="line">    LinkList *pToDelete = <span class="literal">NULL</span>;  </div><div class="line">    <span class="keyword">if</span> (head-&gt;value == value) &#123;  </div><div class="line">        pToDelete = head;  </div><div class="line">        head = head-&gt;next;  </div><div class="line">    &#125;  </div><div class="line">    <span class="keyword">else</span> &#123;  </div><div class="line">        LinkList *p = head;  </div><div class="line">        <span class="keyword">while</span> (p-&gt;next != <span class="literal">NULL</span> &amp;&amp; p-&gt;next-&gt;value != value)  </div><div class="line">            p = p-&gt;next;  </div><div class="line">        <span class="keyword">if</span> (p-&gt;next != <span class="literal">NULL</span>) &#123;  </div><div class="line">            pToDelete = p-&gt;next;  </div><div class="line">            p-&gt;next = pToDelete-&gt;next;  </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">    <span class="keyword">if</span> (pToDelete != <span class="literal">NULL</span>) &#123;  </div><div class="line">        <span class="built_in">free</span>(pToDelete);  </div><div class="line">        pToDelete = <span class="literal">NULL</span>;  </div><div class="line">    &#125;  </div><div class="line">    <span class="keyword">return</span> head;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><h3 id="求单链表中结点的个数"><a href="#求单链表中结点的个数" class="headerlink" title="求单链表中结点的个数"></a>求单链表中结点的个数</h3><p><strong>注意检查链表是否为空。时间复杂度为O（n）。该操作不用特意检查链表是否为空，如下代码，链表为空会返回0。</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">Length</span><span class="params">(LinkList *head)</span> </span>&#123;  </div><div class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> length = <span class="number">0</span>;  </div><div class="line">    LinkList *p = head;  </div><div class="line">    <span class="keyword">while</span> (p) &#123;  </div><div class="line">        ++length;  </div><div class="line">        p = p-&gt;next;  </div><div class="line">    &#125;  </div><div class="line">    <span class="keyword">return</span> length;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><h3 id="打印链表元素"><a href="#打印链表元素" class="headerlink" title="打印链表元素"></a>打印链表元素</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//打印单链表  顺序 </span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintList</span><span class="params">(LinkList *head)</span> </span>&#123;  </div><div class="line">    LinkList *p = head;  </div><div class="line">    <span class="keyword">while</span> (p) &#123;  </div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>, p-&gt;value);  </div><div class="line">        p = p-&gt;next;  </div><div class="line">    &#125;  </div><div class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//逆序打印单链表：非递归  </span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">RPrintList</span><span class="params">(LinkList* head)</span> </span>&#123;  </div><div class="line">    <span class="keyword">if</span> (<span class="literal">NULL</span> == head)  </div><div class="line">        <span class="keyword">return</span>;  </div><div class="line">    <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; list_stack;  </div><div class="line">    <span class="keyword">while</span> (head) &#123;  </div><div class="line">        list_stack.push(head-&gt;value);  </div><div class="line">        head = head-&gt;next;  </div><div class="line">    &#125;  </div><div class="line">    <span class="keyword">while</span> (!list_stack.empty()) &#123;  </div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>, list_stack.top());  </div><div class="line">        list_stack.pop();  </div><div class="line">    &#125;  </div><div class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);  </div><div class="line">&#125;  </div><div class="line">  </div><div class="line"><span class="comment">//逆序打印单链表：递归  </span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">RPrintListRecursively</span><span class="params">(LinkList* head)</span> </span>&#123;  </div><div class="line">    <span class="keyword">if</span> (<span class="literal">NULL</span> == head)  </div><div class="line">        <span class="keyword">return</span>;  </div><div class="line">    <span class="keyword">else</span> &#123;  </div><div class="line">        RPrintListRecursively(head-&gt;next);  </div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>, head-&gt;value);  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><del><strong>双向链表是什么</strong></del></p>
<ul>
<li><h2 id="2、队列、单调队列、栈、单调栈"><a href="#2、队列、单调队列、栈、单调栈" class="headerlink" title="2、队列、单调队列、栈、单调栈"></a>2、队列、单调队列、栈、单调栈</h2></li>
<li><h3 id="队列："><a href="#队列：" class="headerlink" title="队列："></a>队列：</h3><strong>遵循先进先出的原则（FIFO）的数据结构。</strong></li>
<li><h4 id="STL："><a href="#STL：" class="headerlink" title="STL："></a>STL：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; qu;</div><div class="line">	<span class="keyword">int</span> a;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a);</div><div class="line">	qu.push(a); <span class="comment">//插入元素 </span></div><div class="line">	<span class="keyword">if</span>(!qu.empty()) &#123; <span class="comment">//判断队列是否为空 </span></div><div class="line">		<span class="built_in">cout</span>&lt;&lt;qu.size()&lt;&lt;<span class="built_in">endl</span>; <span class="comment">//输出队列中元素个数 </span></div><div class="line">		<span class="built_in">cout</span>&lt;&lt;qu.front(); <span class="comment">//输出队首元素 </span></div><div class="line">		qu.pop(); <span class="comment">//弹出队首元素 </span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><h4 id="手写队列："><a href="#手写队列：" class="headerlink" title="手写队列："></a>手写队列：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">struct</span> <span class="built_in">queue</span> &#123;</div><div class="line">	<span class="keyword">int</span> Q[<span class="number">500005</span>],head,tail;</div><div class="line">	<span class="built_in">queue</span>() &#123;</div><div class="line">		head=<span class="number">0</span>,tail=<span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> a)</span> </span>&#123;</div><div class="line">		Q[++tail]=a;</div><div class="line">		<span class="keyword">return</span> ;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</div><div class="line">		head++;</div><div class="line">		<span class="keyword">return</span> ;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">empty</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> head&gt;=tail;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">front</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> Q[head+<span class="number">1</span>];</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span>(head&lt;=tail) <span class="keyword">return</span> tail-head; </div><div class="line">	&#125; </div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">queue</span> qu;</div><div class="line">	<span class="keyword">int</span> a;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a);</div><div class="line">	qu.push(a); <span class="comment">//插入元素 </span></div><div class="line">	<span class="keyword">if</span>(!qu.empty()) &#123; <span class="comment">//判断队列是否为空 </span></div><div class="line">		<span class="built_in">cout</span>&lt;&lt;qu.size()&lt;&lt;<span class="built_in">endl</span>; <span class="comment">//输出队列中元素个数 </span></div><div class="line">		<span class="built_in">cout</span>&lt;&lt;qu.front(); <span class="comment">//输出队首元素 </span></div><div class="line">		qu.pop(); <span class="comment">//弹出队首元素 </span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><h3 id="单调队列："><a href="#单调队列：" class="headerlink" title="单调队列："></a>单调队列：</h3><p><strong>给定一个队列，维护三个操作。<br>1：将一个数x压入队列中。<br>2：求队列中数的最大值。<br>3：弹出队列尾的数。</strong></p>
</li>
</ul>
<p><strong>这就要用到单调队列。</strong></p>
<p><strong>在每次进入队伍时，判断当前元素与队尾元素的大小关系，若小于队尾元素，则队尾不可能成为最小值，直接删除即可。<br>每次查询的答案一定在队首位置。<br>由于每个元素至多进队列和出队列一次，时间复杂度为O(n)。</strong></p>
<p><strong>下面以Sliding Window为例</strong></p>
<h4 id="STL（用deque（双端队列））"><a href="#STL（用deque（双端队列））" class="headerlink" title="STL（用deque（双端队列））"></a>STL（用deque（双端队列））</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; P;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 1000000 + 10</span></div><div class="line"><span class="built_in">deque</span>&lt;P&gt; Q1;</div><div class="line"><span class="built_in">deque</span>&lt;P&gt; Q2;</div><div class="line"><span class="keyword">int</span> n,k;</div><div class="line"><span class="keyword">int</span> Min[maxn], Max[maxn];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;k)) &#123;</div><div class="line">		<span class="keyword">while</span>(!Q1.empty()) Q1.pop_back();</div><div class="line">		<span class="keyword">while</span>(!Q2.empty()) Q2.pop_back();</div><div class="line">		<span class="keyword">int</span> x;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;x);</div><div class="line">			<span class="keyword">while</span>(!Q1.empty() &amp;&amp; Q1.back().first &gt;= x) Q1.pop_back();</div><div class="line">			Q1.push_back(P(x,i));</div><div class="line">			<span class="keyword">if</span>(i &gt;= k) &#123;</div><div class="line">				<span class="keyword">while</span>(!Q1.empty() &amp;&amp; Q1.front().second &lt;= i-k) Q1.pop_front();</div><div class="line">				Min[i] = Q1.front().first;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">while</span>(!Q2.empty() &amp;&amp; Q2.back().first &lt;= x) Q2.pop_back();</div><div class="line">			Q2.push_back(P(x,i));</div><div class="line">			<span class="keyword">if</span>(i &gt;= k) &#123;</div><div class="line">				<span class="keyword">while</span>(!Q2.empty() &amp;&amp; Q2.front().second &lt;= i-k) Q2.pop_front();</div><div class="line">				Max[i] = Q2.front().first;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=k; i&lt;=n; i++)</div><div class="line">			i == n ? <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, Min[i]) : <span class="built_in">printf</span>(<span class="string">"%d "</span>, Min[i]);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=k; i&lt;=n; i++)</div><div class="line">			i == n ? <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, Max[i]) : <span class="built_in">printf</span>(<span class="string">"%d "</span>, Max[i]);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="手写"><a href="#手写" class="headerlink" title="手写"></a>手写</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 1000005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">struct</span> s &#123;</div><div class="line">	<span class="keyword">int</span> v,p;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span> </span>&#123;</div><div class="line">		v=a,p=b;</div><div class="line">	&#125;</div><div class="line">&#125;Q1[MAXN],Q2[MAXN];</div><div class="line"><span class="keyword">int</span> h1,t1,h2,t2,Min[MAXN],Max[MAXN];</div><div class="line"><span class="keyword">int</span> n,k;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;k);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">		<span class="keyword">int</span> x;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;x);</div><div class="line">		<span class="keyword">while</span>(h1&lt;t1 &amp;&amp; Q1[t1].v&gt;=x) t1--;</div><div class="line">		Q1[++t1].f(x,i);</div><div class="line">		<span class="keyword">if</span>(i&gt;=k) &#123;</div><div class="line">			<span class="keyword">while</span>(h1&lt;t1 &amp;&amp; Q1[h1+<span class="number">1</span>].p&lt;=i-k) h1++;</div><div class="line">			Min[i]=Q1[h1+<span class="number">1</span>].v;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">while</span>(h2&lt;t2 &amp;&amp; Q2[t2].v&lt;=x) t2--;</div><div class="line">		Q2[++t2].f(x,i);</div><div class="line">		<span class="keyword">if</span>(i&gt;=k) &#123;</div><div class="line">			<span class="keyword">while</span>(h2&lt;t2 &amp;&amp; Q2[h2+<span class="number">1</span>].p&lt;=i-k) h2++;</div><div class="line">			Max[i]=Q2[h2+<span class="number">1</span>].v;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=k;i&lt;=n;i++) <span class="built_in">printf</span>(<span class="string">"%d "</span>,Min[i]);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=k;i&lt;=n;i++) <span class="built_in">printf</span>(<span class="string">"%d "</span>,Max[i]);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><h3 id="栈："><a href="#栈：" class="headerlink" title="栈："></a>栈：</h3><strong>遵循先进后出的原则（FILO）的数据结构。</strong></li>
<li><h4 id="STL"><a href="#STL" class="headerlink" title="STL:"></a>STL:</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="built_in">stack</span> &lt;<span class="keyword">int</span>&gt; st;</div><div class="line">    <span class="keyword">int</span> a;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a);</div><div class="line">    st.push(a); <span class="comment">//插入元素 </span></div><div class="line">    <span class="keyword">if</span>(!st.empty()) &#123; <span class="comment">//判断栈是否为空 </span></div><div class="line">        <span class="built_in">cout</span>&lt;&lt;st.size()&lt;&lt;<span class="built_in">endl</span>; <span class="comment">//输出栈中元素个数 </span></div><div class="line">        <span class="built_in">cout</span>&lt;&lt;st.top(); <span class="comment">//输出栈顶元素 </span></div><div class="line">        st.pop(); <span class="comment">//弹出栈顶元素 </span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><h4 id="手写："><a href="#手写：" class="headerlink" title="手写："></a>手写：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">struct</span> <span class="built_in">stack</span> &#123;</div><div class="line">	<span class="keyword">int</span> a[<span class="number">23333</span>],pos;</div><div class="line">	<span class="built_in">stack</span>() &#123;</div><div class="line">		pos=<span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">		a[++pos]=x;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</div><div class="line">		pos--;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">empty</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> !pos;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">top</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> a[pos];</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> pos;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="built_in">stack</span> st;</div><div class="line">    <span class="keyword">int</span> a;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a);</div><div class="line">    st.push(a); <span class="comment">//插入元素 </span></div><div class="line">    <span class="keyword">if</span>(!st.empty()) &#123; <span class="comment">//判断栈是否为空 </span></div><div class="line">        <span class="built_in">cout</span>&lt;&lt;st.size()&lt;&lt;<span class="built_in">endl</span>; <span class="comment">//输出栈中元素个数 </span></div><div class="line">        <span class="built_in">cout</span>&lt;&lt;st.top(); <span class="comment">//输出栈顶元素 </span></div><div class="line">        st.pop(); <span class="comment">//弹出栈顶元素 </span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><h3 id="单调栈"><a href="#单调栈" class="headerlink" title="单调栈"></a><del>单调栈</del></h3></li>
<li><h2 id="3、堆"><a href="#3、堆" class="headerlink" title="3、堆"></a>3、堆</h2><del><strong>STL多好用</strong></del><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line">priority_queue &lt;<span class="keyword">int</span>&gt; big_heap; <span class="comment">//大根堆</span></div><div class="line">priority_queue &lt;<span class="keyword">int</span>,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;,greater&lt;<span class="keyword">int</span>&gt; &gt; small_heap; <span class="comment">//小根堆</span></div><div class="line">heap.top();</div><div class="line">heap.push();</div><div class="line">heap.pop();</div><div class="line">heap.empty();</div><div class="line">heap.size();</div></pre></td></tr></table></figure>
</li>
</ul>
<p>手写：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">struct</span> priority_queue &#123;</div><div class="line">	<span class="keyword">int</span> a[<span class="number">23333</span>],size;</div><div class="line">	priority_queue() &#123;</div><div class="line">		size=<span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">		a[++size]=x;</div><div class="line">		<span class="keyword">int</span> son=size,dad;</div><div class="line">		<span class="keyword">while</span>(son!=<span class="number">1</span>) &#123;</div><div class="line">			dad=son&gt;&gt;<span class="number">1</span>;</div><div class="line">			<span class="keyword">if</span>(a[dad]&gt;a[son]) swap(a[dad],a[son]);</div><div class="line">			son=dad;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> ;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">top</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> a[<span class="number">1</span>];</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</div><div class="line">		a[<span class="number">1</span>]=a[size--];</div><div class="line">		<span class="keyword">int</span> dad=<span class="number">1</span>,son=<span class="number">2</span>;</div><div class="line">		<span class="keyword">while</span>(son&lt;=size) &#123;</div><div class="line">			son=dad&lt;&lt;<span class="number">1</span>;</div><div class="line">			<span class="keyword">if</span>(son&lt;size &amp;&amp; a[son]&gt;a[son+<span class="number">1</span>]) son++;</div><div class="line">			<span class="keyword">if</span>(a[dad]&gt;a[son]) swap(a[son],a[dad]);</div><div class="line">			dad=son;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> ;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">empty</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> !size;</div><div class="line">	&#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<hr>
<h1 id="基础数据结构"><a href="#基础数据结构" class="headerlink" title="- 基础数据结构"></a>- 基础数据结构</h1><ul>
<li><h2 id="1、线段树"><a href="#1、线段树" class="headerlink" title="1、线段树"></a>1、线段树</h2><strong>二分的思想把区间内的点分成若干个线段然后处理问题，查询和修改都是O（nlogn）</strong><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> lson l,m,rt&lt;&lt;1</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rson m+1,r,rt&lt;&lt;1|1</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 1000005</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">read</span><span class="params">()</span> </span>&#123;</div><div class="line">	ll x=<span class="number">0</span>,f=<span class="number">1</span>;<span class="keyword">char</span> ch=getchar();</div><div class="line">	<span class="keyword">while</span>(ch&lt;<span class="string">'0'</span>||ch&gt;<span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>)f=<span class="number">-1</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch&gt;=<span class="string">'0'</span>&amp;&amp;ch&lt;=<span class="string">'9'</span>)&#123;x=x*<span class="number">10</span>+ch-<span class="string">'0'</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">return</span> x*f;</div><div class="line">&#125;</div><div class="line">ll a[maxn],sum[maxn&lt;&lt;<span class="number">2</span>],col[maxn&lt;&lt;<span class="number">2</span>];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(ll rt)</span> </span>&#123;</div><div class="line">	sum[rt] = sum[rt&lt;&lt;<span class="number">1</span>] + sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">color</span><span class="params">(ll l,ll r,ll rt,ll c)</span> </span>&#123;</div><div class="line">	col[rt]+=c;</div><div class="line">	sum[rt]+=c*(r-l+<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_col</span><span class="params">(ll l,ll r,ll rt)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(col[rt]) &#123;</div><div class="line">		ll m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">		color(lson,col[rt]);</div><div class="line">		color(rson,col[rt]);</div><div class="line">		col[rt]=<span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(ll l,ll r,ll rt)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(l==r) &#123;</div><div class="line">		sum[rt] = a[l];</div><div class="line">		<span class="keyword">return</span> ;</div><div class="line">	&#125;</div><div class="line">	ll m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">	build(lson);</div><div class="line">	build(rson);</div><div class="line">	update(rt);</div><div class="line">&#125;</div><div class="line"><span class="function">ll <span class="title">query</span><span class="params">(ll l,ll r,ll rt,ll L,ll R)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(L&lt;=l &amp;&amp; R&gt;=r)<span class="keyword">return</span> sum[rt];</div><div class="line">	push_col(l,r,rt);</div><div class="line">	ll ret=<span class="number">0</span>;</div><div class="line">	ll m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">	<span class="keyword">if</span>(L&lt;=m) ret+=query(lson,L,R);</div><div class="line">	<span class="keyword">if</span>(m&lt;R) ret+=query(rson,L,R);</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(ll l,ll r,ll rt,ll L,ll R,ll v)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(L&lt;=l &amp;&amp; R&gt;=r) &#123;</div><div class="line">		color(l,r,rt,v);</div><div class="line">		<span class="keyword">return</span> ;</div><div class="line">	&#125;</div><div class="line">	push_col(l,r,rt);</div><div class="line">	ll m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">	<span class="keyword">if</span>(L&lt;=m) modify(lson,L,R,v);</div><div class="line">	<span class="keyword">if</span>(m&lt;R) modify(rson,L,R,v);</div><div class="line">	updata(re);</div><div class="line">&#125;</div><div class="line">ll n,m;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	n=read(),m=read();</div><div class="line">	<span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)a[i]=read();</div><div class="line">	build(<span class="number">1</span>,n,<span class="number">1</span>);</div><div class="line">	<span class="keyword">while</span>(m--) &#123;</div><div class="line">		ll id=read();</div><div class="line">		<span class="keyword">if</span>(id==<span class="number">2</span>) &#123;</div><div class="line">			ll x=read(),y=read();</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,query(<span class="number">1</span>,n,<span class="number">1</span>,x,y));</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span> &#123;</div><div class="line">			ll x=read(),y=read(),z=read();</div><div class="line">			modify(<span class="number">1</span>,n,<span class="number">1</span>,x,y,z);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<ul>
<li><h2 id="2、树状数组"><a href="#2、树状数组" class="headerlink" title="2、树状数组"></a>2、树状数组</h2><strong>前缀和和差分的思想，利用二进制，反正就是跳来跳去。</strong><del><strong>反正背过就行。</strong></del><br><del><strong>就当存一下模板。</strong></del><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">1.将某一个数加上x</div><div class="line">2.求出某区间每一个数的和</div><div class="line">*/</div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 500005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> a[MAXN],c[MAXN],n,m;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> x&amp;(-x);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	<span class="keyword">while</span>(p&lt;=n) &#123;</div><div class="line">		c[p]+=x;</div><div class="line">		p+=lowbit(p);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> p)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> sum=<span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(p) &#123;</div><div class="line">		sum+=c[p];</div><div class="line">		p-=lowbit(p);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> sum;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> sum(r)-sum(l<span class="number">-1</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]),modify(i,a[i]);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">		<span class="keyword">int</span> id,x,y;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;id,&amp;x,&amp;y);</div><div class="line">		<span class="keyword">if</span>(id==<span class="number">1</span>) modify(x,y); </div><div class="line">		<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,query(x,y));</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">1.将某区间每一个数数加上x</div><div class="line">2.求出某一个数的和</div><div class="line">*/</div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 500000+5</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n,m,pre,c[maxn];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> x&amp;(-x);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">int</span> pos,<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	<span class="keyword">while</span>(pos&lt;=n) &#123;</div><div class="line">		c[pos]+=x;</div><div class="line">		pos+=lowbit(pos);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> pos)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(pos&gt;<span class="number">0</span>) &#123;</div><div class="line">		ans+=c[pos];</div><div class="line">		pos-=lowbit(pos);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ans;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</div><div class="line">		<span class="keyword">int</span> x;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;x);</div><div class="line">		modify(i,x-pre);</div><div class="line">		pre=x;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">while</span>(m--) &#123;</div><div class="line">		<span class="keyword">int</span> id;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;id);</div><div class="line">		<span class="keyword">if</span>(id==<span class="number">1</span>) &#123;</div><div class="line">			<span class="keyword">int</span> l,r,k;</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;l,&amp;r,&amp;k);</div><div class="line">			modify(l,k);</div><div class="line">			modify(r+<span class="number">1</span>,-k);</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			<span class="keyword">int</span> pos;</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;pos);</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,query(pos));</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><h2 id="ST表"><a href="#ST表" class="headerlink" title="ST表"></a>ST表</h2><strong>给定一个数列a，O(nlogn)预处理，O(1)查询数列在区间[l,r]的最值。<br>这里介绍求最大值。</strong><br><img src="http://upload-images.jianshu.io/upload_images/8471136-88a802b5e342d02a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> st[N][K],a[N],log_2[N];</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">ini_st</span><span class="params">()</span></span>&#123;</div><div class="line">    log_2[<span class="number">1</span>]=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;++i)&#123;</div><div class="line">        log_2[i]=log_2[i<span class="number">-1</span>];</div><div class="line">        <span class="keyword">if</span>((<span class="number">1</span>&lt;&lt;log_2[i]+<span class="number">1</span>)==i)</div><div class="line">            ++log_2[i];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=n;i;--i)&#123;</div><div class="line">        st[i][<span class="number">0</span>]=a[i];</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;(i+(<span class="number">1</span>&lt;&lt;j)<span class="number">-1</span>)&lt;=n;++j)</div><div class="line">            st[i][j]=max(st[i][j<span class="number">-1</span>],st[i+(<span class="number">1</span>&lt;&lt;j<span class="number">-1</span>)][j<span class="number">-1</span>]);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">ask</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> k=log_2[r-l+<span class="number">1</span>];</div><div class="line">    <span class="keyword">return</span> max(st[l][k],st[r-(<span class="number">1</span>&lt;&lt;k)+<span class="number">1</span>][k]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<ul>
<li><h2 id="并查集"><a href="#并查集" class="headerlink" title="并查集"></a>并查集</h2>貌似我在图伦里写过了。</li>
<li><h3 id="带权并查集"><a href="#带权并查集" class="headerlink" title="带权并查集"></a><del>带权并查集</del></h3><hr>
</li>
<li><h2 id="hash表"><a href="#hash表" class="headerlink" title="hash表"></a>hash表</h2><strong>这个主要用于字符串hash，整理字符串的时候在写吧。</strong></li>
</ul>
<hr>
<ul>
<li><h2 id="分块"><a href="#分块" class="headerlink" title="分块"></a>分块</h2><strong>把问题分成许多（一般是根号n）块，在块中完成。时间复杂度为O（m根号n）</strong><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> belong[maxn],block,num,l[<span class="number">1000</span>],r[<span class="number">1000</span>];</div><div class="line"><span class="keyword">int</span> n,m;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">()</span> </span>&#123;</div><div class="line">	block=<span class="built_in">sqrt</span>(n);</div><div class="line">	num=block;</div><div class="line">	<span class="keyword">if</span>(n%num)num++;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</div><div class="line">		belong[i]=(i<span class="number">-1</span>)/block;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=num;i++) &#123;</div><div class="line">		l[i]=(i<span class="number">-1</span>)*block;</div><div class="line">		r[i]=i*block<span class="number">-1</span>;</div><div class="line">	&#125;</div><div class="line">	r[num]=n;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sukixj.github.io/2017/10/19/graph/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuki">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/19/graph/" itemprop="url">有趣的图论</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-10-19T17:03:22+08:00">
                2017-10-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="图的存储"><a href="#图的存储" class="headerlink" title="- 图的存储"></a>- 图的存储</h1><ul>
<li><h2 id="邻接矩阵"><a href="#邻接矩阵" class="headerlink" title="邻接矩阵"></a>邻接矩阵</h2><p><strong>map[i][j] 表示第 i 个点与第 j 个点连有一条边，如有权值就把矩阵内元素的值赋成权值。空间复杂度O（n<sup>2</sup>），时间复杂度O（n<sup>2</sup>）</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> Adjacency <span class="title">matrix</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">		<span class="keyword">int</span> u,v,c;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;u,&amp;v,&amp;c);</div><div class="line">		<span class="built_in">map</span>[u][v]=c;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++) &#123;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><h2 id="邻接表"><a href="#邻接表" class="headerlink" title="邻接表"></a>邻接表</h2><p><strong>使用vector存储，开n个vector，每个代表一个节点，它后面的数就是这个节点能连向哪个节点。空间复杂度会因为不会扫到没有用的边而降到O（m）</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> Adjacency <span class="title">list</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; ve[MAXN];</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">		<span class="keyword">int</span> u,v,c;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;u,&amp;v,&amp;c);</div><div class="line">		ve[u].push_back(v);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=ve[i].size();j++) &#123;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><h2 id="边表（前向星）"><a href="#边表（前向星）" class="headerlink" title="边表（前向星）"></a>边表（前向星）</h2><p><strong>边表是图的一种存储结构，用来描述图上的每一个点。对图的每个边进行编号，对图的每个顶点建立一个链表（n个顶点建立n个链表），第i个容器中的结点包含以顶点Vi为起点的所有边的编号。<br>边表与邻接表的区别：边表存储了以点为起点的边的信息，邻接表存储了以点为出发点的点的信息。</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">struct</span> Edge &#123;</div><div class="line">    <span class="keyword">int</span> nxt,to,cost;</div><div class="line">&#125;e[MAXN];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> w)</span> </span>&#123;</div><div class="line">    num++;</div><div class="line">    e[num].to=v;</div><div class="line">    e[num].cost=w;</div><div class="line">    e[num].nxt=head[u];</div><div class="line">    head[u]=num;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">        <span class="keyword">int</span> u,v,w;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;u,&amp;v,&amp;w);</div><div class="line">        insert(u,v,w);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=head[u];i;i=e[i].nxt) &#123;</div><div class="line"></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h1 id="最短路问题"><a href="#最短路问题" class="headerlink" title="- 最短路问题"></a>- 最短路问题</h1><ul>
<li><h2 id="Dijkstra"><a href="#Dijkstra" class="headerlink" title="Dijkstra"></a>Dijkstra</h2>迪杰斯特拉算法是由荷兰计算机科学家<a href="https://baike.baidu.com/item/%E7%8B%84%E5%85%8B%E6%96%AF%E7%89%B9%E6%8B%89" target="_blank" rel="external">Dijkstra</a>于1959 年提出的，因此又叫<a href="https://baike.baidu.com/item/%E7%8B%84%E5%85%8B%E6%96%AF%E7%89%B9%E6%8B%89%E7%AE%97%E6%B3%95" target="_blank" rel="external">Dijkstra算法</a>。是从一个顶点到其余各顶点的<a href="https://baike.baidu.com/item/%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84" target="_blank" rel="external">最短路径</a>算法，解决的是有向图中最短路径问题。迪杰斯特拉算法主要特点是以起始点为中心向外层层扩展，直到扩展到终点为止。<br><strong>时间复杂度为O（n<sup>2</sup>），不能处理存在负边权的情况，求单源最短路</strong>。</li>
<li><h4 id="算法实现："><a href="#算法实现：" class="headerlink" title="算法实现："></a>算法实现：</h4><p><strong>每次找到一个能到达的最近的点，来更新到达其他点的距离。</strong>如图：<br><img src="https://i.loli.net/2017/10/18/59e73e7036d19.gif" alt=""></p>
<p> 设起点为s，dis[v]表示从s到v的最短路径，pre[v]为v的前驱节点，用来输出路径。</p>
<pre><code>初始化：dis[v]=∞(v≠s); dis[s]=0; pre[s]=0; 
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">for (i = 1; i &lt;= n ; i++)</div><div class="line">          1.在没有被访问过的点中找一个顶点u使得dis[u]是最小的。</div><div class="line">          2.u标记为已确定最短路径</div><div class="line">          3.for 与u相连的每个未确定最短路径的顶点v</div><div class="line">            if  (dis[u]+w[u][v] &lt; dis[v])  &#123;</div><div class="line">                dis[v] = dis[u] + w[u][v];</div><div class="line">                pre[v] = u;</div><div class="line">             &#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p> 算法结束：dis[v]为s到v的最短距离；pre[v]为v的前驱节点，用来输出路径。</p>
<ul>
<li><h4 id="代码实现："><a href="#代码实现：" class="headerlink" title="代码实现："></a>代码实现：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> <span class="keyword">int</span>  MAXINT = <span class="number">32767</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXNUM = <span class="number">10</span>;</div><div class="line"><span class="keyword">int</span> dist[MAXNUM];</div><div class="line"><span class="keyword">int</span> prev[MAXNUM];</div><div class="line"></div><div class="line"><span class="keyword">int</span> A[MAXUNM][MAXNUM];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dijkstra</span><span class="params">(<span class="keyword">int</span> v0)</span> </span>&#123;</div><div class="line">	<span class="keyword">bool</span> S[MAXNUM];                                  <span class="comment">// 判断是否已存入该点到S集合中</span></div><div class="line">	<span class="keyword">int</span> n=MAXNUM;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</div><div class="line">		dist[i] = A[v0][i];</div><div class="line">		S[i] = <span class="literal">false</span>;                                <span class="comment">// 初始都未用过该点</span></div><div class="line">		<span class="keyword">if</span>(dist[i] == MAXINT)</div><div class="line">			prev[i] = <span class="number">-1</span>;</div><div class="line">		<span class="keyword">else</span></div><div class="line">			prev[i] = v0;</div><div class="line">		　　</div><div class="line">	&#125;</div><div class="line">	dist[v0] = <span class="number">0</span>;</div><div class="line">	S[v0] = <span class="literal">true</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;=n; i++) &#123;</div><div class="line">		<span class="keyword">int</span> mindist = MAXINT;</div><div class="line">		<span class="keyword">int</span> u = v0;             </div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; ++j)						<span class="comment">// 找出当前未使用的点j的dist[j]最小值</span></div><div class="line">	        <span class="keyword">if</span>((!S[j]) &amp;&amp; dist[j]&lt;mindist) &#123;</div><div class="line">		        u = j;                              <span class="comment">// u保存当前邻接点中距离最小的点的号码</span></div><div class="line">				mindist = dist[j];		　　</div><div class="line">			&#125;</div><div class="line">		S[u] = <span class="literal">true</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; j++)</div><div class="line">			<span class="keyword">if</span>((!S[j]) &amp;&amp; A[u][j]&lt;MAXINT) &#123;</div><div class="line">				<span class="keyword">if</span>(dist[u] + A[u][j] &lt; dist[j]) &#123;   <span class="comment">//在通过新加入的u点路径找到离v0点更短的路径</span></div><div class="line">				    dist[j] = dist[u] + A[u][j];    <span class="comment">//更新dist</span></div><div class="line">					prev[j] = u;                    <span class="comment">//记录前驱顶点	　　</span></div><div class="line">				&#125;	　    　</div><div class="line">			&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><h2 id="Floyd"><a href="#Floyd" class="headerlink" title="Floyd"></a>Floyd</h2><p>Floyd算法又称为插点法，是一种利用<a href="https://baike.baidu.com/item/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92" target="_blank" rel="external">动态规划</a>的思想寻找给定的<a href="https://baike.baidu.com/item/%E5%8A%A0%E6%9D%83%E5%9B%BE" target="_blank" rel="external">加权图</a>中多源点之间<a href="https://baike.baidu.com/item/%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84" target="_blank" rel="external">最短路径</a>的算法，与Dijkstra算法类似。该算法名称以创始人之一、1978年<a href="https://baike.baidu.com/item/%E5%9B%BE%E7%81%B5%E5%A5%96" target="_blank" rel="external">图灵奖</a>获得者、斯坦福大学计算机科学系教授<a href="https://baike.baidu.com/item/%E7%BD%97%E4%BC%AF%E7%89%B9%C2%B7%E5%BC%97%E6%B4%9B%E4%BC%8A%E5%BE%B7" target="_blank" rel="external">Robert W·Floyd</a>命名。<br><strong>时间复杂度O（n<sup>3</sup>）,可以处理所有图，多源最短路。</strong></p>
<h4 id="算法实现：-1"><a href="#算法实现：-1" class="headerlink" title="算法实现："></a>算法实现：</h4><p><strong>假设有三个点 i,j,k，i连向 j，i 连向 k，k 连向 j，i 到 j 的最短路就是 i 到 j 的路径和 i 到 k 的路径加 k 到 j 的路径和较短的那个。</strong></p>
<h4 id="代码实现：-1"><a href="#代码实现：-1" class="headerlink" title="代码实现："></a>代码实现：</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">floyd</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">memset</span>(dist,<span class="number">0x3f</span>,<span class="keyword">sizeof</span>(dist));</div><div class="line">	<span class="built_in">memset</span>(<span class="built_in">map</span>,<span class="number">0x3f</span>,<span class="keyword">sizeof</span>(<span class="built_in">map</span>));</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=n;k++) </div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++) &#123;</div><div class="line">		dist[i][j]=min(<span class="built_in">map</span>[i][j],<span class="built_in">map</span>[i][k]+<span class="built_in">map</span>[k][j]);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><h2 id="SPFA"><a href="#SPFA" class="headerlink" title="SPFA"></a>SPFA</h2><p>SPFA（Shortest Path Faster Algorithm）（队列优化）算法是求单源<a href="https://baike.baidu.com/item/%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84" target="_blank" rel="external">最短路径</a>的一种算法，它还有一个重要的功能是判负环（在差分约束系统中会得以体现），在<a href="https://baike.baidu.com/item/Bellman-ford" target="_blank" rel="external">Bellman-ford</a>算法的基础上加上一个队列优化，减少了冗余的<a href="https://baike.baidu.com/item/%E6%9D%BE%E5%BC%9B%E6%93%8D%E4%BD%9C" target="_blank" rel="external">松弛操作</a>，是一种高效的最短路算法。<br><strong>期望时间复杂度O（ME）其中M为所有顶点进队的平均次数，可以证明M一般小于等于2n：</strong> <em>“算法编程后实际运算情况表明m一般没有超过2n.事实上顶点入队次数M是一个不容易事先分析出来的数,但它确是一个随图的不同而略有不同的常数.所谓常数,就是与E无关,与n也无关,仅与边的权值分布有关.一旦图确定,权值确定,原点确定,E就是一个确定的常数.所以SPFA算法复杂度为O(E).证毕”（SPFA的论文）。</em> <strong>不过这个证明好像是错误的，所以SPFA的复杂度纯粹看脸，一般还是比较快的。<del>出题人我给你糖吃。</del></strong><br><strong>单源最短路，不过可以处理有负边权的情况，但是无法处理负环图，可判断负环。（如果某个点进入队列的次数超过N次则存在负环，一般用dfs判断）</strong></p>
</li>
<li><h4 id="算法实现：-2"><a href="#算法实现：-2" class="headerlink" title="算法实现："></a>算法实现：</h4><p>我们采取的方法是动态逼近法：设立一个先进先出的队列用来保存待优化的结点，优化时每次取出队首结点u，并且用u点当前的最短路径估计值对离开u点所指向的结点v进行松弛操作，如果v点的最短路径估计值有所调整，且v点不在当前的队列中，就将v点放入队尾。这样不断从队列中取出结点来进行松弛操作，直至队列空为止。</p>
</li>
</ul>
<p>优化：<br>SPFA算法有两个优化策略SLF和LLL——SLF：Small Label First 策略，设要加入的节点是j，队首元素为i，若dist(j)<dist(i)，则将j插入队首，否则插入队尾； lll：large="" label="" last="" 策略，设队首元素为i，队列中所有dist值的平均值为x，若dist(i)="">x则将i插入到队尾，查找下一元素，直到找到某一i使得dist(i)&lt;=x，则将i出队进行松弛操作。 SLF 可使速度提高 15 ~ 20%；SLF + LLL 可提高约 50%。</dist(i)，则将j插入队首，否则插入队尾；></p>
<ul>
<li><h4 id="代码实现：-2"><a href="#代码实现：-2" class="headerlink" title="代码实现："></a>代码实现：</h4></li>
<li><p>判断负环：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">spfa_dfs</span><span class="params">(<span class="keyword">int</span> u)</span> </span>&#123;</div><div class="line">	vis[u]=<span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> k=f[u]; k!=<span class="number">0</span>; k=e[k].next) &#123;</div><div class="line">		<span class="keyword">int</span> v=e[k].v,w=e[k].w;</div><div class="line">		<span class="keyword">if</span>(dis[u]+w&lt;dis[v]) &#123;</div><div class="line">			dis[v]=dis[u]+w;</div><div class="line">			<span class="keyword">if</span>(!vis[v]) &#123;</div><div class="line">				<span class="keyword">if</span>(spfa_dfs(v))</div><div class="line">					<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">			&#125; <span class="keyword">else</span></div><div class="line">				<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	vis[u]=<span class="number">0</span>;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>一般SPFA：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">spfa</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">10010</span>;i++)dist[i]=<span class="number">2147483647</span>;</div><div class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</div><div class="line">    dist[s]=<span class="number">0</span>;</div><div class="line">    vis[s]=<span class="number">1</span>;</div><div class="line">    q.push(s);</div><div class="line">    <span class="keyword">while</span>(!q.empty()) &#123;</div><div class="line">        <span class="keyword">int</span> u=q.front();</div><div class="line">        q.pop();</div><div class="line">        vis[u]=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=head[u];i;i=e[i].next) &#123;</div><div class="line">            <span class="keyword">int</span> to=e[i].to;</div><div class="line">            <span class="keyword">if</span>(dist[to]&gt;dist[u]+e[i].cost) &#123;</div><div class="line">                dist[to]=dist[u]+e[i].cost;</div><div class="line">                <span class="keyword">if</span>(!vis[to]) &#123;</div><div class="line">                    vis[to]=<span class="number">1</span>;</div><div class="line">                    q.push(to);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>SLF优化：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">spfa</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</div><div class="line">    fill(dis,dis+n+<span class="number">1</span>,<span class="number">2147483647</span>);</div><div class="line">    <span class="built_in">deque</span> &lt;<span class="keyword">int</span>&gt; q;</div><div class="line">    dis[s]=<span class="number">0</span>;</div><div class="line">    vis[s]=<span class="number">1</span>;</div><div class="line">    q.push_back(s);</div><div class="line">    <span class="keyword">while</span>(!q.empty()) &#123;</div><div class="line">        <span class="keyword">int</span> u=q.front();</div><div class="line">        q.pop_front();</div><div class="line">        vis[u]=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=head[u];i;i=e[i].nxt) &#123;</div><div class="line">            <span class="keyword">int</span> to=e[i].to;</div><div class="line">            <span class="keyword">if</span>(dis[to]&gt;dis[u]+e[i].cost) &#123;</div><div class="line">                dis[to]=dis[u]+e[i].cost;</div><div class="line">                <span class="keyword">if</span>(!vis[to]) &#123;</div><div class="line">                    vis[to]=<span class="number">1</span>;</div><div class="line">                    <span class="keyword">if</span>(!q.empty() &amp;&amp; dis[to]&lt;dis[q.front()]) q.push_front(to);</div><div class="line">                    <span class="keyword">else</span> q.push_back(to);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>SLF + LLL优化:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">spfa</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</div><div class="line">    fill(dis,dis+n+<span class="number">1</span>,<span class="number">2147483647</span>);</div><div class="line">    <span class="built_in">deque</span> &lt;<span class="keyword">int</span>&gt; q;</div><div class="line">    <span class="keyword">int</span> tot=<span class="number">1</span>,sum=<span class="number">0</span>;</div><div class="line">    dis[s]=<span class="number">0</span>;</div><div class="line">    vis[s]=<span class="number">1</span>;</div><div class="line">    q.push_back(s);</div><div class="line">    <span class="keyword">while</span>(!q.empty()) &#123;</div><div class="line">        <span class="keyword">int</span> u=q.front();</div><div class="line">        q.pop_front();</div><div class="line">        <span class="keyword">if</span>(dis[u]*tot&gt;sum) &#123;</div><div class="line">            q.push_back(u);</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        &#125;</div><div class="line">        tot--;</div><div class="line">        sum-=dis[u];</div><div class="line">        vis[u]=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=head[u];i;i=e[i].nxt) &#123;</div><div class="line">            <span class="keyword">int</span> to=e[i].to;</div><div class="line">            <span class="keyword">if</span>(dis[to]&gt;dis[u]+e[i].cost) &#123;</div><div class="line">                dis[to]=dis[u]+e[i].cost;</div><div class="line">                <span class="keyword">if</span>(!vis[to]) &#123;</div><div class="line">                    vis[to]=<span class="number">1</span>;</div><div class="line">                    tot++;</div><div class="line">                    sum+=dis[to];</div><div class="line">                    <span class="keyword">if</span>(!q.empty() &amp;&amp; dis[to]&lt;dis[q.front()]) q.push_front(to);</div><div class="line">                    <span class="keyword">else</span> q.push_back(to);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h1 id="拓扑排序"><a href="#拓扑排序" class="headerlink" title="- 拓扑排序"></a>- 拓扑排序</h1><p><strong>如果存在一个排列a1,a2,…,an，使得在该图中不存在ai到aj的路径(i&gt;j)，我们称这个排列为这个图的拓扑序列。我们每次寻找入度为 0 的点加入序列中。并将当前点连接的所有边均删除，更新其它点的度数。由于每条边至多被删除一次。因此这个时间复杂度是 O(|E|) 的。</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">topsort</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="keyword">if</span>(du[i]==<span class="number">0</span>) q.push(i);</div><div class="line">	<span class="keyword">while</span>(!q.empty()) &#123;</div><div class="line">		now=q.front();</div><div class="line">		q.pop();</div><div class="line">		k++;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=p[now]; i!=<span class="number">-1</span>; i=e[i].next) &#123;</div><div class="line">			go=e[i].to;</div><div class="line">			du[go]--;</div><div class="line">			<span class="keyword">if</span>(du[go]==<span class="number">0</span>)</div><div class="line">				q.push(go);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(k==n) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">	<span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<h1 id="并查集"><a href="#并查集" class="headerlink" title="- 并查集"></a>- 并查集</h1><p><strong>字面意思，可供合并和查找的集合。常用于判断两个点是否联通。</strong></p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-8c01c51a462df0b6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(fa[x]!=x) <span class="keyword">return</span> fa[x]=find(fa[x]);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">	fa[find(x)]=fa[find(y)];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h1 id="二分图"><a href="#二分图" class="headerlink" title="- 二分图"></a>- 二分图</h1><p><strong>如果一个无向图G中V能分成两个点集A与B，且位于A中的顶点互相之间没有边，位于B中的顶点互相之间没有边，则称这个图为二分图。</strong></p>
<ul>
<li>##二分图染色（判断是否为二分图）</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; v[N];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></div><div class="line">&#123;</div><div class="line">  col[x]=y;</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;v[x].size(); i++)</div><div class="line">  &#123;</div><div class="line">     <span class="keyword">if</span> (!col[v[x][i]]) dfs(v[x][i],<span class="number">3</span>-y);</div><div class="line">     <span class="keyword">if</span> (col[v[x][i]]==col[x]) FLAG=<span class="literal">true</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">color</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=n; i++) col[i]=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=n; i++) <span class="keyword">if</span> (!col[i]) dfs(i,<span class="number">1</span>);</div><div class="line">	<span class="keyword">if</span> (FLAG) <span class="built_in">cout</span>&lt;&lt;<span class="string">"NO"</span>; <span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="string">"YES"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>col[i]=1  i这个点染成黑色  col[i]=2  i这个点染成白色  col[i]=0  i这个点还未被染色</p>
<ul>
<li><h4 id="裂点"><a href="#裂点" class="headerlink" title="裂点"></a>裂点</h4><strong>首先明确：二分图不存在奇环。</strong></li>
</ul>
<p><strong>将每个点A裂成两个点A与A’。<br>若A与B之间存在边，则连一条A与B’的边，A’与B的边。<br>若此时A与A’连通，或者B与B’连通，则该图不是二分图。（若连通则必然出现了奇环）</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> f[k]==k?f[k]:f[k]=find(f[k]);</div><div class="line">&#125;</div><div class="line"><span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=n; i++) p[i][<span class="number">0</span>]=++cnt,p[i][<span class="number">1</span>]=++cnt;</div><div class="line"><span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=cnt; i++) f[i]=i;</div><div class="line"><span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=m; i++) &#123;</div><div class="line">	<span class="comment">// u-v</span></div><div class="line">	f[find(p[u][<span class="number">0</span>])]=find(p[v][<span class="number">1</span>]);</div><div class="line">	f[find(p[u][<span class="number">1</span>])]=find(p[v][<span class="number">0</span>]);</div><div class="line">	<span class="keyword">if</span> (find(p[u][<span class="number">0</span>])==find(p[u][<span class="number">1</span>]) || find(p[v][<span class="number">0</span>])==find(p[v][<span class="number">1</span>])) FLAG=<span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">if</span> (FLAG) <span class="built_in">puts</span>(<span class="string">"NO"</span>);</div><div class="line"><span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">"YES"</span>);</div></pre></td></tr></table></figure></p>
<ul>
<li><h2 id="二分图最大匹配"><a href="#二分图最大匹配" class="headerlink" title="二分图最大匹配"></a>二分图最大匹配</h2></li>
<li><h3 id="匈牙利算法"><a href="#匈牙利算法" class="headerlink" title="匈牙利算法"></a>匈牙利算法</h3><strong>顾名思义，在一个二分图中选择最多的边，使得没有任何一个点有连接它的两条边被选择到。</strong></li>
</ul>
<p>有四个男生，四个女生，每个男生都对几个女生有好感，我们的目标是满足尽量多的男生的要求。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-2ea1d0ed2ecfaa24.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>先给1号男生找女生，找到了女1号。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-34c0ab6d258f946c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>给2号男生找女生，找到了女2号。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-2769e3665a4ca6f8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>给3号男生找女生，找到女1号，先抢了试试。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-37adb9e9795865e2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>1号男生没了女生，找下一个，找到女2号，抢了！</p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-8a39271334f6870f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>2号男生没了女生，找到了女3号！</p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-acdc4abe4fbc20a0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>给4号男生找女生，发现无论如何也做不到不拆散别人的情况下给他分配一个女生了。</p>
<p><strong>用递归实现上述过程。</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> now)</span> </span>&#123;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>; a&lt;=m; a++)</div><div class="line">		<span class="keyword">if</span> (match[now][a] &amp;&amp; !use[a]) &#123;</div><div class="line">			use[a]=<span class="literal">true</span>;</div><div class="line">			<span class="keyword">if</span> (!result[a] || dfs(result[a])) &#123;</div><div class="line">				result[a]=now;</div><div class="line">				<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">xiongyali</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>; a&lt;=n; a++) &#123;</div><div class="line">		<span class="built_in">memset</span>(use,<span class="literal">false</span>,<span class="keyword">sizeof</span>(use));</div><div class="line">		<span class="keyword">if</span> (dfs(a)) ans++;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>如果让你求一个答案答案一定在 ans , n - ans , m - ans , n + m - ans 之中。</strong></p>
<hr>
<h1 id="最小生成树"><a href="#最小生成树" class="headerlink" title="- 最小生成树"></a>- 最小生成树</h1><p><strong>一个有 n 个结点的连通图的生成树是原图的极小连通子图，且包含原图中的所有 n 个结点，并且有保持图连通的最少的边。</strong></p>
<ul>
<li>##Kruskal<br><strong>思想：贪心的去寻找最短的边，然后用并查集维护。</strong><br><strong>稀疏图Kruskal跑的飞快，时间复杂度大约O（nlogn）</strong><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">comp</span><span class="params">(E a,E b)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> a.v&lt;b.v;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(fa[x]!=x) <span class="keyword">return</span> fa[x]=find(fa[x]);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">	fa[find(x)]=fa[find(y)];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Kruskal</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) fa[i]=i;</div><div class="line">	sort(e+<span class="number">1</span>,e+<span class="number">1</span>+m,comp);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,k=<span class="number">0</span>;i&lt;=m;i++) &#123;</div><div class="line">		<span class="keyword">if</span>(find(e[i].x) != find(e[i].y)) &#123;</div><div class="line">			merge(e[i].x,e[i].y);</div><div class="line">			k++;</div><div class="line">			tot+=e[i].v;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(k == n<span class="number">-1</span>) &#123;</div><div class="line">			<span class="built_in">cout</span>&lt;&lt;tot;</div><div class="line">			<span class="keyword">return</span> ;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">cout</span>&lt;&lt;<span class="string">"orz"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h1 id="强连通分量"><a href="#强连通分量" class="headerlink" title="- 强连通分量"></a>- 强连通分量</h1><p><strong>简单来说强联通分量就是同一个图中能够互相联通的几个点。可以实现图的缩点。</strong></p>
<ul>
<li><h2 id="Tarjan"><a href="#Tarjan" class="headerlink" title="Tarjan"></a>Tarjan</h2><strong>思想：以DFS为基础，我们定义DFN[x]为搜索到x时的时间戳（即搜索到的时间）。LOW[x]为搜索树中x以及它的子孙可以访问到的最早祖先。有LOW[x]=min(DFN[x],DFN[j],LOW[k])，其中存在边(x,j)，(x,k)，j为x的祖先，k为x的子孙。令v[i]表示i是否已被搜索过以及是否找到了极大强连通分量。若i已经找到了极大强连通分量或者还未被搜索过，则v[i]=0，否则v[i]=1。</strong></li>
</ul>
<p><strong>①找到一个未被搜索过的节点u，若不存在，退出，否则以这个节点为根开始建立搜索树。</strong></p>
<p><strong>②给该节点建立时间戳，将x压入栈中，枚举该节点的所有儿子x，若其儿子没被访问过，则搜索其儿子（重复②），之后更新LOW[u]=min(LOW[u],LOW[x])，否则若v[x]=1(表示x是u的祖先)，则更新LOW[u]=min(LOW[u],DFN[x])。</strong></p>
<p><strong>③对u搜索完毕后，若LOW[u]=DFN[u]，则找到了一个极大强连通分量，栈顶到u都为一个极大强连通分量。更新v与栈。</strong></p>
<ul>
<li><h3 id="代码实现：-3"><a href="#代码实现：-3" class="headerlink" title="代码实现："></a>代码实现：</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	DFN[x]=++Time;</div><div class="line">	LOW[x]=DFN[x];</div><div class="line">	st[++r]=x;</div><div class="line">	<span class="keyword">int</span> R=r;</div><div class="line">	V[x]=<span class="literal">true</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;v[x].size(); i++)</div><div class="line">		<span class="keyword">if</span> (v[x][i]!=fa[x]) &#123;</div><div class="line">			fa[v[x][i]]=x;</div><div class="line">			<span class="keyword">if</span> (!DFN[v[x][i]]) &#123;</div><div class="line">				dfs(v[x][i]);</div><div class="line">				LOW[x]=min(LOW[x],LOW[v[x][i]]);</div><div class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (V[v[x][i]]) LOW[x]=min(LOW[x],DFN[v[x][i]]);</div><div class="line">		&#125;</div><div class="line">	<span class="keyword">if</span> (LOW[x]==DFN[x]) &#123;</div><div class="line">		cnt++;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i=R; i&lt;=r; i++) &#123;</div><div class="line">			p[st[i]]=cnt;</div><div class="line">			V[st[i]]=<span class="literal">false</span>;</div><div class="line">		&#125;</div><div class="line">		r=R<span class="number">-1</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>cnt 第cnt个极大强联通分量  p[i]  i所处的是哪个极大强联通分量<br>LOW[x]==DFN[x]  已出现一个极大强联通分量</strong><br>缩点：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=m; i++)</div><div class="line">	<span class="keyword">if</span> (p[u[i]]!=p[v[i]])</div><div class="line">		merge(p[u[i]],p[v[i]]);</div></pre></td></tr></table></figure></p>
<hr>
<h1 id="最近公共祖先（LCA）"><a href="#最近公共祖先（LCA）" class="headerlink" title="- 最近公共祖先（LCA）"></a>- 最近公共祖先（LCA）</h1><p><strong>Lowest Common Ancestors，对于有根树T的两个结点u、v，最近公共祖先LCA(T,u,v)表示一个结点x，满足x是u、v的祖先且x的深度尽可能大。</strong></p>
<ul>
<li><h2 id="离线算法-Tarjan"><a href="#离线算法-Tarjan" class="headerlink" title="离线算法 Tarjan"></a>离线算法 Tarjan</h2><del>没写过。</del><br><strong>在一次遍历中把所有询问一次性解决，时间复杂度是O(n+q)。</strong><h4 id="算法流程："><a href="#算法流程：" class="headerlink" title="算法流程："></a>算法流程：</h4><strong>1.任选一个点为根节点，从根节点开始。</strong></li>
</ul>
<p><strong>2.遍历该点u所有子节点v，并标记这些子节点v已被访问过。</strong></p>
<p><strong>3.若是v还有子节点，返回2，否则下一步。</strong></p>
<p><strong>4.合并v到u上。</strong></p>
<p><strong>5.寻找与当前点u有询问关系的点v。</strong></p>
<p><strong>6.若是v已经被访问过了，则可以确认u和v的最近公共祖先为v被合并到的父亲节点a。</strong></p>
<p><strong>遍历的话需要用到dfs来遍历，至于合并，最优化的方式就是利用并查集来合并两个节点。</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">tarjan</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;tree[x].size();++i) &#123;</div><div class="line">		tarjan(tree[x][i]);</div><div class="line">		merge(x,tree[x][i]);</div><div class="line">		anc[find(x)] = x;</div><div class="line">	&#125;</div><div class="line">	vis[x] = <span class="literal">true</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;query[x].size();++i) &#123;</div><div class="line">		<span class="keyword">if</span>(vis[query[x][i]])</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"the LCA for %d and %d is %d\n"</span>, x, query[x][i], anc[find(query[x][i])]);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<ul>
<li><h2 id="在线算法-倍增"><a href="#在线算法-倍增" class="headerlink" title="在线算法 倍增"></a>在线算法 倍增</h2><p><strong>找最近公共祖先这问题很容易想到让两节点一起往上走最后相遇，但这样的dfs显然很慢，于是就需要倍增。就是用二进制的思维，以1,2,4,8等2的阶层步长接近答案，比一步一步向上要快很多。<br>所以要dfs出来点的2^k的父亲节点与该节点的深度。<br>找lca时先将下面的点升到与另一点同一深度，再用往上倍增找lca。<br>有两种大同小异的方法：一种是以上一步2倍长的步伐向上试，不行再缩减，找到一个离lca能达到的最近点。另一种是先求出最大深度是2的几次方，再以当前最大步伐向上走。</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(deep[x]&gt;deep[y]) swap(x,y);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">20</span>; i&gt;=<span class="number">0</span>; i--) &#123;</div><div class="line">		<span class="keyword">if</span>(deep[fa[y][i]]&gt;=deep[x]) y=fa[y][i];   </div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(x==y)<span class="keyword">return</span> x;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">20</span>; i&gt;=<span class="number">0</span>; i--) &#123;</div><div class="line">		<span class="keyword">if</span>(fa[x][i]!=fa[y][i]) &#123;</div><div class="line">			x=fa[x][i],y=fa[y][i];   </div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> fa[x][<span class="number">0</span>];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	deep[x]=deep[fa[x][<span class="number">0</span>]]+<span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; fa[x][i]; i++)</div><div class="line">		fa[x][i+<span class="number">1</span>]=fa[fa[x][i]][i];</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;vec[x].size(); i++)</div><div class="line">		<span class="keyword">if</span>(!deep[vec[x][i]]) &#123;</div><div class="line">			fa[vec[x][i]][<span class="number">0</span>]=x;   </div><div class="line">			dfs(vec[x][i]);</div><div class="line">		&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><h2 id="树剖"><a href="#树剖" class="headerlink" title="树剖"></a>树剖</h2><p><strong>size[x]为以x为结点的子树的结点的个数 每个结点和它的儿子之间只有一条重边，这个重边连向它的儿子中size最大的那个儿子。<br>如果结点u和它的儿子v之间是一条轻边，那么size[v]*2&lt;size[u]。<br>top[i]记录i结点所在链的链头，如果top[u]!=top[v]说明u v不在一条链上 将 u=fa[u]，重复上述操作；当它们在一条链上时，深度较小的那个点为他们的lca。</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	size[x]=<span class="number">1</span>;</div><div class="line">	deep[x]=deep[fa[x]]+<span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;vec[x].size(); i++) &#123;</div><div class="line">		<span class="keyword">if</span>(fa[x]!=vec[x][i]) &#123;</div><div class="line">			fa[vec[x][i]]=x;</div><div class="line">			dfs(vec[x][i]);</div><div class="line">			size[x]+=size[vec[x][i]];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Get_heavy_edge</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> s=<span class="number">0</span>;</div><div class="line">	<span class="keyword">if</span>(!top[x]) top[x]=x;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;vec[x].size(); i++) &#123;</div><div class="line">		<span class="keyword">if</span>(fa[x]!=vec[x][i]&amp;&amp;size[vec[x][i]]&gt;size[s])s=vec[x][i];</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(s) &#123;</div><div class="line">		top[s]=top[x];</div><div class="line">		Get_heavy_edge(s);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;vec[x].size(); i++) &#123;</div><div class="line">		<span class="keyword">if</span>(fa[x]!=vec[x][i]&amp;&amp;vec[x][i]!=s) Get_heavy_edge(vec[x][i]);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">	<span class="keyword">for</span>(; top[x]!=top[y];) &#123;</div><div class="line">		<span class="keyword">if</span>(deep[top[x]]&lt;deep[top[y]]) swap(x,y);</div><div class="line">		x=fa[top[x]];</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(deep[x]&gt;deep[y]) swap(x,y);</div><div class="line">	<span class="keyword">return</span> x;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sukixj.github.io/2017/10/15/re/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuki">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/15/re/" itemprop="url">Re:从零开始的blog</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-10-15T13:27:02+08:00">
                2017-10-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>花了一上午的时间，终于弄明白了怎么用hexo搭建博客，现在记录下来，以供以后参考。</p>
<h2 id="一、注册github账号"><a href="#一、注册github账号" class="headerlink" title="一、注册github账号"></a>一、注册github账号</h2><h3 id="1、官网注册"><a href="#1、官网注册" class="headerlink" title="1、官网注册"></a>1、<a href="https://github.com/" target="_blank" rel="external">官网</a>注册</h3><p><img src="http://upload-images.jianshu.io/upload_images/8471136-c3b54273bedd00ab.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<p><strong>上面三栏分别填入用户名，邮箱和密码。（这三个东西对于后面的使用是非常重要的，最好能记住）。</strong></p>
<h3 id="2、创建仓库"><a href="#2、创建仓库" class="headerlink" title="2、创建仓库"></a>2、创建仓库</h3><p>现在我们登陆github，单击头像右边的加号，点击repository。<br><img src="http://upload-images.jianshu.io/upload_images/8471136-6e85ce553d081233.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<p>然后在repository name中输入<code>github用户名.github.io</code> ，点击<code>create repository</code>。<br><del>因为我已经创造好了所以他是红的，第一次弄的应该是原谅色的</del></p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-4ea09f21ac90cc61.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<p>之后我们先把github一放，来看看下一步。</p>
<h2 id="二、安装所需环境"><a href="#二、安装所需环境" class="headerlink" title="二、安装所需环境"></a>二、安装所需环境</h2><p>我们需要两个东西，一个是<strong>node.js</strong>，另一个是<strong>git</strong>。 <del>请自行百度搜索下载</del> 下载完成安装时一路next就好了。</p>
<p>我们之后的大部分工作都是在我们安装的<strong>git</strong>中的<strong>git bash</strong>进行的（我们把它称之为<strong>终端（Terminal）</strong>）。</p>
<p>那我们现在就来使用一下这个<strong>终端</strong>：</p>
<h3 id="1、生成添加秘钥"><a href="#1、生成添加秘钥" class="headerlink" title="1、生成添加秘钥"></a>1、生成添加秘钥</h3><p>在终端输入 <code>$ ssh-keygen -t rsa -C &quot;Github的注册邮箱地址&quot;</code> （注意：<strong>有引号</strong>） 然后他会让你输入一些东西，我们不用管他，直接一直enter，待秘钥生成完毕，会得到两个文件<strong>id_rsa</strong>和<strong>id_rsa.pub</strong>，他会提示文件所在的目录，用带格式的记事本打开<strong>id_rsa.pub</strong>，ctrl + a ctrl + c复制里面的所有内容，带着他们再回到我们的github，再单击你的头像，点击下面的<strong>settings</strong><br><img src="http://upload-images.jianshu.io/upload_images/8471136-fc1a4290098f3f17.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"><br>左边找到<strong>SSH and GPG keys</strong>，再点击<strong>New SSH key</strong><br><img src="http://upload-images.jianshu.io/upload_images/8471136-be8a6be8413c74a0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"><br>Title随便填，下面的<strong>Key</strong>就直接ctrl + v 把我们复制的东西统统粘贴进去，再点击<strong>Add SSH key</strong>就完成了。</p>
<p><strong>git bash</strong>中输入命令<code>$ssh -T git@github.com</code>，选yes，等待片刻可看到成功提示。</p>
<h3 id="2、安装hexo"><a href="#2、安装hexo" class="headerlink" title="2、安装hexo"></a>2、安装hexo</h3><p>接下来我们所有的操作都在终端进行。</p>
<ul>
<li><p><strong>新建一个你自己的hexo文件夹</strong><br>文件夹我们就按照常规的方法新建就好了，建好后在终端上输入<br><code>$ cd 文件夹的路径</code><br>注意：<strong>这里的文件夹的路径是不加引号的</strong><br>这样我们就在git上成功定位了它工作的位置。<br><strong>强调</strong>：强烈建议<strong>不要</strong>选择需要管理员权限才能创建文件（夹）的文件夹。</p>
</li>
<li><p><strong>在此文件夹下安装hexo</strong><br><code>$ npm install -g hexo-cli</code><br>或者<br><code>$ npm install -g hexo</code><br>运行完这条语句再在终端输入<br><code>$ hexo</code></p>
</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-4374634b8dadadb2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"><br>如果显示为这样就说明已经安装好了。</p>
<ul>
<li><p><strong>初始化博客</strong><br><code>$ hexo init folder</code><br>folder为文件夹的路径<br><code>$ cd folder</code><br>进入博客文件夹，<folder>为文件夹的路径<br><code>$ npm install</code><br>node.js的命令，根据博客既定的dependencies配置安装所有的依赖包</folder></p>
<p>初始化博客后 我们的文件夹中的文件是这样的：</p>
</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-29cd98ef169ae52a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<ul>
<li>配置个人信息<br>基于上一步，我们对博客修改相应的配置，我们用到<strong>_config.yml</strong>文件，用记事本打开，我们会看到一大堆东西，但我们只需要修改其中的一部分就好了：</li>
</ul>
<p><strong>1. 修改网站相关信息</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">title: # The title of your website  # 网站标题</div><div class="line">subtitle: # The subtitle of your website  # 子标题</div><div class="line">description: # The description of your website  # 网站的描述</div><div class="line">author: # Your name  # 你的名字</div><div class="line">language: zh-CN  # 中文</div><div class="line">timezone: Asia/Shanghai  # 上海时间</div></pre></td></tr></table></figure></p>
<p><strong>language</strong>和<strong>timezone</strong>都是有输入规范的，详细可参考<a href="https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes" target="_blank" rel="external">语言规范</a>和<a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" target="_blank" rel="external">时区规范</a>。<br><strong>注意</strong>：每一项的填写，其后面都要保留一个空格，下同。</p>
<p><strong>2. 配置统一资源定位符（个人域名）</strong><br><code>url: http://yourwebsite.com</code></p>
<p>对于root（根目录）、permalink（永久链接）、permalink_defaults（默认永久链接）等其他信息保持默认。</p>
<p><strong>3. 配置部署（个人感觉最重要）</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">deploy:</div><div class="line">  type: git </div><div class="line">  repo: https://github.com/sukixj/sukixj.github.io.git </div><div class="line">  branch: master</div></pre></td></tr></table></figure></p>
<p>其中<strong>repo</strong>可以在github中你创造的仓库中找到<br><img src="http://upload-images.jianshu.io/upload_images/8471136-1a7865a5f83624cb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"><br><strong>branch</strong>是项目的分支，我们默认用主分支<strong>master</strong>。<br>执行<code>$npm install hexo-deployer-git --save</code><br>你需要为自己配置身份信息，打开命令行，然后输入：<br><code>$git config --global user.name &quot;your github name&quot;</code><br><code>$git config --global user.email &quot;your github email&quot;</code></p>
<ul>
<li>至此我们的所有配置都搞完了</li>
</ul>
<p><strong>ps：如有卡住的地方可以ctrl + c 强制退出，或者有不能继续的情况可以重新<code>$ hexo init 文件夹</code>或者<code>$ hexo clear</code>清除缓存。</strong></p>
<hr>
<h2 id="发表文章"><a href="#发表文章" class="headerlink" title="发表文章"></a>发表文章</h2><p><strong>支持文章格式为markdown（.md）</strong></p>
<p>在终端执行<br><code>$hexo n &quot;文章标题&quot; 或 $hexo new &quot;文章标题&quot;</code></p>
<p>我们可以在本地博客文件夹source-&gt;_post文件夹下看到我们新建的markdown文件，用Markdown编辑器打开文件并编辑保存。我们就可以进行本地生成博客，执行<br><code>$hexo g 或 $hexo generate</code><br>然后执行<br><code>$hexo s 或 $hexo server</code><br>就可以在浏览器进入 localhost:4000 进行本地预览</p>
<p>但是毕竟我们目前发布的只有本机看得到，怎么让其他人看到我们写的博客呢？这时候我们来看看博客的部署。</p>
<p>我们只要在生成后终端执行这样的命令即可：<br><code>$hexo d 或 hexo deploy</code><br>或者可以直接<br><code>$hexo g -d</code><br>输入你的github用户名和密码，（密码默认不显示），然后就好啦~</p>
<hr>
<h3 id="更换主题"><a href="#更换主题" class="headerlink" title="更换主题"></a>更换主题</h3><p>作为自己搭建的blog，怎么能没有一款逼格++的主题呢？<br>hexo有着各种各样的主题，均可以在<strong>github</strong>下载。<br>比如我们看上一款主题<strong><a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="external">Next</a></strong>，我们就在终端<code>cd 工作目录/themes</code>，定位到主题文件夹，再执行<br><code>$git clone https://github.com/iissnan/hexo-theme-next.git</code><br>git bash就会自动为我们下载好这款主题（其他主题同理）</p>
<p>下载完成之后我们找到主文件夹下的<strong>_config.yml</strong>，用记事本打开它，然后找到<strong>theme</strong>，把冒号后面的主题名称相应的换成我们下载的主题名称（主题名称即我们下载完主题后文件夹的名称），保存。<br><img src="http://upload-images.jianshu.io/upload_images/8471136-114d79f9d972b005.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"><strong>（此处主题应为Next）</strong></p>
<p>在更换主题这方面还有一点注意需要说：因为有的主题设置为<strong>UTF-8编码</strong>，所以我们需要根据主题来相应的更改主文件夹下的<strong>_config.yml</strong>的编码和我们需要发布的文章文件的编码（<a href="http://jingyan.baidu.com/article/9158e0006cc0dea255122876.html" target="_blank" rel="external">如何更改文件编码？</a>）（默认为ANSI），如不更改，可能会出现博客内中文乱码现象 （<del>调了半天才知道为什么</del>）。</p>
<p>保存后我们在终端执行<code>$hexo g -d</code>就好啦~~</p>
<p>可能你会不满足于主题自带的背景图片或者其他，在每个github下载页面下方都有README说明，我们可以根据它来自定义自己喜欢的元素。</p>
<hr>
<h2 id="域名绑定"><a href="#域名绑定" class="headerlink" title="域名绑定"></a>域名绑定</h2><h3 id="购买域名"><a href="#购买域名" class="headerlink" title="购买域名"></a>购买域名</h3><p>　　一个高逼格的博客怎么能够少了域名呢ovo。域名提供商有很多，像godaddy、万网等。如果是学生党的话推荐使用<strong>腾讯云</strong>“<a href="https://www.qcloud.com/act/campus" target="_blank" rel="external">1元云主机+域名</a>”计划。</p>
<h3 id="绑定域名"><a href="#绑定域名" class="headerlink" title="绑定域名"></a>绑定域名</h3><p>这里以在腾讯云购买的域名为例。</p>
<ol>
<li>进入腾讯云后台域名管理，点击解析域名</li>
<li>添加DNS记录： <img src="http://upload-images.jianshu.io/upload_images/8471136-b43ca9e2d8cb7e39.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""> <img src="http://upload-images.jianshu.io/upload_images/8471136-138efa6b4f1ad802.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""> 【注：腾讯云中DNS记录生效需要十分钟，请耐心等待】 <ol>
<li>在博客根目录里的source目录中新建CNAME文本文件（不带任何后缀！！！），然后用Notepad++编辑CNAME文件，写入你的域名，保存退出 </li>
<li>重新部署一下博客（hexo clean、hexo d -g）</li>
</ol>
</li>
<li>试试能不能通过域名访问到你的博客。</li>
</ol>
<hr>
<p>这样，我们最基础的博客就搭建完了，其实hexo还有很多扩展，<del>只是我还不会</del>，也有很多黑科技，<del>也不会</del>，这就需要我们问<strong><a href="https://www.baidu.com" target="_blank" rel="external">度娘</a></strong>了。</p>
<p>wordpress 使用php，权限更高，能搞更多东西出来。而且写东西方便，任意一台电脑、手机都可以写博客。<br>hexo相对更简洁点，不需要买服务器，很容易弄明白每个文件是干什么的，可以魔改出自己的hexo，通过各种方法实现自己的要求。需要有一定的git基础。不过使用比较折腾，需要node.js git 才能写博客，<del>虽然可以制作便携版放U盘</del>，不过还是比较麻烦不过我现在还是在用hexo，多折腾才能更多踩坑，才能提高 <del>（虽然都是在瞎搞）</del></p>
<p>END</p>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Yuki</p>
              <p class="site-description motion-element" itemprop="description">I will follow this path until the end</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">Artikel</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">Tags</span>
                
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yuki</span>

  
</div>


  <div class="powered-by">Erstellt mit  <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
