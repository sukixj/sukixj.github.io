<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="I will follow this path until the end">
<meta property="og:type" content="website">
<meta property="og:title" content="Yuki">
<meta property="og:url" content="http://sukixj.github.io/index.html">
<meta property="og:site_name" content="Yuki">
<meta property="og:description" content="I will follow this path until the end">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Yuki">
<meta name="twitter:description" content="I will follow this path until the end">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://sukixj.github.io/"/>





  <title>Yuki</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Yuki</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">It's You</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Startseite
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archiv
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sukixj.github.io/2017/11/25/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuki">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/25/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-11-25T10:07:58+08:00">
                2017-11-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://portablehexo.bitmoe.cn/hexopp/hexop.png" alt=""></p>
<blockquote>
<p><strong>本版本仅适用于Win环境</strong><br>本文关键字： <strong>Hexo绿色版</strong>，<strong>Hexo便携版</strong>，<strong>Hexo配置</strong>，<strong>Hexo</strong>，<strong>U盘</strong></p>
</blockquote>
<p><a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>是一个快速、简洁且高效的博客框架，支持 GitHub Flavored Markdown 的所有功能；具有超快生成速度，让上百个页面在几秒内瞬间完成渲染；还拥有各式各样的插件等等。</p>
<p>但是就像很多教程里面写的那样，搭建 Hexo 本地环境，需要安装 Node.js、Git 以及使用 npm 进行安装和配置。这对于毫无经验的新手来说，是一个很大的挑战。同时，由于这些环境的存在，导致如果需要更换计算机的时候，重新安装配置一个新的Hexo环境，又得花费一些功夫。</p>
<p>所以呢，锵锵，我们整合了一个 Hexo 便携版，来简化本地环境的部署。</p>
<p>####<strong>版本介绍</strong><br>那么所谓的便携版到底是什么？便携版就是将 Hexo 本地环境所需要的各种依赖环境的整合到一起，做成的不需要安装的版本。</p>
<p>本便携版（Release 1.0.0）所包含的软件如下：</p>
<blockquote>
<ul>
<li>Git: 2.7.4</li>
<li>Nodejs: 6.10.1</li>
<li>Npm: 4.4.1</li>
<li>Hexo: 3.2.2</li>
</ul>
</blockquote>
<p>为了便携的需要，不能配置固定的环境变量，所以除此之外还有相应的批处理文件，下文将详细介绍。</p>
<p>####<strong>从零开始，1分钟搭建Hexo写作环境</strong><br>说了这么多，我们这就开始教你如何在1分钟内，从零开始搭建Hexo写作环境！</p>
<p>#####1 注册一个Github帐号</p>
<p>1.1 进入<a href="https://github.com" target="_blank" rel="external">Github</a>，并在右边的3个框框中分别填写 用户名、邮箱地址、账户密码，并点击 <strong><code>Sign up for Github</code></strong>;</p>
<p><img src="https://portablehexo.bitmoe.cn/hexopp/hexop2.png" alt="图1.1.1"></p>
<p>1.2 进入欢迎页面后，点击<strong><code>Finish sign up</code></strong>;</p>
<p><img src="https://portablehexo.bitmoe.cn/hexopp/hexop3.png" alt="图1.2.1"></p>
<p>1.3 进入到这一步之后（<strong>图1.3.1</strong>），先别记着点任何东西，查看你的邮箱，应该会收到如下的邮件（<strong>图1.3.2</strong>），确认你的邮件。否则，你会看到错误页面（<strong>图1.3.3</strong>）。query完毕之后在<strong>图1.3.1</strong>所示的页面，点击<strong><code>+ New repository</code></strong>;</p>
<p><img src="https://portablehexo.bitmoe.cn/hexopp/hexop5.png" alt="图1.3.1"></p>
<p><img src="https://portablehexo.bitmoe.cn/hexopp/hexop6.png" alt="图1.3.2"></p>
<p><img src="https://portablehexo.bitmoe.cn/hexopp/hexop7.png" alt="图1.3.3"></p>
<p>1.4 请在红框中的 <strong><code>Repository name</code></strong> 里面输入 <strong><code>用户名.github.io</code></strong> ( <strong>用户名</strong> 就是你刚刚 <strong>步骤1.1</strong> 中注册的用户名)，然后点击 <strong><code>Create repository</code></strong>;</p>
<p><img src="https://portablehexo.bitmoe.cn/hexopp/hexop8.png" alt="图1.4.1"></p>
<p>1.5 至此，Github网页注册的部分完毕</p>
<p>####2 下载HEXO Portable</p>
<p>2.1 访问我们的 <a href="https://project.bitmoe.cn/PortableHexo/" target="_blank" rel="external">HEXO Portable</a> 页面，或者 <a href="https://github.com/Bitmoe/PortableHexo" target="_blank" rel="external">Github仓库</a> 下载最新的便携版；</p>
<p>2.2 双击得到的自解压文件，解压到你需要安装博客的地方，可以选择硬盘或者U盘；</p>
<p>####3 配置你的环境</p>
<p>3.1 在你的博客的文件夹，你会发现很多批处理文件，我先介绍下各个文件的用途：</p>
<blockquote>
<ul>
<li>配置基本信息 &gt;&gt; 配置博客的基本环境</li>
<li>配置Github部署 &gt;&gt; 配置博客的部署</li>
<li>启动命令行 &gt;&gt; 启动带环境变量的Git-Bash，否则无法使用node、npm、git等命令</li>
<li>新建文章 &gt;&gt; 新建一篇文章</li>
<li>渲染并本地测试 &gt;&gt; 生成并本地预览</li>
<li>渲染并部署 &gt;&gt; 生成并部署到GitHub</li>
<li>重置配置文件 &gt;&gt; 重置_config.yml</li>
</ul>
</blockquote>
<p>3.2 我们继续进行环境配置，双击<strong><code>配置基本信息</code></strong>并按顺序输入以下信息：</p>
<blockquote>
<ul>
<li>主标题：顾名思义</li>
<li>副标题：顾名思义</li>
<li>描述：顾名思义</li>
<li>作者：顾名思义</li>
<li>网站地址：填写 <strong>用户名.github.io</strong> （此处的用户名为<strong>步骤1.1</strong>中填写的用户名）<br><strong>如果您已经购买了域名，可以参看相关的文章！</strong></li>
</ul>
</blockquote>
<p>3.3 双击<strong><code>配置Github部署</code></strong>并按顺序输入以下信息：</p>
<blockquote>
<ul>
<li>Github的用户名：此处的用户名为<strong>步骤1.1</strong>中填写的用户名</li>
<li>Github注册邮箱：此处的注册邮箱为<strong>步骤1.1</strong>中填写的注册邮箱</li>
</ul>
</blockquote>
<p>3.4 输入完毕之后，会进行测试部署，等待屏幕提示<strong>下面将进行部署测试，稍后将有一个openssh的对话框出现，请输入你的github用户密码。</strong>的时候，按回车继续；（此处的用户密码为<strong>步骤1.1</strong>中填写的用户密码）</p>
<p>3.5 然后继续等待，此时屏幕会出现n多行，耐心等待即可；</p>
<p>3.6 等待屏幕提示<strong>请访问 <a href="https://用户名.github.io" target="_blank" rel="external">https://用户名.github.io</a> 查看是否部署成功！</strong>的时候，在浏览器中输入<strong><a href="https://用户名.github.io" target="_blank" rel="external">https://用户名.github.io</a> </strong>，理论上可以看到你的Hexo站点！（此处的用户名为<strong>步骤1.1</strong>中填写的用户名）</p>
<p>3.7 至此，你的Hexo环境就配置完成了，这样你的这个Hexo博客文件夹无论移动到哪一台电脑，都能通过<strong>启动命令行</strong>出现的bash命令行，或者其余便捷的批处理文件比如<strong>新建文章</strong>、<strong>渲染并本地测试</strong>、<strong>渲染并部署</strong>进行相应的操作。</p>
<p>3.8 如果你在配置中出错，可以运行<strong>重置配置文件</strong>后，再重复<strong>3.1~3.6步骤</strong></p>
<p>####4 开始享受纯粹的Hexo写作吧！</p>
<p>####5 备注</p>
<blockquote>
<ul>
<li>本便携版以及本文均使用 <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="external">CC BY-NC-SA 4.0</a>协议；</li>
<li>本文所有权归 <a href="http://qistchan.com" target="_blank" rel="external">QistChan</a> &amp; <a href="https://wwww.bitmoe.com" target="_blank" rel="external">Bitmoe Inc.</a> 所有；</li>
<li>本便携版由 <a href="https://www.bitmoe.com" target="_blank" rel="external">Bitmoe Inc.</a> 维护并提供技术支持；</li>
<li>需要技术支持可以在<a href="https://github.com/Bitmoe/PortableHexo" target="_blank" rel="external">Github仓库</a> 提交<strong><code>Issues</code></strong>；</li>
<li>Written with <a href="https://stackedit.io/" target="_blank" rel="external">StackEdit</a>.</li>
</ul>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sukixj.github.io/2017/11/10/bz/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuki">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/10/bz/" itemprop="url">考前的板子硬邦邦</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-11-10T08:42:22+08:00">
                2017-11-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="最长公共子序列"><a href="#最长公共子序列" class="headerlink" title="最长公共子序列"></a>最长公共子序列</h2><ul>
<li><h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4>给出1-n的两个排列P1和P2，求它们的最长公共子序列。</li>
<li><h4 id="输入输出格式"><a href="#输入输出格式" class="headerlink" title="输入输出格式"></a>输入输出格式</h4></li>
</ul>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>第一行是一个数n，<br>接下来两行，每行为n个数，为自然数1-n的一个排列。</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>一个数，即最长公共子序列的长度</p>
</blockquote>
<ul>
<li><h4 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h4></li>
</ul>
<p><strong>输入样例#1：</strong></p>
<blockquote>
<p>5<br>3 2 1 4 5<br>1 2 3 4 5</p>
</blockquote>
<p><strong>输出样例#1：</strong></p>
<blockquote>
<p>3</p>
</blockquote>
<ul>
<li><h4 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h4>【数据规模】<br>对于50%的数据，n≤1000<br>对于100%的数据，n≤100000</li>
</ul>
<p><strong>转化成最长上升子序列然后 nlogn 解决。</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 1000005</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 233333333</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n,a[MAXN],b[MAXN],f[MAXN],cnt;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,gg;i&lt;=n;i++) &#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;gg);</div><div class="line">		a[gg]=i;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,gg;i&lt;=n;i++) &#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;gg);</div><div class="line">		<span class="keyword">if</span>(a[gg]&gt;<span class="number">0</span>) b[cnt++]=a[gg];</div><div class="line">	&#125;</div><div class="line">	fill(f,f+n,INF);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;cnt;i++) &#123;</div><div class="line">		*lower_bound(f,f+cnt,b[i])=b[i];</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>,lower_bound(f,f+cnt,INF)-f);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="最小（最大）生成树"><a href="#最小（最大）生成树" class="headerlink" title="最小（最大）生成树"></a>最小（最大）生成树</h2><ul>
<li><h4 id="题目描述-1"><a href="#题目描述-1" class="headerlink" title="题目描述"></a>题目描述</h4></li>
</ul>
<p>如题，给出一个无向图，求出最小生成树，如果该图不连通，则输出orz</p>
<ul>
<li><h4 id="输入输出格式-1"><a href="#输入输出格式-1" class="headerlink" title="输入输出格式"></a>输入输出格式</h4></li>
</ul>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>第一行包含两个整数N、M，表示该图共有N个结点和M条无向边。（N&lt;=5000，M&lt;=200000）<br>接下来M行每行包含三个整数Xi、Yi、Zi，表示有一条长度为Zi的无向边连接结点Xi、Yi</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>输出包含一个数，即最小生成树的各边的长度之和；如果该图不连通则输出orz</p>
</blockquote>
<ul>
<li><h4 id="输入输出样例-1"><a href="#输入输出样例-1" class="headerlink" title="输入输出样例"></a>输入输出样例</h4></li>
</ul>
<p><strong>输入样例#1：</strong></p>
<blockquote>
<p>1 2 2<br>1 3 2<br>1 4 3<br>2 3 4<br>3 4 3</p>
</blockquote>
<p><strong>输出样例#1：</strong></p>
<blockquote>
<p>7</p>
</blockquote>
<ul>
<li><h4 id="说明-1"><a href="#说明-1" class="headerlink" title="说明"></a>说明</h4>时空限制：1000ms,128M<br>数据规模：<br>对于20%的数据：N&lt;=5，M&lt;=20<br>对于40%的数据：N&lt;=50，M&lt;=2500<br>对于70%的数据：N&lt;=500，M&lt;=10000<br>对于100%的数据：N&lt;=5000，M&lt;=200000<br>样例解释：<br><img src="http://upload-images.jianshu.io/upload_images/8471136-76b5047bcadeb07e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>所以最小生成树的总边权为2+2+3=7</li>
</ul>
<p><strong>kruskal不断加小边，直到加到n-1条边图就变成了树。</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 200005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">struct</span> edge &#123;</div><div class="line">	<span class="keyword">int</span> u,v,w;</div><div class="line">&#125;e[MAXN];</div><div class="line"><span class="keyword">int</span> n,m,tot;</div><div class="line"><span class="keyword">int</span> fa[MAXN];</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">comp</span><span class="params">(edge a,edge b)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> a.w&lt;b.w;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(fa[x]!=x) <span class="keyword">return</span> fa[x]=find(fa[x]);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">	fa[find(x)]=fa[find(y)];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Kruskal</span><span class="params">()</span> </span>&#123;</div><div class="line">	sort(e+<span class="number">1</span>,e+<span class="number">1</span>+m,comp);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,gg=<span class="number">0</span>;i&lt;=m;i++) &#123;</div><div class="line">		<span class="keyword">if</span>(find(e[i].u)!=find(e[i].v)) &#123;</div><div class="line">			merge(e[i].u,e[i].v);</div><div class="line">			tot+=e[i].w;</div><div class="line">			gg++;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(gg==n<span class="number">-1</span>) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) fa[i]=i;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;e[i].u,&amp;e[i].v,&amp;e[i].w);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(Kruskal()) <span class="built_in">cout</span>&lt;&lt;tot;</div><div class="line">	<span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="string">"orz"</span>;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="并查集"><a href="#并查集" class="headerlink" title="并查集"></a>并查集</h2><ul>
<li><h4 id="题目描述-2"><a href="#题目描述-2" class="headerlink" title="题目描述"></a>题目描述</h4>如题，现在有一个并查集，你需要完成合并和查询操作。</li>
<li><h4 id="输入输出格式-2"><a href="#输入输出格式-2" class="headerlink" title="输入输出格式"></a>输入输出格式</h4></li>
</ul>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>第一行包含两个整数N、M，表示共有N个元素和M个操作。<br>接下来M行，每行包含三个整数Zi、Xi、Yi<br>当Zi=1时，将Xi与Yi所在的集合合并<br>当Zi=2时，输出Xi与Yi是否在同一集合内，是的话输出Y；否则话输出N</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>如上，对于每一个Zi=2的操作，都有一行输出，每行包含一个大写字母，为Y或者N</p>
</blockquote>
<ul>
<li><h4 id="输入输出样例-2"><a href="#输入输出样例-2" class="headerlink" title="输入输出样例"></a>输入输出样例</h4></li>
</ul>
<p><strong>输入样例#1：</strong></p>
<blockquote>
<p>4 7<br>2 1 2<br>1 1 2<br>2 1 2<br>1 3 4<br>2 1 4<br>1 2 3<br>2 1 4</p>
</blockquote>
<p><strong>输出样例#1：</strong></p>
<blockquote>
<p>N<br>Y<br>N<br>Y</p>
</blockquote>
<ul>
<li><h4 id="说明-2"><a href="#说明-2" class="headerlink" title="说明"></a>说明</h4>时空限制：1000ms,128M<br>数据规模：<br>对于30%的数据，N&lt;=10，M&lt;=20；<br>对于70%的数据，N&lt;=100，M&lt;=1000；<br>对于100%的数据，N&lt;=10000，M&lt;=200000。</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 10005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n,m,fa[MAXN];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(fa[x]!=x) <span class="keyword">return</span> fa[x]=find(fa[x]);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">	fa[find(x)]=fa[find(y)];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) fa[i]=i;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">		<span class="keyword">int</span> opt,x,y;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;opt,&amp;x,&amp;y);</div><div class="line">		<span class="keyword">if</span>(opt==<span class="number">1</span>) &#123;</div><div class="line">			<span class="keyword">if</span>(find(x)!=find(y)) merge(x,y);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span> &#123;</div><div class="line">			<span class="keyword">if</span>(find(x)==find(y)) <span class="built_in">puts</span>(<span class="string">"Y"</span>);</div><div class="line">			<span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">"N"</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="单源最短路"><a href="#单源最短路" class="headerlink" title="单源最短路"></a>单源最短路</h2><ul>
<li><h4 id="题目描述-3"><a href="#题目描述-3" class="headerlink" title="题目描述"></a>题目描述</h4>如题，给出一个有向图，请输出从某一点出发到所有点的最短路径长度。</li>
<li><h4 id="输入输出格式-3"><a href="#输入输出格式-3" class="headerlink" title="输入输出格式"></a>输入输出格式</h4></li>
</ul>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>第一行包含三个整数N、M、S，分别表示点的个数、有向边的个数、出发点的编号。<br>接下来M行每行包含三个整数Fi、Gi、Wi，分别表示第i条有向边的出发点、目标点和长度。</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>一行，包含N个用空格分隔的整数，其中第i个整数表示从点S出发到点i的最短路径长度（若S=i则最短路径长度为0，若从点S无法到达点i，则最短路径长度为2147483647）</p>
</blockquote>
<h2 id="输入输出样例-3"><a href="#输入输出样例-3" class="headerlink" title="输入输出样例"></a>输入输出样例</h2><p><strong>输入样例#1：</strong></p>
<blockquote>
<p>4 6 1<br>1 2 2<br>2 3 2<br>2 4 1<br>1 3 5<br>3 4 3<br>1 4 4</p>
</blockquote>
<p><strong>输出样例#1：</strong></p>
<blockquote>
<p>0 2 4 3</p>
</blockquote>
<ul>
<li><h4 id="说明-3"><a href="#说明-3" class="headerlink" title="说明"></a>说明</h4>时空限制：1000ms,128M<br>数据规模：<br>对于20%的数据：N&lt;=5，M&lt;=15<br>对于40%的数据：N&lt;=100，M&lt;=10000<br>对于70%的数据：N&lt;=1000，M&lt;=100000<br>对于100%的数据：N&lt;=10000，M&lt;=500000<br>样例说明：<br><img src="http://upload-images.jianshu.io/upload_images/8471136-a12dd236618107c1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
</ul>
<p><strong>SPFA</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 1001000</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> x=<span class="number">0</span>,f=<span class="number">1</span>;<span class="keyword">char</span> ch=getchar();</div><div class="line">    <span class="keyword">while</span>(ch&lt;<span class="string">'0'</span> || ch&gt;<span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>)f=<span class="number">-1</span>;ch=getchar();&#125;</div><div class="line">    <span class="keyword">while</span>(ch&gt;=<span class="string">'0'</span> &amp;&amp; ch&lt;=<span class="string">'9'</span>)&#123;x=x*<span class="number">10</span>+ch-<span class="string">'0'</span>;ch=getchar();&#125;</div><div class="line">    <span class="keyword">return</span> x*f;</div><div class="line">&#125;</div><div class="line"><span class="keyword">struct</span> <span class="built_in">queue</span> &#123;</div><div class="line">    <span class="keyword">int</span> Q[<span class="number">500005</span>],head,tail;</div><div class="line">    <span class="built_in">queue</span>() &#123;</div><div class="line">        head=<span class="number">0</span>,tail=<span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> a)</span> </span>&#123;</div><div class="line">        Q[++tail]=a;</div><div class="line">        <span class="keyword">return</span> ;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</div><div class="line">        head++;</div><div class="line">        <span class="keyword">return</span> ;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">empty</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> head&gt;=tail;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">front</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> Q[head+<span class="number">1</span>];</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span>(head&lt;=tail) <span class="keyword">return</span> tail-head; </div><div class="line">    &#125; </div><div class="line">&#125;;</div><div class="line"><span class="keyword">struct</span> Edge &#123;</div><div class="line">    <span class="keyword">int</span> next,to,cost;</div><div class="line">&#125;e[maxn];</div><div class="line"><span class="keyword">int</span> num,head[maxn&lt;&lt;<span class="number">1</span>],dist[maxn],vis[maxn],n,m,s;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> w)</span> </span>&#123;</div><div class="line">    num++;</div><div class="line">    e[num].to=v;</div><div class="line">    e[num].cost=w;</div><div class="line">    e[num].next=head[u];</div><div class="line">    head[u]=num;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">clearlove</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">10010</span>;i++)dist[i]=<span class="number">2147483647</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">spfa</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</div><div class="line">    clearlove();</div><div class="line">    <span class="built_in">queue</span> q;</div><div class="line">    dist[s]=<span class="number">0</span>;</div><div class="line">    vis[s]=<span class="number">1</span>;</div><div class="line">    q.push(s);</div><div class="line">    <span class="keyword">while</span>(!q.empty()) &#123;</div><div class="line">        <span class="keyword">int</span> u=q.front();</div><div class="line">        q.pop();</div><div class="line">        vis[u]=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=head[u];i;i=e[i].next) &#123;</div><div class="line">            <span class="keyword">int</span> to=e[i].to;</div><div class="line">            <span class="keyword">if</span>(dist[to]&gt;dist[u]+e[i].cost) &#123;</div><div class="line">                dist[to]=dist[u]+e[i].cost;</div><div class="line">                <span class="keyword">if</span>(!vis[to]) &#123;</div><div class="line">                    vis[to]=<span class="number">1</span>;</div><div class="line">                    q.push(to);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    n=read(),m=read(),s=read();</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">        <span class="keyword">int</span> u=read(),v=read(),w=read();</div><div class="line">        insert(u,v,w);</div><div class="line">    &#125;</div><div class="line">    spfa(s);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d "</span>,dist[i]);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="最近公共祖先（LCA）"><a href="#最近公共祖先（LCA）" class="headerlink" title="最近公共祖先（LCA）"></a>最近公共祖先（LCA）</h2><ul>
<li><h4 id="题目描述-4"><a href="#题目描述-4" class="headerlink" title="题目描述"></a>题目描述</h4>如题，给定一棵有根多叉树，请求出指定两个点直接最近的公共祖先。</li>
<li><h4 id="输入输出格式-4"><a href="#输入输出格式-4" class="headerlink" title="输入输出格式"></a>输入输出格式</h4></li>
</ul>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>第一行包含三个正整数N、M、S，分别表示树的结点个数、询问的个数和树根结点的序号。<br>接下来N-1行每行包含两个正整数x、y，表示x结点和y结点之间有一条直接连接的边（数据保证可以构成树）。<br>接下来M行每行包含两个正整数a、b，表示询问a结点和b结点的最近公共祖先。</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>输出包含M行，每行包含一个正整数，依次为每一个询问的结果。</p>
<ul>
<li><h4 id="输入输出样例-4"><a href="#输入输出样例-4" class="headerlink" title="输入输出样例"></a>输入输出样例</h4></li>
</ul>
</blockquote>
<p><strong>输入样例#1：</strong></p>
<blockquote>
<p>5 5 4<br>3 1<br>2 4<br>5 1<br>1 4<br>2 4<br>3 2<br>3 5<br>1 2<br>4 5</p>
</blockquote>
<p><strong>输出样例#1：</strong></p>
<blockquote>
<p>4<br>4<br>1<br>4<br>4</p>
</blockquote>
<ul>
<li><h4 id="说明-4"><a href="#说明-4" class="headerlink" title="说明"></a>说明</h4>时空限制：1000ms,128M<br>数据规模：<br>对于30%的数据：N&lt;=10，M&lt;=10<br>对于70%的数据：N&lt;=10000，M&lt;=10000<br>对于100%的数据：N&lt;=500000，M&lt;=500000<br>样例说明：<br>该树结构如下：<br><img src="http://upload-images.jianshu.io/upload_images/8471136-84aba54020b59468.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>第一次询问：2、4的最近公共祖先，故为4。<br>第二次询问：3、2的最近公共祖先，故为4。<br>第三次询问：3、5的最近公共祖先，故为1。<br>第四次询问：1、2的最近公共祖先，故为4。<br>第五次询问：4、5的最近公共祖先，故为4。<br>故输出依次为4、4、1、4、4。</li>
</ul>
<p><strong>倍增</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 5000500</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> x=<span class="number">0</span>,f=<span class="number">1</span>;<span class="keyword">char</span> ch=getchar();</div><div class="line">    <span class="keyword">while</span>(ch&lt;<span class="string">'0'</span> || ch&gt;<span class="string">'9'</span>) &#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>)f=<span class="number">-1</span>;ch=getchar();&#125;</div><div class="line">    <span class="keyword">while</span>(ch&gt;=<span class="string">'0'</span> &amp;&amp; ch&lt;=<span class="string">'9'</span>) &#123;x=x*<span class="number">10</span>+ch-<span class="string">'0'</span>;ch=getchar();&#125;</div><div class="line">    <span class="keyword">return</span> x*f;</div><div class="line">&#125;</div><div class="line"><span class="keyword">struct</span> edge &#123;</div><div class="line">    <span class="keyword">int</span> u,v,next;</div><div class="line">&#125;e[MAXN];</div><div class="line"><span class="keyword">int</span> num,head[MAXN],n,m,s;</div><div class="line"><span class="keyword">int</span> fa[MAXN][<span class="number">30</span>],deep[MAXN];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span> </span>&#123;</div><div class="line">    num++;</div><div class="line">    e[num].v=v;</div><div class="line">    e[num].next=head[u];</div><div class="line">    head[u]=num;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">    deep[x]=deep[fa[x][<span class="number">0</span>]]+<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;fa[x][i];i++) fa[x][i+<span class="number">1</span>]=fa[fa[x][i]][i];</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=head[x];i;i=e[i].next) &#123;</div><div class="line">        <span class="keyword">if</span>(!deep[e[i].v]) &#123;</div><div class="line">            fa[e[i].v][<span class="number">0</span>]=x;</div><div class="line">            dfs(e[i].v);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(deep[x]&gt;deep[y]) swap(x,y);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">20</span>;i&gt;=<span class="number">0</span>;i--) &#123;</div><div class="line">        <span class="keyword">if</span>(deep[fa[y][i]]&gt;=deep[x]) y=fa[y][i];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(x==y) <span class="keyword">return</span> x;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">20</span>;i&gt;=<span class="number">0</span>;i--) &#123;</div><div class="line">        <span class="keyword">if</span>(fa[x][i]!=fa[y][i]) x=fa[x][i],y=fa[y][i];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> fa[x][<span class="number">0</span>];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    n=read(),m=read(),s=read();</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++) &#123;</div><div class="line">        <span class="keyword">int</span> u=read(),v=read();</div><div class="line">        insert(u,v);</div><div class="line">        insert(v,u);</div><div class="line">    &#125;</div><div class="line">    dfs(s);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">        <span class="keyword">int</span> x=read(),y=read();</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,lca(x,y));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>树链剖分</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 500005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n,m,s,fa[MAXN],deep[MAXN],size[MAXN],top[MAXN];</div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vec[MAXN];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">    size[x]=<span class="number">1</span>;</div><div class="line">    deep[x]=deep[fa[x]]+<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;vec[x].size(); i++) &#123;</div><div class="line">        <span class="keyword">if</span>(fa[x]!=vec[x][i]) &#123;</div><div class="line">            fa[vec[x][i]]=x;</div><div class="line">            dfs(vec[x][i]);</div><div class="line">            size[x]+=size[vec[x][i]];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Get_heavy_edge</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> s=<span class="number">0</span>;</div><div class="line">    <span class="keyword">if</span>(!top[x]) top[x]=x;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;vec[x].size();i++) &#123;</div><div class="line">        <span class="keyword">if</span>(fa[x]!=vec[x][i]&amp;&amp;size[vec[x][i]]&gt;size[s])s=vec[x][i];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(s) &#123;</div><div class="line">        top[s]=top[x];</div><div class="line">        Get_heavy_edge(s);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;vec[x].size();i++) &#123;</div><div class="line">        <span class="keyword">if</span>(fa[x]!=vec[x][i]&amp;&amp;vec[x][i]!=s) Get_heavy_edge(vec[x][i]);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span>(;top[x]!=top[y];) &#123;</div><div class="line">        <span class="keyword">if</span>(deep[top[x]]&lt;deep[top[y]]) swap(x,y);</div><div class="line">        x=fa[top[x]];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(deep[x]&gt;deep[y]) swap(x,y);</div><div class="line">    <span class="keyword">return</span> x;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;n,&amp;m,&amp;s);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++) &#123;</div><div class="line">        <span class="keyword">int</span> u,v;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;u,&amp;v);</div><div class="line">        vec[u].push_back(v);</div><div class="line">        vec[v].push_back(u);</div><div class="line">    &#125;</div><div class="line">    dfs(s);</div><div class="line">    Get_heavy_edge(s);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">        <span class="keyword">int</span> x,y;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,lca(x,y));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="负环"><a href="#负环" class="headerlink" title="负环"></a>负环</h2><ul>
<li><h4 id="题目描述-5"><a href="#题目描述-5" class="headerlink" title="题目描述"></a>题目描述</h4>暴力枚举/SPFA/Bellman-ford/奇怪的贪心/超神搜索</li>
<li><h4 id="输入输出格式-5"><a href="#输入输出格式-5" class="headerlink" title="输入输出格式"></a>输入输出格式</h4></li>
</ul>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>第一行一个正整数T表示数据组数，对于每组数据：<br>第一行两个正整数N M，表示图有N个顶点，M条边<br>接下来M行，每行三个整数a b w，表示a-&gt;b有一条权值为w的边（若w&lt;0则为单向，否则双向）</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>共T行。对于每组数据，存在负环则输出一行”YE5”(不含引号)，否则输出一行”N0”(不含引号)。</p>
</blockquote>
<ul>
<li><h4 id="输入输出样例-5"><a href="#输入输出样例-5" class="headerlink" title="输入输出样例"></a>输入输出样例</h4></li>
</ul>
<p><strong>输入样例#1：</strong></p>
<blockquote>
<p>2<br>3 4<br>1 2 2<br>1 3 4<br>2 3 1<br>3 1 -3<br>3 3<br>1 2 3<br>2 3 4<br>3 1 -8</p>
</blockquote>
<p><strong>输出样例#1：</strong></p>
<blockquote>
<p>N0<br>YE5</p>
</blockquote>
<ul>
<li><h4 id="说明-5"><a href="#说明-5" class="headerlink" title="说明"></a>说明</h4>N,M,|w|≤200 000；1≤a,b≤N；T≤10 建议复制输出格式中的字符串。<br>此题普通Bellman-Ford或BFS-SPFA会TLE</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 200005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> x=<span class="number">0</span>,f=<span class="number">1</span>;<span class="keyword">char</span> ch=getchar();</div><div class="line">    <span class="keyword">while</span>(ch&lt;<span class="string">'0'</span> || ch&gt;<span class="string">'9'</span>) &#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>)f=<span class="number">-1</span>;ch=getchar();&#125;</div><div class="line">    <span class="keyword">while</span>(ch&gt;=<span class="string">'0'</span> &amp;&amp; ch&lt;=<span class="string">'9'</span>) &#123;x=x*<span class="number">10</span>+ch-<span class="string">'0'</span>;ch=getchar();&#125;</div><div class="line">    <span class="keyword">return</span> x*f;</div><div class="line">&#125;</div><div class="line"><span class="keyword">struct</span> edge &#123;</div><div class="line">    <span class="keyword">int</span> u,v,w,next;</div><div class="line">&#125;e[MAXN&lt;&lt;<span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> n,m,t;</div><div class="line"><span class="keyword">int</span> num,head[MAXN&lt;&lt;<span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> vis[MAXN],dis[MAXN];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> w)</span> </span>&#123;</div><div class="line">    num++;</div><div class="line">    e[num].v=v;</div><div class="line">    e[num].next=head[u];</div><div class="line">    e[num].w=w;</div><div class="line">    head[u]=num;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</div><div class="line">    num=<span class="number">0</span>;</div><div class="line">    <span class="built_in">memset</span>(e,<span class="number">0</span>,<span class="keyword">sizeof</span>(e));</div><div class="line">    <span class="built_in">memset</span>(head,<span class="number">0</span>,<span class="keyword">sizeof</span>(head));</div><div class="line">    <span class="built_in">memset</span>(dis,<span class="number">0</span>,<span class="keyword">sizeof</span>(dis));</div><div class="line">    <span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="keyword">sizeof</span>(vis));</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">spfa_dfs</span><span class="params">(<span class="keyword">int</span> u)</span> </span>&#123;</div><div class="line">    vis[u]=<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k=head[u];k;k=e[k].next) &#123;</div><div class="line">        <span class="keyword">int</span> v=e[k].v,w=e[k].w;</div><div class="line">        <span class="keyword">if</span>(dis[u]+w&lt;dis[v]) &#123;</div><div class="line">            dis[v]=dis[u]+w;</div><div class="line">            <span class="keyword">if</span>(!vis[v]) &#123;</div><div class="line">                <span class="keyword">if</span>(spfa_dfs(v)) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">            &#125; </div><div class="line">            <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    vis[u]=<span class="number">0</span>;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    t=read();</div><div class="line">    <span class="keyword">while</span>(t--) &#123;</div><div class="line">        clear();</div><div class="line">        n=read();</div><div class="line">        m=read();</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">            <span class="keyword">int</span> u=read(),v=read(),w=read();</div><div class="line">            <span class="keyword">if</span>(w&lt;<span class="number">0</span>) insert(u,v,w);</div><div class="line">            <span class="keyword">else</span> &#123;</div><div class="line">                insert(u,v,w);</div><div class="line">                insert(v,u,w);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">bool</span> flag=<span class="literal">false</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">            <span class="keyword">if</span>(flag) <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">if</span>(spfa_dfs(i)) flag=<span class="literal">true</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(flag) <span class="built_in">puts</span>(<span class="string">"YE5"</span>);</div><div class="line">        <span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">"N0"</span>);</div><div class="line">    &#125; </div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="缩点"><a href="#缩点" class="headerlink" title="缩点"></a>缩点</h2><ul>
<li><h4 id="题目背景"><a href="#题目背景" class="headerlink" title="题目背景"></a>题目背景</h4>缩点+DP</li>
<li><h4 id="题目描述-6"><a href="#题目描述-6" class="headerlink" title="题目描述"></a>题目描述</h4>给定一个n个点m条边有向图，每个点有一个权值，求一条路径，使路径经过的点权值之和最大。你只需要求出这个权值和。<br>允许多次经过一条边或者一个点，但是，重复经过的点，权值只计算一次。</li>
<li><h4 id="输入输出格式-6"><a href="#输入输出格式-6" class="headerlink" title="输入输出格式"></a>输入输出格式</h4></li>
</ul>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>第一行，n,m<br>第二行，n个整数，依次代表点权<br>第三至m+2行，每行两个整数u,v，表示u-&gt;v有一条有向边</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>共一行，最大的点权之和。</p>
</blockquote>
<ul>
<li><h4 id="输入输出样例-6"><a href="#输入输出样例-6" class="headerlink" title="输入输出样例"></a>输入输出样例</h4></li>
</ul>
<p><strong>输入样例#1：</strong></p>
<blockquote>
<p>2 2<br>1 1<br>1 2<br>2 1</p>
</blockquote>
<p><strong>输出样例#1：</strong></p>
<blockquote>
<p>2</p>
</blockquote>
<ul>
<li><h4 id="说明-6"><a href="#说明-6" class="headerlink" title="说明"></a>说明</h4>n&lt;=10^4,m&lt;=10^5,|点权|&lt;=1000 算法：Tarjan缩点+DAGdp</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 10005</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXM 500005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">struct</span> edge &#123;</div><div class="line">    <span class="keyword">int</span> u,v,next;</div><div class="line">&#125;e[MAXM&lt;&lt;<span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> num,head[MAXN&lt;&lt;<span class="number">1</span>];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">ins</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span> </span>&#123;</div><div class="line">    num++;</div><div class="line">    e[num].u=u;</div><div class="line">    e[num].v=v;</div><div class="line">    e[num].next=head[u];</div><div class="line">    head[u]=num;</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> cnt,DFN[MAXN],LOW[MAXN],Time,belong[MAXN],<span class="built_in">stack</span>[MAXN],top;</div><div class="line"><span class="keyword">bool</span> inst[MAXN];</div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; bcc[MAXN];</div><div class="line"><span class="keyword">int</span> n,m,w[MAXN],gg[MAXN];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">tarjan</span><span class="params">(<span class="keyword">int</span> u)</span> </span>&#123;</div><div class="line">    LOW[u]=DFN[u]=++Time;</div><div class="line">    inst[u]=<span class="literal">true</span>;</div><div class="line">    <span class="built_in">stack</span>[top++]=u;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=head[u];i;i=e[i].next) &#123;</div><div class="line">        <span class="keyword">int</span> v=e[i].v;</div><div class="line">        <span class="keyword">if</span>(inst[v]) &#123;</div><div class="line">            LOW[u]=min(LOW[u],DFN[v]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(!DFN[v]) &#123;</div><div class="line">            tarjan(v);</div><div class="line">            LOW[u]=min(LOW[u],LOW[v]);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(LOW[u]==DFN[u]) &#123;</div><div class="line">        <span class="keyword">int</span> now;</div><div class="line">        cnt++;</div><div class="line">        <span class="keyword">do</span> &#123;</div><div class="line">            now=<span class="built_in">stack</span>[--top];</div><div class="line">            inst[now]=<span class="literal">false</span>;</div><div class="line">            belong[now]=cnt;</div><div class="line">            bcc[cnt].push_back(now);</div><div class="line">            w[cnt]+=gg[now];</div><div class="line">        &#125; <span class="keyword">while</span>(now!=u);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; G[MAXN];</div><div class="line"><span class="keyword">int</span> du[MAXN];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Shrinking_point</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">        <span class="keyword">int</span> u=belong[e[i].u],v=belong[e[i].v];</div><div class="line">        <span class="keyword">if</span>(u!=v) G[u].push_back(v),du[v]++;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">struct</span> <span class="built_in">queue</span> &#123;</div><div class="line">	<span class="keyword">int</span> Q[<span class="number">500005</span>],head,tail;</div><div class="line">	<span class="built_in">queue</span>() &#123;</div><div class="line">		head=<span class="number">0</span>,tail=<span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> a)</span> </span>&#123;</div><div class="line">		Q[++tail]=a;</div><div class="line">		<span class="keyword">return</span> ;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</div><div class="line">		head++;</div><div class="line">		<span class="keyword">return</span> ;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">empty</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> head&gt;=tail;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">front</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> Q[head+<span class="number">1</span>];</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span>(head&lt;=tail) <span class="keyword">return</span> tail-head; </div><div class="line">	&#125; </div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</div><div class="line">		head=tail=<span class="number">0</span>;</div><div class="line">		<span class="built_in">memset</span>(Q,<span class="number">0</span>,<span class="keyword">sizeof</span>(Q));</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">int</span> dist[MAXN],ans;</div><div class="line"><span class="keyword">bool</span> vis[MAXN];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">clearlove</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=cnt;i++) dist[i]=<span class="number">0</span>;</div><div class="line">    fill(vis,vis+cnt+<span class="number">1</span>,<span class="literal">false</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">SPFA</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</div><div class="line">	clearlove();</div><div class="line">    <span class="built_in">queue</span> q;</div><div class="line">    dist[s]=w[s];</div><div class="line">    vis[s]=<span class="number">1</span>;</div><div class="line">    q.push(s);</div><div class="line">    <span class="keyword">while</span>(!q.empty()) &#123;</div><div class="line">        <span class="keyword">int</span> u=q.front();</div><div class="line">        q.pop();</div><div class="line">        vis[u]=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;G[u].size();i++) &#123;</div><div class="line">            <span class="keyword">int</span> to=G[u][i];</div><div class="line">            <span class="keyword">if</span>(dist[to]&lt;dist[u]+w[to]) &#123;</div><div class="line">                dist[to]=dist[u]+w[to];</div><div class="line">                <span class="keyword">if</span>(!vis[to]) &#123;</div><div class="line">                    vis[to]=<span class="number">1</span>;</div><div class="line">                    q.push(to);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=cnt;i++) res=max(res,dist[i]);</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;gg[i]);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">        <span class="keyword">int</span> u,v;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;u,&amp;v);</div><div class="line">        ins(u,v);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="keyword">if</span>(!DFN[i]) tarjan(i);</div><div class="line">    Shrinking_point();</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=cnt;i++) &#123;</div><div class="line">    	<span class="keyword">if</span>(!du[i]) &#123;</div><div class="line">    		ans=max(ans,SPFA(i));</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>,ans);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="割点"><a href="#割点" class="headerlink" title="割点"></a>割点</h2><ul>
<li><h4 id="题目背景-1"><a href="#题目背景-1" class="headerlink" title="题目背景"></a>题目背景</h4>割点</li>
<li><h4 id="题目描述-7"><a href="#题目描述-7" class="headerlink" title="题目描述"></a>题目描述</h4>给出一个n个点，m条边的无向图，求图的割点。</li>
<li><h4 id="输入输出格式-7"><a href="#输入输出格式-7" class="headerlink" title="输入输出格式"></a>输入输出格式</h4></li>
</ul>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>第一行输入n,m<br>下面m行每行输入x,y表示x到y有一条边</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>第一行输出割点个数<br>第二行按照节点编号从小到大输出节点，用空格隔开</p>
</blockquote>
<ul>
<li><h4 id="输入输出样例-7"><a href="#输入输出样例-7" class="headerlink" title="输入输出样例"></a>输入输出样例</h4><strong>输入样例#1：</strong><blockquote>
<p>6 7<br>1 2<br>1 3<br>1 4<br>2 5<br>3 5<br>4 5<br>5 6</p>
</blockquote>
</li>
</ul>
<p><strong>输出样例#1：</strong></p>
<blockquote>
<p>1<br>5</p>
</blockquote>
<ul>
<li><h4 id="说明-7"><a href="#说明-7" class="headerlink" title="说明"></a>说明</h4>n,m均为100000<br>tarjan 图不一定联通！！！</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 100005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> x=<span class="number">0</span>,f=<span class="number">1</span>;<span class="keyword">char</span> ch=getchar();</div><div class="line">	<span class="keyword">while</span>(ch&lt;<span class="string">'0'</span> || ch&gt;<span class="string">'9'</span>) &#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>)f=<span class="number">-1</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch&gt;=<span class="string">'0'</span> &amp;&amp; ch&lt;=<span class="string">'9'</span>) &#123;x=x*<span class="number">10</span>+ch-<span class="string">'0'</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">return</span> x*f;</div><div class="line">&#125;</div><div class="line"><span class="keyword">struct</span> edge &#123;</div><div class="line">	<span class="keyword">int</span> u,v,next;</div><div class="line">&#125;e[MAXN&lt;&lt;<span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> head[MAXN&lt;&lt;<span class="number">1</span>],num;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">ins</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span> </span>&#123;</div><div class="line">	num++;</div><div class="line">	e[num].u=u;</div><div class="line">	e[num].v=v;</div><div class="line">	e[num].next=head[u];</div><div class="line">	head[u]=num;</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> n,m,ans;</div><div class="line"><span class="keyword">int</span> dfn[MAXN],low[MAXN],Time;</div><div class="line"><span class="keyword">bool</span> cut[MAXN],in[MAXN];</div><div class="line"><span class="keyword">int</span> root,child;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">tarjan</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> fa)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> child=<span class="number">0</span>;</div><div class="line">	dfn[u]=low[u]=++Time;</div><div class="line">	in[u]=<span class="literal">true</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=head[u];i;i=e[i].next) &#123;</div><div class="line">		<span class="keyword">int</span> v=e[i].v;</div><div class="line">		<span class="keyword">if</span>(in[v] &amp;&amp; v!=fa) &#123;</div><div class="line">			low[u]=min(low[u],dfn[v]);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(!dfn[v]) &#123;</div><div class="line">			tarjan(v,u);</div><div class="line">			child++;</div><div class="line">			low[u]=min(low[u],low[v]);</div><div class="line">			<span class="keyword">if</span>((fa!=root &amp;&amp; dfn[u]&lt;=low[v]) || (fa==root &amp;&amp; child&gt;<span class="number">1</span>)) &#123;</div><div class="line">				<span class="keyword">if</span>(!cut[u]) ans++;</div><div class="line">				cut[u]=<span class="literal">true</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	n=read(),m=read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">		<span class="keyword">int</span> u=read(),v=read();</div><div class="line">		ins(u,v);</div><div class="line">		ins(v,u);</div><div class="line">	&#125;</div><div class="line">	root=<span class="number">-1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="keyword">if</span>(!dfn[i]) tarjan(i,root);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="keyword">if</span>(cut[i]) <span class="built_in">printf</span>(<span class="string">"%d "</span>,i);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="网络最大流"><a href="#网络最大流" class="headerlink" title="网络最大流"></a>网络最大流</h2><ul>
<li><h4 id="题目描述-8"><a href="#题目描述-8" class="headerlink" title="题目描述"></a>题目描述</h4><p>如题，给出一个网络图，以及其源点和汇点，求出其网络最大流。</p>
</li>
<li><h4 id="输入输出格式-8"><a href="#输入输出格式-8" class="headerlink" title="输入输出格式"></a>输入输出格式</h4></li>
</ul>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>第一行包含四个正整数N、M、S、T，分别表示点的个数、有向边的个数、源点序号、汇点序号。<br>接下来M行每行包含三个正整数ui、vi、wi，表示第i条有向边从ui出发，到达vi，边权为wi（即该边最大流量为wi）</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>一行，包含一个正整数，即为该网络的最大流。</p>
</blockquote>
<ul>
<li><h4 id="输入输出样例-8"><a href="#输入输出样例-8" class="headerlink" title="输入输出样例"></a>输入输出样例</h4></li>
</ul>
<p><strong>输入样例#1：</strong></p>
<blockquote>
<p>4 5 4 3<br>4 2 30<br>4 3 20<br>2 3 20<br>2 1 30<br>1 3 40</p>
</blockquote>
<p><strong>输出样例#1：</strong></p>
<blockquote>
<p>50</p>
</blockquote>
<ul>
<li><h4 id="说明-8"><a href="#说明-8" class="headerlink" title="说明"></a>说明</h4>时空限制：1000ms,128M<br>数据规模：<br>对于30%的数据：N<a href="=10，M&lt;=25
对于70%的数据：N&lt;=200，M&lt;=1000
对于100%的数据：N&lt;=10000，M&lt;=100000
样例说明：
![image](http://upload-images.jianshu.io/upload_images/8471136-db2fc2596be3ec8d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
题目中存在3条路径：
4--">=10，M&lt;=25
对于70%的数据：N&lt;=200，M&lt;=1000
对于100%的数据：N&lt;=10000，M&lt;=100000
样例说明：
![image](http://upload-images.jianshu.io/upload_images/8471136-db2fc2596be3ec8d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
题目中存在3条路径：
4--</a>2–&gt;3，该路线可通过20的流量<br>4–&gt;3，可通过20的流量<br>4–&gt;2–&gt;1–&gt;3，可通过10的流量（边4–&gt;2之前已经耗费了20的流量）<br>故流量总计20+20+10=50。输出50。</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 200005</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXM 500005</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7fffffff</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> x=<span class="number">0</span>,f=<span class="number">1</span>;<span class="keyword">char</span> ch=getchar();</div><div class="line">	<span class="keyword">while</span>(ch&lt;<span class="string">'0'</span> || ch&gt;<span class="string">'9'</span>) &#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>)f=<span class="number">-1</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch&gt;=<span class="string">'0'</span> &amp;&amp; ch&lt;=<span class="string">'9'</span>) &#123;x=x*<span class="number">10</span>+ch-<span class="string">'0'</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">return</span> x*f;</div><div class="line">&#125;</div><div class="line"><span class="keyword">struct</span> edge &#123;</div><div class="line">	<span class="keyword">int</span> u,v,f,next;</div><div class="line">&#125;e[MAXN&lt;&lt;<span class="number">1</span>];</div><div class="line"><span class="keyword">int</span> head[MAXN&lt;&lt;<span class="number">1</span>],num;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">ins</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> f)</span> </span>&#123;</div><div class="line">	num++;</div><div class="line">	e[num].u=u;</div><div class="line">	e[num].v=v;</div><div class="line">	e[num].f=f;</div><div class="line">	e[num].next=head[u];</div><div class="line">	head[u]=num;</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> n,m,S,T,ans;</div><div class="line"><span class="keyword">int</span> qu[MAXN&lt;&lt;<span class="number">1</span>],deep[MAXN&lt;&lt;<span class="number">1</span>];</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> h=<span class="number">0</span>,t=<span class="number">1</span>;</div><div class="line">	<span class="built_in">memset</span>(deep,<span class="number">-1</span>,<span class="keyword">sizeof</span>(deep));</div><div class="line">	qu[h]=S;</div><div class="line">	deep[S]=<span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(h&lt;t) &#123;</div><div class="line">		<span class="keyword">int</span> u=qu[h++];</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=head[u];i;i=e[i].next) &#123;</div><div class="line">			<span class="keyword">int</span> v=e[i].v;</div><div class="line">			<span class="keyword">if</span>(deep[v]==<span class="number">-1</span> &amp;&amp; e[i].f) &#123;</div><div class="line">				deep[v]=deep[u]+<span class="number">1</span>;</div><div class="line">				qu[t++]=v;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(deep[T]!=<span class="number">-1</span>) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> f)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(u==T || f&lt;=<span class="number">0</span>) <span class="keyword">return</span> f;</div><div class="line">	<span class="keyword">int</span> rest=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=head[u];i;i=e[i].next) &#123;</div><div class="line">		<span class="keyword">int</span> v=e[i].v;</div><div class="line">		<span class="keyword">if</span>(deep[v]==deep[u]+<span class="number">1</span>) &#123;</div><div class="line">			<span class="keyword">int</span> new_flow=dfs(v,min(f-rest,e[i].f));</div><div class="line">			e[i].f-=new_flow;</div><div class="line">			e[i^<span class="number">1</span>].v+=new_flow;</div><div class="line">			rest+=new_flow;</div><div class="line">			<span class="keyword">if</span>(rest==f) <span class="keyword">return</span> f;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(!rest) deep[u]=<span class="number">-1</span>;</div><div class="line">	<span class="keyword">return</span> rest;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dinic</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">while</span>(bfs()) ans+=dfs(S,INF);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>,ans);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	n=read(),m=read(),S=read(),T=read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">		<span class="keyword">int</span> u=read(),v=read(),f=read();</div><div class="line">		ins(u,v,f);</div><div class="line">		ins(v,u,<span class="number">0</span>);</div><div class="line">	&#125;</div><div class="line">	dinic();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="二分图匹配"><a href="#二分图匹配" class="headerlink" title="二分图匹配"></a>二分图匹配</h2><ul>
<li><h4 id="题目背景-2"><a href="#题目背景-2" class="headerlink" title="题目背景"></a>题目背景</h4>二分图</li>
<li><h4 id="题目描述-9"><a href="#题目描述-9" class="headerlink" title="题目描述"></a>题目描述</h4><p>给定一个二分图，结点个数分别为n,m，边数为e，求二分图最大匹配数</p>
</li>
<li><h4 id="输入输出格式-9"><a href="#输入输出格式-9" class="headerlink" title="输入输出格式"></a>输入输出格式</h4></li>
</ul>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>第一行，n,m,e<br>第二至e+1行，每行两个正整数u,v，表示u,v有一条连边</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>共一行，二分图最大匹配</p>
<ul>
<li><h4 id="输入输出样例-9"><a href="#输入输出样例-9" class="headerlink" title="输入输出样例"></a>输入输出样例</h4></li>
</ul>
</blockquote>
<p><strong>输入样例#1：</strong></p>
<blockquote>
<p>1 1 1<br>1 1</p>
</blockquote>
<p><strong>输出样例#1：</strong></p>
<blockquote>
<p>1</p>
</blockquote>
<ul>
<li><h4 id="说明-9"><a href="#说明-9" class="headerlink" title="说明"></a>说明</h4><img src="http://upload-images.jianshu.io/upload_images/8471136-ab8df48547644243.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
</ul>
<p><strong>网络流算法</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 550000</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> x=<span class="number">0</span>,f=<span class="number">1</span>;<span class="keyword">char</span> ch=getchar();</div><div class="line">	<span class="keyword">while</span>(ch&lt;<span class="string">'0'</span> || ch&gt;<span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>)f=<span class="number">-1</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch&gt;=<span class="string">'0'</span> &amp;&amp; ch&lt;=<span class="string">'9'</span>)&#123;x=x*<span class="number">10</span>+ch-<span class="string">'0'</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">return</span> x*f;</div><div class="line">&#125;</div><div class="line"><span class="keyword">struct</span> edge &#123;</div><div class="line">	<span class="keyword">int</span> to,next,v;</div><div class="line">&#125;e[<span class="number">550000</span>];</div><div class="line"><span class="keyword">int</span> head[MAXN&lt;&lt;<span class="number">1</span>],ne=<span class="number">1</span>,q[MAXN&lt;&lt;<span class="number">1</span>],h[MAXN&lt;&lt;<span class="number">1</span>],ans,n,m,S,T,ee;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">ins</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> f)</span> </span>&#123;</div><div class="line">	ne++;</div><div class="line">	e[ne].to=v;</div><div class="line">	e[ne].next=head[u];</div><div class="line">	e[ne].v=f;</div><div class="line">	head[u]=ne;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> f)</span> </span>&#123;</div><div class="line">	ins(u,v,f);ins(v,u,<span class="number">0</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> t=<span class="number">0</span>,w=<span class="number">1</span>;</div><div class="line">	<span class="built_in">memset</span>(h,<span class="number">-1</span>,<span class="keyword">sizeof</span>(h));</div><div class="line">	q[t]=S;h[S]=<span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(t&lt;w) &#123;</div><div class="line">		<span class="keyword">int</span> now=q[t++];</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=head[now];i;i=e[i].next) &#123;	</div><div class="line">			<span class="keyword">int</span> v=e[i].to;</div><div class="line">			<span class="keyword">if</span>(h[v]==<span class="number">-1</span> &amp;&amp; e[i].v) &#123;</div><div class="line">				h[v]=h[now]+<span class="number">1</span>;</div><div class="line">				q[w++]=v;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(h[T]!=<span class="number">-1</span>) <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> f)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(x==T || f&lt;=<span class="number">0</span>) <span class="keyword">return</span> f;</div><div class="line">	<span class="keyword">int</span> w,used=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=head[x];i;i=e[i].next) &#123;</div><div class="line">		<span class="keyword">int</span> v=e[i].to;</div><div class="line">		<span class="keyword">if</span>(h[v]==h[x]+<span class="number">1</span>) &#123;</div><div class="line">			w=dfs(v,min(f-used,e[i].v));</div><div class="line">			e[i].v-=w;</div><div class="line">			e[i^<span class="number">1</span>].v+=w;</div><div class="line">			used+=w;</div><div class="line">			<span class="keyword">if</span>(used==f)<span class="keyword">return</span> f;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(!used) h[x]=<span class="number">-1</span>;</div><div class="line">	<span class="keyword">return</span> used;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dinic</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">while</span>(bfs())ans+=dfs(S,<span class="number">0x7fffffff</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	n=read(),m=read(),ee=read();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=ee;i++) &#123;</div><div class="line">		<span class="keyword">int</span> u=read(),v=read();</div><div class="line">		<span class="keyword">if</span>(v&gt;m) <span class="keyword">continue</span>;</div><div class="line">		insert(u,v+n,<span class="number">1</span>);</div><div class="line">	&#125;</div><div class="line">	S=<span class="number">0</span>,T=n+m+<span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) insert(S,i,<span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) insert(i+n,T,<span class="number">1</span>);</div><div class="line">	dinic();</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>,ans);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="树状数组"><a href="#树状数组" class="headerlink" title="树状数组"></a>树状数组</h2><ul>
<li><h4 id="题目描述-10"><a href="#题目描述-10" class="headerlink" title="题目描述"></a>题目描述</h4>如题，已知一个数列，你需要进行下面两种操作：<br>1.将某一个数加上x<br>2.求出某区间每一个数的和</li>
<li><h4 id="输入输出格式-10"><a href="#输入输出格式-10" class="headerlink" title="输入输出格式"></a>输入输出格式</h4></li>
</ul>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>第一行包含两个整数N、M，分别表示该数列数字的个数和操作的总个数。<br>第二行包含N个用空格分隔的整数，其中第i个数字表示数列第i项的初始值。<br>接下来M行每行包含3个整数，表示一个操作，具体如下：<br>操作1： 格式：1 x k 含义：将第x个数加上k<br>操作2： 格式：2 x y 含义：输出区间[x,y]内每个数的和</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>输出包含若干行整数，即为所有操作2的结果。</p>
</blockquote>
<ul>
<li><h4 id="输入输出样例-10"><a href="#输入输出样例-10" class="headerlink" title="输入输出样例"></a>输入输出样例</h4></li>
</ul>
<p><strong>输入样例#1：</strong></p>
<blockquote>
<p>5 5<br>1 5 4 2 3<br>1 1 3<br>2 2 5<br>1 3 -1<br>1 4 2<br>2 1 4</p>
</blockquote>
<p><strong>输出样例#1：</strong></p>
<blockquote>
<p>14<br>16</p>
</blockquote>
<ul>
<li><h4 id="说明-10"><a href="#说明-10" class="headerlink" title="说明"></a>说明</h4>时空限制：1000ms,128M<br>数据规模：<br>对于30%的数据：N&lt;=8，M&lt;=10<br>对于70%的数据：N&lt;=10000，M&lt;=10000<br>对于100%的数据：N&lt;=500000，M&lt;=500000<br>样例说明：<br><img src="http://upload-images.jianshu.io/upload_images/8471136-a233ff584744eef0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"><br>故输出结果14、16</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 500005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> a[MAXN],c[MAXN],n,m;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> x&amp;(-x);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	<span class="keyword">while</span>(p&lt;=n) &#123;</div><div class="line">		c[p]+=x;</div><div class="line">		p+=lowbit(p);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> p)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> sum=<span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(p) &#123;</div><div class="line">		sum+=c[p];</div><div class="line">		p-=lowbit(p);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> sum;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> sum(r)-sum(l<span class="number">-1</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]),modify(i,a[i]);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">		<span class="keyword">int</span> id,x,y;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;id,&amp;x,&amp;y);</div><div class="line">		<span class="keyword">if</span>(id==<span class="number">1</span>) modify(x,y); </div><div class="line">		<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,query(x,y));</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><h4 id="题目描述-11"><a href="#题目描述-11" class="headerlink" title="题目描述"></a>题目描述</h4><p>如题，已知一个数列，你需要进行下面两种操作：<br>1.将某区间每一个数数加上x<br>2.求出某一个数的和</p>
</li>
<li><h4 id="输入输出格式-11"><a href="#输入输出格式-11" class="headerlink" title="输入输出格式"></a>输入输出格式</h4></li>
</ul>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>第一行包含两个整数N、M，分别表示该数列数字的个数和操作的总个数。<br>第二行包含N个用空格分隔的整数，其中第i个数字表示数列第i项的初始值。<br>接下来M行每行包含2或4个整数，表示一个操作，具体如下：<br>操作1： 格式：1 x y k 含义：将区间[x,y]内每个数加上k<br>操作2： 格式：2 x 含义：输出第x个数的值</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>输出包含若干行整数，即为所有操作2的结果。</p>
</blockquote>
<ul>
<li><h4 id="输入输出样例-11"><a href="#输入输出样例-11" class="headerlink" title="输入输出样例"></a>输入输出样例</h4></li>
</ul>
<p><strong>输入样例#1：</strong></p>
<blockquote>
<p>5 5<br>1 5 4 2 3<br>1 2 4 2<br>2 3<br>1 1 5 -1<br>1 3 5 7<br>2 4</p>
</blockquote>
<p><strong>输出样例#1：</strong></p>
<blockquote>
<p>6<br>10</p>
</blockquote>
<ul>
<li><h4 id="说明-11"><a href="#说明-11" class="headerlink" title="说明"></a>说明</h4>时空限制：1000ms,128M<br>数据规模：<br>对于30%的数据：N&lt;=8，M&lt;=10<br>对于70%的数据：N&lt;=10000，M&lt;=10000<br>对于100%的数据：N&lt;=500000，M&lt;=500000<br>样例说明：<br><img src="http://upload-images.jianshu.io/upload_images/8471136-b7fd1f06b8cf6aab.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"><br>故输出结果为6、10</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 500000+5</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n,m,pre,c[maxn];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> x&amp;(-x);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">int</span> pos,<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	<span class="keyword">while</span>(pos&lt;=n) &#123;</div><div class="line">		c[pos]+=x;</div><div class="line">		pos+=lowbit(pos);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> pos)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(pos&gt;<span class="number">0</span>) &#123;</div><div class="line">		ans+=c[pos];</div><div class="line">		pos-=lowbit(pos);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ans;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</div><div class="line">		<span class="keyword">int</span> x;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;x);</div><div class="line">		modify(i,x-pre);</div><div class="line">		pre=x;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">while</span>(m--) &#123;</div><div class="line">		<span class="keyword">int</span> id;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;id);</div><div class="line">		<span class="keyword">if</span>(id==<span class="number">1</span>) &#123;</div><div class="line">			<span class="keyword">int</span> l,r,k;</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;l,&amp;r,&amp;k);</div><div class="line">			modify(l,k);</div><div class="line">			modify(r+<span class="number">1</span>,-k);</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			<span class="keyword">int</span> pos;</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;pos);</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,query(pos));</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="线段树"><a href="#线段树" class="headerlink" title="线段树"></a>线段树</h2><ul>
<li><h4 id="题目描述-12"><a href="#题目描述-12" class="headerlink" title="题目描述"></a>题目描述</h4><p>如题，已知一个数列，你需要进行下面两种操作：<br>1.将某区间每一个数加上x<br>2.求出某区间每一个数的和</p>
</li>
<li><h4 id="输入输出格式-12"><a href="#输入输出格式-12" class="headerlink" title="输入输出格式"></a>输入输出格式</h4><p><strong>输入格式：</strong></p>
<blockquote>
<p>第一行包含两个整数N、M，分别表示该数列数字的个数和操作的总个数。<br>第二行包含N个用空格分隔的整数，其中第i个数字表示数列第i项的初始值。<br>接下来M行每行包含3或4个整数，表示一个操作，具体如下：<br>操作1： 格式：1 x y k 含义：将区间[x,y]内每个数加上k<br>操作2： 格式：2 x y 含义：输出区间[x,y]内每个数的和</p>
</blockquote>
</li>
</ul>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>输出包含若干行整数，即为所有操作2的结果。</p>
</blockquote>
<ul>
<li><h4 id="输入输出样例-12"><a href="#输入输出样例-12" class="headerlink" title="输入输出样例"></a>输入输出样例</h4></li>
</ul>
<p><strong>输入样例#1：</strong></p>
<blockquote>
<p>5 5<br>1 5 4 2 3<br>2 2 4<br>1 2 3 2<br>2 3 4<br>1 1 5 1<br>2 1 4</p>
</blockquote>
<p><strong>输出样例#1：</strong></p>
<blockquote>
<p>11<br>8<br>20</p>
</blockquote>
<ul>
<li><h4 id="说明-12"><a href="#说明-12" class="headerlink" title="说明"></a>说明</h4>时空限制：1000ms,128M<br>数据规模：<br>对于30%的数据：N&lt;=8，M&lt;=10<br>对于70%的数据：N&lt;=1000，M&lt;=10000<br>对于100%的数据：N&lt;=100000，M&lt;=100000<br>（数据已经过加强^_^，保证在int64/long long数据范围内）<br>样例说明：<br><img src="http://upload-images.jianshu.io/upload_images/8471136-0b09ea09a9155abd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> lson l,m,rt&lt;&lt;1</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rson m+1,r,rt&lt;&lt;1|1</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 1000005</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">read</span><span class="params">()</span> </span>&#123;</div><div class="line">	ll x=<span class="number">0</span>,f=<span class="number">1</span>;<span class="keyword">char</span> ch=getchar();</div><div class="line">	<span class="keyword">while</span>(ch&lt;<span class="string">'0'</span>||ch&gt;<span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>)f=<span class="number">-1</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch&gt;=<span class="string">'0'</span>&amp;&amp;ch&lt;=<span class="string">'9'</span>)&#123;x=x*<span class="number">10</span>+ch-<span class="string">'0'</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">return</span> x*f;</div><div class="line">&#125;</div><div class="line">ll a[maxn],sum[maxn&lt;&lt;<span class="number">2</span>],col[maxn&lt;&lt;<span class="number">2</span>];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(ll rt)</span> </span>&#123;</div><div class="line">	sum[rt] = sum[rt&lt;&lt;<span class="number">1</span>] + sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">color</span><span class="params">(ll l,ll r,ll rt,ll c)</span> </span>&#123;</div><div class="line">	col[rt]+=c;</div><div class="line">	sum[rt]+=c*(r-l+<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_col</span><span class="params">(ll l,ll r,ll rt)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(col[rt]) &#123;</div><div class="line">		ll m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">		color(lson,col[rt]);</div><div class="line">		color(rson,col[rt]);</div><div class="line">		col[rt]=<span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(ll l,ll r,ll rt)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(l==r) &#123;</div><div class="line">		sum[rt] = a[l];</div><div class="line">		<span class="keyword">return</span> ;</div><div class="line">	&#125;</div><div class="line">	ll m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">	build(lson);</div><div class="line">	build(rson);</div><div class="line">	update(rt);</div><div class="line">&#125;</div><div class="line"><span class="function">ll <span class="title">query</span><span class="params">(ll l,ll r,ll rt,ll L,ll R)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(L&lt;=l &amp;&amp; R&gt;=r)<span class="keyword">return</span> sum[rt];</div><div class="line">	push_col(l,r,rt);</div><div class="line">	ll ret=<span class="number">0</span>;</div><div class="line">	ll m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">	<span class="keyword">if</span>(L&lt;=m) ret+=query(lson,L,R);</div><div class="line">	<span class="keyword">if</span>(m&lt;R) ret+=query(rson,L,R);</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(ll l,ll r,ll rt,ll L,ll R,ll v)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(L&lt;=l &amp;&amp; R&gt;=r) &#123;</div><div class="line">		color(l,r,rt,v);</div><div class="line">		<span class="keyword">return</span> ;</div><div class="line">	&#125;</div><div class="line">	push_col(l,r,rt);</div><div class="line">	ll m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">	<span class="keyword">if</span>(L&lt;=m) modify(lson,L,R,v);</div><div class="line">	<span class="keyword">if</span>(m&lt;R) modify(rson,L,R,v);</div><div class="line">	update(rt);</div><div class="line">&#125;</div><div class="line">ll n,m;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	n=read(),m=read();</div><div class="line">	<span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)a[i]=read();</div><div class="line">	build(<span class="number">1</span>,n,<span class="number">1</span>);</div><div class="line">	<span class="keyword">while</span>(m--) &#123;</div><div class="line">		ll id=read();</div><div class="line">		<span class="keyword">if</span>(id==<span class="number">2</span>) &#123;</div><div class="line">			ll x=read(),y=read();</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,query(<span class="number">1</span>,n,<span class="number">1</span>,x,y));</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span> &#123;</div><div class="line">			ll x=read(),y=read(),z=read();</div><div class="line">			modify(<span class="number">1</span>,n,<span class="number">1</span>,x,y,z);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><h4 id="题目描述-13"><a href="#题目描述-13" class="headerlink" title="题目描述"></a>题目描述</h4><p>如题，已知一个数列，你需要进行下面两种操作：<br>1.将某区间每一个数加上x<br>2.将某区间每一个数乘上x<br>3.求出某区间每一个数的和</p>
</li>
<li><h4 id="输入输出格式-13"><a href="#输入输出格式-13" class="headerlink" title="输入输出格式"></a>输入输出格式</h4></li>
</ul>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>第一行包含三个整数N、M、P，分别表示该数列数字的个数、操作的总个数和模数。<br>第二行包含N个用空格分隔的整数，其中第i个数字表示数列第i项的初始值。<br>接下来M行每行包含3或4个整数，表示一个操作，具体如下：<br>操作1： 格式：1 x y k 含义：将区间[x,y]内每个数乘上k<br>操作2： 格式：2 x y k 含义：将区间[x,y]内每个数加上k<br>操作3： 格式：3 x y 含义：输出区间[x,y]内每个数的和对P取模所得的结果</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>输出包含若干行整数，即为所有操作3的结果。</p>
<ul>
<li><h4 id="输入输出样例-13"><a href="#输入输出样例-13" class="headerlink" title="输入输出样例"></a>输入输出样例</h4></li>
</ul>
</blockquote>
<p><strong>输入样例#1：</strong></p>
<blockquote>
<p>5 5 38<br>1 5 4 2 3<br>2 1 4 1<br>3 2 5<br>1 2 4 2<br>2 3 5 5<br>3 1 4</p>
</blockquote>
<p><strong>输出样例#1：</strong></p>
<blockquote>
<p>17<br>2</p>
</blockquote>
<ul>
<li><h4 id="说明-13"><a href="#说明-13" class="headerlink" title="说明"></a>说明</h4>时空限制：1000ms,128M<br>数据规模：<br>对于30%的数据：N&lt;=8，M&lt;=10<br>对于70%的数据：N&lt;=1000，M&lt;=10000<br>对于100%的数据：N&lt;=100000，M&lt;=100000<br>（数据已经过加强^_^）<br>样例说明：<br><img src="http://upload-images.jianshu.io/upload_images/8471136-f58fc6d668b73b60.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"><br>故输出应为17、2（40 mod 38=2）</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">long</span> <span class="keyword">long</span> maxn=<span class="number">1000000</span>*<span class="number">4</span>+<span class="number">10</span>;</div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> sum[maxn],add[maxn],mul[maxn];</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> root 1,n,1</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ls l,m,o&lt;&lt;1</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rs m+1,r,o&lt;&lt;1|1</span></div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span>&amp; x)</span> </span>&#123;</div><div class="line">	<span class="keyword">char</span> c=getchar();</div><div class="line">	<span class="keyword">long</span> <span class="keyword">long</span> p=<span class="number">1</span>,n=<span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(c&lt;<span class="string">'0'</span>||c&gt;<span class="string">'9'</span>) &#123;</div><div class="line">		<span class="keyword">if</span>(c==<span class="string">'-'</span>)p=<span class="number">-1</span>;</div><div class="line">		c=getchar();</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">while</span>(c&gt;=<span class="string">'0'</span>&amp;&amp;c&lt;=<span class="string">'9'</span>) &#123;</div><div class="line">		n=n*<span class="number">10</span>+c-<span class="string">'0'</span>;</div><div class="line">		c=getchar();</div><div class="line">	&#125;</div><div class="line">	x=p*n;</div><div class="line">&#125;</div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> ql,qr,val;</div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> n,m,MOD;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> o)</span> </span>&#123;</div><div class="line">	sum[o]=(sum[o&lt;&lt;<span class="number">1</span>]+sum[o&lt;&lt;<span class="number">1</span>|<span class="number">1</span>])%MOD;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> o,<span class="keyword">long</span> <span class="keyword">long</span> m)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(add[o]||mul[o]!=<span class="number">1</span>) &#123;</div><div class="line">		<span class="keyword">long</span> <span class="keyword">long</span> ad=add[o],mu=mul[o];</div><div class="line">		sum[o&lt;&lt;<span class="number">1</span>]=(sum[o&lt;&lt;<span class="number">1</span>]*mu+ad*(m-(m&gt;&gt;<span class="number">1</span>)))%MOD;</div><div class="line">		sum[o&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]=(sum[o&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]*mu+ad*(m&gt;&gt;<span class="number">1</span>))%MOD;</div><div class="line">		add[o&lt;&lt;<span class="number">1</span>]=(add[o&lt;&lt;<span class="number">1</span>]*mu+ad)%MOD;</div><div class="line">		add[o&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]=(add[o&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]*mu+ad)%MOD;</div><div class="line">		mul[o&lt;&lt;<span class="number">1</span>]=(mul[o&lt;&lt;<span class="number">1</span>]*mu)%MOD;</div><div class="line">		mul[o&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]=(mul[o&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]*mu)%MOD;</div><div class="line">		add[o]=<span class="number">0</span>;</div><div class="line">		mul[o]=<span class="number">1</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> l,<span class="keyword">long</span> <span class="keyword">long</span> r,<span class="keyword">long</span> <span class="keyword">long</span> o)</span> </span>&#123;</div><div class="line">	add[o]=<span class="number">0</span>;</div><div class="line">	mul[o]=<span class="number">1</span>;</div><div class="line">	<span class="keyword">if</span>(l==r) &#123;</div><div class="line">		read(sum[o]);</div><div class="line">		sum[o]=sum[o]%MOD;</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">long</span> <span class="keyword">long</span> m=l+(r-l)/<span class="number">2</span>;</div><div class="line">	build(ls);</div><div class="line">	build(rs);</div><div class="line">	pushup(o);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">update_plus</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> l,<span class="keyword">long</span> <span class="keyword">long</span> r,<span class="keyword">long</span> <span class="keyword">long</span> o)</span> </span>&#123;</div><div class="line">	pushdown(o,r-l+<span class="number">1</span>);</div><div class="line">	<span class="keyword">if</span>(ql&lt;=l&amp;&amp;r&lt;=qr) &#123;</div><div class="line">		add[o]+=val;</div><div class="line">		add[o]=add[o]%MOD;</div><div class="line">		sum[o]+=(r-l+<span class="number">1</span>)*val;</div><div class="line">		sum[o]=sum[o]%MOD;</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">long</span> <span class="keyword">long</span> m=l+(r-l)/<span class="number">2</span>;</div><div class="line">	<span class="keyword">if</span>(ql&lt;=m)update_plus(ls);</div><div class="line">	<span class="keyword">if</span>(qr&gt;m)update_plus(rs);</div><div class="line">	pushup(o);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">update_mul</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> l,<span class="keyword">long</span> <span class="keyword">long</span> r,<span class="keyword">long</span> <span class="keyword">long</span> o)</span> </span>&#123;</div><div class="line">	pushdown(o,r-l+<span class="number">1</span>);</div><div class="line">	<span class="keyword">if</span>(ql&lt;=l&amp;&amp;r&lt;=qr) &#123;</div><div class="line">		mul[o]=mul[o]*val;</div><div class="line">		mul[o]=mul[o]%MOD;</div><div class="line">		sum[o]=sum[o]*val;</div><div class="line">		sum[o]=sum[o]%MOD;</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">long</span> <span class="keyword">long</span> m=l+(r-l)/<span class="number">2</span>;</div><div class="line">	<span class="keyword">if</span>(ql&lt;=m)update_mul(ls);</div><div class="line">	<span class="keyword">if</span>(qr&gt;m)update_mul(rs);</div><div class="line">	pushup(o);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">query</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> l,<span class="keyword">long</span> <span class="keyword">long</span> r,<span class="keyword">long</span> <span class="keyword">long</span> o)</span> </span>&#123;</div><div class="line">	pushdown(o,r-l+<span class="number">1</span>);</div><div class="line">	<span class="keyword">if</span>(ql&lt;=l&amp;&amp;r&lt;=qr) &#123;</div><div class="line">		<span class="keyword">return</span> sum[o];</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">long</span> <span class="keyword">long</span> m=l+(r-l)/<span class="number">2</span>;</div><div class="line">	<span class="keyword">long</span> <span class="keyword">long</span> ret=<span class="number">0</span>;</div><div class="line">	<span class="keyword">if</span>(ql&lt;=m)ret+=query(ls),ret=ret%MOD;</div><div class="line">	<span class="keyword">if</span>(qr&gt;m)ret+=query(rs),ret=ret%MOD;</div><div class="line">	<span class="keyword">return</span> ret%MOD;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	read(n);</div><div class="line">	read(m);</div><div class="line">	read(MOD);</div><div class="line">	build(root);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">long</span> <span class="keyword">long</span> i=<span class="number">1</span>; i&lt;=m; i++) &#123;</div><div class="line">		<span class="keyword">long</span> <span class="keyword">long</span> op;</div><div class="line">		read(op);</div><div class="line">		<span class="keyword">if</span>(op==<span class="number">1</span>) &#123;</div><div class="line">			read(ql);</div><div class="line">			read(qr);</div><div class="line">			read(val);</div><div class="line">			update_mul(root);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(op==<span class="number">2</span>) &#123;</div><div class="line">			read(ql);</div><div class="line">			read(qr);</div><div class="line">			read(val);</div><div class="line">			update_plus(root);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(op==<span class="number">3</span>) &#123;</div><div class="line">			read(ql);</div><div class="line">			read(qr);</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,query(root)%MOD);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="ST表"><a href="#ST表" class="headerlink" title="ST表"></a>ST表</h2><ul>
<li><h4 id="题目背景-3"><a href="#题目背景-3" class="headerlink" title="题目背景"></a>题目背景</h4><p>这是一道ST表经典题——静态区间最大值<br><strong>请注意最大数据时限只有0.8s，数据强度不低，请务必保证你的每次查询复杂度为O（1）</strong> </p>
</li>
<li><h4 id="题目描述-14"><a href="#题目描述-14" class="headerlink" title="题目描述"></a>题目描述</h4><p>给定一个长度为N的数列，和M次询问，求出每一次询问的区间内数字的最大值。</p>
</li>
<li><h4 id="输入输出格式-14"><a href="#输入输出格式-14" class="headerlink" title="输入输出格式"></a>输入输出格式</h4></li>
</ul>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>第一行包含两个整数N,M，分别表示数列的长度和询问的个数。第二行包含N<br>个整数（记为ai​ ），依次表示数列的第i项。<br>接下来M 行，每行包含两个整数li​,ri​ ，表示查询的区间为[li​,ri​]</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>输出包含M 行，每行一个整数，依次表示每一次询问的结果。</p>
</blockquote>
<h2 id="输入输出样例-14"><a href="#输入输出样例-14" class="headerlink" title="输入输出样例"></a>输入输出样例</h2><p><strong>输入样例#1：</strong></p>
<blockquote>
<p>8 8<br>9 3 1 7 5 6 0 8<br>1 6<br>1 5<br>2 7<br>2 6<br>1 8<br>4 8<br>3 7<br>1 8</p>
</blockquote>
<p><strong>输出样例#1：</strong></p>
<blockquote>
<p>9<br>9<br>7<br>7<br>9<br>8<br>7<br>9</p>
</blockquote>
<ul>
<li><h4 id="说明-14"><a href="#说明-14" class="headerlink" title="说明"></a>说明</h4><img src="http://upload-images.jianshu.io/upload_images/8471136-48c72d5145271757.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 1000005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> x=<span class="number">0</span>,f=<span class="number">1</span>;<span class="keyword">char</span> ch=getchar();</div><div class="line">    <span class="keyword">while</span>(ch&lt;<span class="string">'0'</span> || ch&gt;<span class="string">'9'</span>) &#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>)f=<span class="number">-1</span>;ch=getchar();&#125;</div><div class="line">    <span class="keyword">while</span>(ch&gt;=<span class="string">'0'</span> &amp;&amp; ch&lt;=<span class="string">'9'</span>) &#123;x=x*<span class="number">10</span>+ch-<span class="string">'0'</span>;ch=getchar();&#125;</div><div class="line">    <span class="keyword">return</span> x*f;</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> n,m;</div><div class="line"><span class="keyword">int</span> st[MAXN][<span class="number">30</span>],a[MAXN],log_2[MAXN];</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">ini_st</span><span class="params">()</span> </span>&#123;</div><div class="line">    log_2[<span class="number">1</span>]=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;++i) &#123;</div><div class="line">        log_2[i]=log_2[i<span class="number">-1</span>];</div><div class="line">        <span class="keyword">if</span>((<span class="number">1</span>&lt;&lt;log_2[i]+<span class="number">1</span>)==i)</div><div class="line">            ++log_2[i];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=n;i;--i) &#123;</div><div class="line">        st[i][<span class="number">0</span>]=a[i];</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;(i+(<span class="number">1</span>&lt;&lt;j)<span class="number">-1</span>)&lt;=n;++j)</div><div class="line">            st[i][j]=max(st[i][j<span class="number">-1</span>],st[i+(<span class="number">1</span>&lt;&lt;j<span class="number">-1</span>)][j<span class="number">-1</span>]);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">ask</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> k=log_2[r-l+<span class="number">1</span>];</div><div class="line">    <span class="keyword">return</span> max(st[l][k],st[r-(<span class="number">1</span>&lt;&lt;k)+<span class="number">1</span>][k]);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    n=read(),m=read();</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) a[i]=read();</div><div class="line">    ini_st();</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">        <span class="keyword">int</span> l=read(),r=read();</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ask(l,r));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="矩阵快速幂"><a href="#矩阵快速幂" class="headerlink" title="矩阵快速幂"></a>矩阵快速幂</h2><ul>
<li><h4 id="题目背景-4"><a href="#题目背景-4" class="headerlink" title="题目背景"></a>题目背景</h4><p>矩阵快速幂</p>
</li>
<li><h4 id="题目描述-15"><a href="#题目描述-15" class="headerlink" title="题目描述"></a>题目描述</h4><p>给定n*n的矩阵A，求A^k</p>
</li>
<li><h4 id="输入输出格式-15"><a href="#输入输出格式-15" class="headerlink" title="输入输出格式"></a>输入输出格式</h4></li>
</ul>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>第一行，n,k<br>第2至n+1行，每行n个数，第i+1行第j个数表示矩阵第i行第j列的元素</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>输出A^k<br>共n行，每行n个数，第i行第j个数表示矩阵第i行第j列的元素，每个元素模10^9+7</p>
</blockquote>
<ul>
<li><h4 id="输入输出样例-15"><a href="#输入输出样例-15" class="headerlink" title="输入输出样例"></a>输入输出样例</h4></li>
</ul>
<p><strong>输入样例#1：</strong></p>
<blockquote>
<p>2 1<br>1 1<br>1 1</p>
</blockquote>
<p><strong>输出样例#1：</strong></p>
<blockquote>
<p>1 1<br>1 1</p>
</blockquote>
<ul>
<li><h4 id="说明-15"><a href="#说明-15" class="headerlink" title="说明"></a>说明</h4>n&lt;=100, k&lt;=10^12, |矩阵元素|&lt;=1000 算法：矩阵快速幂</li>
</ul>
<p><strong>普通快速幂同理</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 100+5</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> mod 1000000007</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line">ll n,m;</div><div class="line"><span class="keyword">struct</span> Matrix &#123;</div><div class="line">	ll a[maxn][maxn];</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="built_in">memset</span>(a,<span class="number">0</span>,<span class="keyword">sizeof</span>(a));</div><div class="line">	&#125;</div><div class="line">	Matrix() &#123;</div><div class="line">		<span class="keyword">this</span>-&gt;clear();</div><div class="line">	&#125;</div><div class="line">	Matrix <span class="keyword">operator</span> *(<span class="keyword">const</span> Matrix &amp;b)<span class="keyword">const</span> &#123;</div><div class="line">		Matrix c;</div><div class="line">		<span class="keyword">for</span>(ll i=<span class="number">0</span>; i&lt;n; i++)</div><div class="line">			<span class="keyword">for</span>(ll j=<span class="number">0</span>; j&lt;n; j++) &#123;</div><div class="line">				<span class="keyword">for</span>(ll k=<span class="number">0</span>; k&lt;n; k++) &#123;</div><div class="line">					c.a[i][j]+=a[i][k]*b.a[k][j]%mod;</div><div class="line">					c.a[i][j]%=mod;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line"></div><div class="line">		<span class="keyword">return</span> c;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;;</div><div class="line"><span class="function">Matrix <span class="title">fastm</span><span class="params">(Matrix &amp;x,ll n)</span> </span>&#123;</div><div class="line">	Matrix ret,k;</div><div class="line">	k=x;</div><div class="line">	ret=x;</div><div class="line">	n--;</div><div class="line">	<span class="keyword">for</span> (; n; n&gt;&gt;=<span class="number">1</span>,k=k*k)</div><div class="line">		<span class="keyword">if</span> (n&amp;<span class="number">1</span>) ret=ret*k;</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	Matrix x;</div><div class="line">	<span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</div><div class="line">	<span class="keyword">for</span>(ll i=<span class="number">0</span>; i&lt;n; i++)</div><div class="line">		<span class="keyword">for</span>(ll j=<span class="number">0</span>; j&lt;n; j++)</div><div class="line">			<span class="built_in">cin</span>&gt;&gt;x.a[i][j];</div><div class="line">	x=fastm(x,m);</div><div class="line">	<span class="keyword">for</span>(ll i=<span class="number">0</span>; i&lt;n; i++) &#123;</div><div class="line">		<span class="keyword">for</span>(ll j=<span class="number">0</span>; j&lt;n; j++) &#123;</div><div class="line">			<span class="built_in">cout</span>&lt;&lt;x.a[i][j]&lt;&lt;<span class="string">' '</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="线性筛素数"><a href="#线性筛素数" class="headerlink" title="线性筛素数"></a>线性筛素数</h2><ul>
<li><h4 id="题目描述-16"><a href="#题目描述-16" class="headerlink" title="题目描述"></a>题目描述</h4><p>如题，给定一个范围N，你需要处理M个某数字是否为质数的询问（每个数字均在范围1-N内）</p>
</li>
<li><h4 id="输入输出格式-16"><a href="#输入输出格式-16" class="headerlink" title="输入输出格式"></a>输入输出格式</h4></li>
</ul>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>第一行包含两个正整数N、M，分别表示查询的范围和查询的个数。<br>接下来M行每行包含一个不小于1且不大于N的整数，即询问该数是否为质数。</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>输出包含M行，每行为Yes或No，即依次为每一个询问的结果。</p>
</blockquote>
<ul>
<li><h4 id="输入输出样例-16"><a href="#输入输出样例-16" class="headerlink" title="输入输出样例"></a>输入输出样例</h4><strong>输入样例#1：</strong><blockquote>
<p>100 5<br>2<br>3<br>4<br>91<br>97</p>
</blockquote>
</li>
</ul>
<p><strong>输出样例#1：</strong></p>
<blockquote>
<p>Yes<br>Yes<br>No<br>No<br>Yes</p>
</blockquote>
<ul>
<li><h4 id="说明-16"><a href="#说明-16" class="headerlink" title="说明"></a>说明</h4>时空限制：500ms 128M<br>数据规模：<br>对于30%的数据：N&lt;=10000，M&lt;=10000<br>对于100%的数据：N&lt;=10000000，M&lt;=100000<br>样例说明：<br>N=100，说明接下来的询问数均不大于100且不小于1。<br>所以2、3、97为质数，4、91非质数。<br>故依次输出Yes、Yes、No、No、Yes。</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">10000000</span>;</div><div class="line"><span class="keyword">int</span> prime[maxn],n,tot,m;</div><div class="line"><span class="keyword">bool</span> vis[maxn];</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">is_prime</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> k=<span class="built_in">sqrt</span>(x+<span class="number">0.5</span>);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;=k; i++)</div><div class="line">        <span class="keyword">if</span>(x%i==<span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Eratosthenes</span><span class="params">()</span> </span>&#123; </div><div class="line">    <span class="keyword">int</span> m=<span class="built_in">sqrt</span>(n+<span class="number">0.5</span>);</div><div class="line">    vis[<span class="number">1</span>]=<span class="literal">true</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;=m; i++)</div><div class="line">        <span class="keyword">if</span>(vis[i]==<span class="literal">false</span>)</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i*i; j&lt;=n; j+=i)</div><div class="line">                vis[j]=<span class="literal">true</span>;</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetPrime</span><span class="params">()</span> </span>&#123; </div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;=n; i++) &#123;</div><div class="line">        <span class="keyword">if</span>(vis[i]==<span class="literal">false</span>) prime[++tot]=i;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=tot&amp;&amp;i*prime[j]&lt;=n; j++) &#123;</div><div class="line">            vis[i*prime[j]]=<span class="literal">true</span>;</div><div class="line">            <span class="keyword">if</span>(i%prime[j]==<span class="number">0</span>) <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</div><div class="line">    GetPrime();</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=tot; i++)</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>,prime[i]);</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</div><div class="line">    Eratosthenes();</div><div class="line">    <span class="keyword">while</span>(m--) &#123;</div><div class="line">        <span class="keyword">int</span> a;</div><div class="line">        <span class="built_in">cin</span>&gt;&gt;a;</div><div class="line">        <span class="keyword">if</span>(!vis[a]) <span class="built_in">cout</span>&lt;&lt;<span class="string">"Yes"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">        <span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="string">"No"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="乘法逆元"><a href="#乘法逆元" class="headerlink" title="乘法逆元"></a>乘法逆元</h2><ul>
<li><h4 id="题目背景-5"><a href="#题目背景-5" class="headerlink" title="题目背景"></a>题目背景</h4><p>这是一道模板题</p>
</li>
<li><h4 id="题目描述-17"><a href="#题目描述-17" class="headerlink" title="题目描述"></a>题目描述</h4><p>给定n,p求1~n中所有整数在模p意义下的乘法逆元。</p>
</li>
<li><h4 id="输入输出格式-17"><a href="#输入输出格式-17" class="headerlink" title="输入输出格式"></a>输入输出格式</h4></li>
</ul>
<p><strong>输入格式：</strong><br>一行n,p</p>
<p><strong>输出格式：</strong><br>n行,第i行表示i在模p意义下的逆元。</p>
<ul>
<li><h4 id="输入输出样例-17"><a href="#输入输出样例-17" class="headerlink" title="输入输出样例"></a>输入输出样例</h4></li>
</ul>
<p><strong>输入样例#1：</strong><br>10 13</p>
<p><strong>输出样例#1：</strong><br>1<br>7<br>9<br>10<br>8<br>11<br>2<br>5<br>3<br>4</p>
<ul>
<li><h4 id="说明-17"><a href="#说明-17" class="headerlink" title="说明"></a>说明</h4><img src="http://upload-images.jianshu.io/upload_images/8471136-5d361082356f0da5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></li>
</ul>
<p><strong>线性</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 3000010</span></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> inv[N],n,p;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;p;</div><div class="line">    inv[<span class="number">1</span>]=<span class="number">1</span>;</div><div class="line">    <span class="built_in">puts</span>(<span class="string">"1"</span>);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;=n; i++) &#123;</div><div class="line">        inv[i]=(ll)(p-p/i)*inv[p%i]%p;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,inv[i]);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>扩展欧几里得</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">ex_gcd</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> &amp;x,<span class="keyword">int</span> &amp;y)</span> </span>&#123;  </div><div class="line">    <span class="keyword">if</span> (a==<span class="number">0</span>&amp;&amp;b==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">-1</span>;  </div><div class="line">    <span class="keyword">if</span> (b==<span class="number">0</span>)&#123;x=<span class="number">1</span>;y=<span class="number">0</span>;<span class="keyword">return</span> a;&#125;  </div><div class="line">    <span class="keyword">int</span> d=ex_gcd(b,a%b,y,x);  </div><div class="line">    y-=a/b*x;  </div><div class="line">    <span class="keyword">return</span> d;  </div><div class="line">&#125;  </div><div class="line">  </div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">inv</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> n)</span> </span>&#123;  </div><div class="line">    <span class="keyword">int</span> x,y;  </div><div class="line">    <span class="keyword">int</span> d = ex_gcd(a,n,x,y);  </div><div class="line">    <span class="keyword">return</span> (x%n+n)%n;  </div><div class="line">&#125;  </div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> a,p;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;a,&amp;p);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=a;i++)</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,inv(i,p));</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="扩展欧几里得（EXGCD）"><a href="#扩展欧几里得（EXGCD）" class="headerlink" title="扩展欧几里得（EXGCD）"></a>扩展欧几里得（EXGCD）</h2><ul>
<li><h4 id="题目描述-18"><a href="#题目描述-18" class="headerlink" title="题目描述"></a>题目描述</h4><p>求关于 x 的同余方程 ax ≡ 1 (mod b)的最小正整数解。</p>
</li>
<li><h4 id="输入输出格式-18"><a href="#输入输出格式-18" class="headerlink" title="输入输出格式"></a>输入输出格式</h4></li>
</ul>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>输入只有一行，包含两个正整数 a, b，用一个空格隔开。</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>输出只有一行，包含一个正整数 x0，即最小正整数解。输入数据保证一定有解。</p>
</blockquote>
<ul>
<li><h4 id="输入输出样例-18"><a href="#输入输出样例-18" class="headerlink" title="输入输出样例"></a>输入输出样例</h4></li>
</ul>
<p><strong>输入样例#1：</strong></p>
<blockquote>
<p>3 10</p>
</blockquote>
<p><strong>输出样例#1：</strong></p>
<blockquote>
<p>7</p>
</blockquote>
<ul>
<li><h4 id="说明-18"><a href="#说明-18" class="headerlink" title="说明"></a>说明</h4></li>
</ul>
<p>【数据范围】<br>对于 40%的数据，2 ≤b≤ 1,000；<br>对于 60%的数据，2 ≤b≤ 50,000,000；<br>对于 100%的数据，2 ≤a, b≤ 2,000,000,000。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;  </span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt; </span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> a,b,x,y,k;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">exgcd</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(b==<span class="number">0</span>) &#123;</div><div class="line">        x=<span class="number">1</span>;</div><div class="line">        y=<span class="number">0</span>;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    exgcd(b,a%b);</div><div class="line">    k=x;</div><div class="line">    x=y;</div><div class="line">    y=k-a/b*y;</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b;</div><div class="line">    exgcd(a,b);</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;(x+b)%b;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="字符串哈希"><a href="#字符串哈希" class="headerlink" title="字符串哈希"></a>字符串哈希</h2><ul>
<li><h4 id="题目描述-19"><a href="#题目描述-19" class="headerlink" title="题目描述"></a>题目描述</h4><p>如题，给定N个字符串（第i个字符串长度为Mi，字符串内包含数字、大小写字母，大小写敏感），请求出N个字符串中共有多少个不同的字符串。<br><strong>友情提醒：如果真的想好好练习哈希的话，请自觉，否则请右转PJ试炼场:)</strong></p>
</li>
<li><h4 id="输入输出格式-19"><a href="#输入输出格式-19" class="headerlink" title="输入输出格式"></a>输入输出格式</h4></li>
</ul>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>第一行包含一个整数N，为字符串的个数。<br>接下来N行每行包含一个字符串，为所提供的字符串。</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>输出包含一行，包含一个整数，为不同的字符串个数。</p>
</blockquote>
<ul>
<li><h4 id="输入输出样例-19"><a href="#输入输出样例-19" class="headerlink" title="输入输出样例"></a>输入输出样例</h4></li>
</ul>
<p><strong>输入样例#1：</strong></p>
<blockquote>
<p>5<br>abc<br>aaaa<br>abc<br>abcc<br>12345</p>
</blockquote>
<p><strong>输出样例#1：</strong></p>
<blockquote>
<p>4</p>
</blockquote>
<ul>
<li><h4 id="说明-19"><a href="#说明-19" class="headerlink" title="说明"></a>说明</h4>时空限制：1000ms,128M<br>数据规模：<br>对于30%的数据：N&lt;=10，Mi≈6，Mmax&lt;=15;<br>对于70%的数据：N&lt;=1000，Mi≈100，Mmax&lt;=150<br>对于100%的数据：N&lt;=10000，Mi≈1000，Mmax&lt;=1500<br>样例说明：<br>样例中第一个字符串(abc)和第三个字符串(abc)是一样的，所以所提供字符串的集合为{aaaa,abc,abcc,12345}，故共计4个不同的字符串。<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 10005</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> seed 20020207</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ULL unsigned long long</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n;</div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> h[MAXN];</div><div class="line"><span class="built_in">string</span> s[MAXN];</div><div class="line"><span class="function">ULL <span class="title">hash</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</div><div class="line">	ULL value=<span class="number">0</span>;</div><div class="line">	<span class="keyword">int</span> x=<span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++) &#123;</div><div class="line">		value+=s[i]*x*seed;</div><div class="line">		x*=<span class="number">10</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> value;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">		<span class="built_in">cin</span>&gt;&gt;s[i];</div><div class="line">		h[i]=hash(s[i]);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line">	sort(h+<span class="number">1</span>,h+n+<span class="number">1</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">		<span class="keyword">if</span>(h[i]!=h[i+<span class="number">1</span>]) ans++;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>,ans);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="KMP"><a href="#KMP" class="headerlink" title="KMP"></a>KMP</h2><ul>
<li><h4 id="题目描述-20"><a href="#题目描述-20" class="headerlink" title="题目描述"></a>题目描述</h4><p>如题，给出两个字符串s1和s2，其中s2为s1的子串，求出s2在s1中所有出现的位置。<br><strong>为了减少骗分的情况，接下来还要输出子串的前缀数组next。</strong></p>
</li>
<li><h4 id="输入输出格式-20"><a href="#输入输出格式-20" class="headerlink" title="输入输出格式"></a>输入输出格式</h4></li>
</ul>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>第一行为一个字符串，即为s1<br>第二行为一个字符串，即为s2</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>若干行，每行包含一个整数，表示s2在s1中出现的位置<br>接下来1行，包括length(s2)个整数，表示前缀数组next[i]的值。</p>
</blockquote>
<ul>
<li><h4 id="输入输出样例-20"><a href="#输入输出样例-20" class="headerlink" title="输入输出样例"></a>输入输出样例</h4></li>
</ul>
<p><strong>输入样例#1：</strong></p>
<blockquote>
<p>ABABABC<br>ABA</p>
</blockquote>
<p><strong>输出样例#1：</strong><br>1<br>3<br>0 0 1 </p>
<ul>
<li><h4 id="说明-20"><a href="#说明-20" class="headerlink" title="说明"></a>说明</h4>时空限制：1000ms,128M<br>数据规模：<br>设s1长度为N，s2长度为M<br>对于30%的数据：N&lt;=15，M&lt;=5<br>对于70%的数据：N&lt;=10000，M&lt;=100<br>对于100%的数据：N&lt;=1000000，M&lt;=1000000<br>样例说明：<br><img src="http://upload-images.jianshu.io/upload_images/8471136-b58d31dac4ea2596.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"><br>所以两个匹配位置为1和3，输出1、3</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1001</span>;</div><div class="line"><span class="keyword">int</span> Next[maxn];</div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; Ans;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">Get_Next</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> l=s.length(),t;</div><div class="line">    Next[<span class="number">0</span>]=<span class="number">-1</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;l;++i) &#123;</div><div class="line">        t=Next[i<span class="number">-1</span>];</div><div class="line">        <span class="keyword">while</span>(s[t+<span class="number">1</span>]!=s[i]&amp;&amp;t&gt;=<span class="number">0</span>)</div><div class="line">            t=Next[t];</div><div class="line">        <span class="keyword">if</span>(s[t+<span class="number">1</span>]==s[i])</div><div class="line">            Next[i]=t+<span class="number">1</span>;</div><div class="line">        <span class="keyword">else</span></div><div class="line">            Next[i]=<span class="number">-1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">KMP</span><span class="params">(<span class="built_in">string</span> s1,<span class="built_in">string</span> s2)</span> </span>&#123;</div><div class="line">    Get_Next(s2);</div><div class="line">    <span class="keyword">int</span> l1=s1.length();</div><div class="line">    <span class="keyword">int</span> l2=s2.length();</div><div class="line">    <span class="keyword">int</span> i=<span class="number">0</span>,j=<span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span>(j&lt;l1) &#123;</div><div class="line">        <span class="keyword">if</span>(s2[i]==s1[j]) &#123;</div><div class="line">            ++i;++j;</div><div class="line">            <span class="keyword">if</span>(i==l2) &#123;</div><div class="line">                Ans.push_back(j-l2+<span class="number">1</span>);</div><div class="line">                i=Next[i<span class="number">-1</span>]+<span class="number">1</span>;               </div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">if</span>(i==<span class="number">0</span>)</div><div class="line">                j++;</div><div class="line">            <span class="keyword">else</span></div><div class="line">                i=Next[i<span class="number">-1</span>]+<span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="built_in">string</span> s1,s2;</div><div class="line">    <span class="keyword">int</span> l;</div><div class="line">    <span class="built_in">cin</span>&gt;&gt;s1&gt;&gt;s2;</div><div class="line">    l=s2.length();</div><div class="line">    KMP(s1,s2);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;Ans.size();++i)</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,Ans[i]);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;l;++i)</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>,Next[i]+<span class="number">1</span>);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="AC自动机"><a href="#AC自动机" class="headerlink" title="AC自动机"></a>AC自动机</h2><ul>
<li><h4 id="题目背景-6"><a href="#题目背景-6" class="headerlink" title="题目背景"></a>题目背景</h4><p>这是一道简单的AC自动机模板题。<br>用于检测正确性以及算法常数。<br><strong>管理员提示：本题数据内有重复的单词，且重复单词应该计算多次，请各位注意</strong></p>
</li>
<li><h4 id="题目描述-21"><a href="#题目描述-21" class="headerlink" title="题目描述"></a>题目描述</h4><p>给定n个模式串和1个文本串，求有多少个模式串在文本串里出现过。</p>
</li>
<li><h4 id="输入输出格式-21"><a href="#输入输出格式-21" class="headerlink" title="输入输出格式"></a>输入输出格式</h4></li>
</ul>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>第一行一个n，表示模式串个数；<br>下面n行每行一个模式串；<br>下面一行一个文本串。</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>一个数表示答案</p>
</blockquote>
<ul>
<li><h4 id="输入输出样例-21"><a href="#输入输出样例-21" class="headerlink" title="输入输出样例"></a>输入输出样例</h4></li>
</ul>
<p><strong>输入样例#1：</strong></p>
<blockquote>
<p>2<br>a<br>aa<br>aa</p>
</blockquote>
<p><strong>输出样例#1：</strong></p>
<blockquote>
<p>2</p>
</blockquote>
<ul>
<li><h4 id="说明-21"><a href="#说明-21" class="headerlink" title="说明"></a>说明</h4>subtask1[50pts]:∑length(模式串)&lt;=10^6,length(文本串)&lt;=10^6,n=1；<br>subtask2[50pts]:∑length(模式串)&lt;=10^6,length(文本串)&lt;=10^6；</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">struct</span> Trie &#123;</div><div class="line">	<span class="keyword">int</span> ch[<span class="number">26</span>];</div><div class="line">	<span class="keyword">int</span> end;</div><div class="line">	<span class="keyword">int</span> fail;</div><div class="line">&#125;AC[<span class="number">1000000</span>];</div><div class="line"><span class="keyword">int</span> cnt=<span class="number">0</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">index</span><span class="params">(<span class="keyword">char</span> c)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> c-<span class="string">'a'</span>;</div><div class="line">&#125; </div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Build_Trie</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> l=s.length();</div><div class="line">	<span class="keyword">int</span> now=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;l;i++) &#123;</div><div class="line">		<span class="keyword">int</span> id=index(s[i]);</div><div class="line">		<span class="keyword">if</span>(AC[now].ch[id]==<span class="number">0</span>) &#123;</div><div class="line">			AC[now].ch[id]=++cnt;</div><div class="line">		&#125;</div><div class="line">		now=AC[now].ch[id];</div><div class="line">	&#125;</div><div class="line">	AC[now].end++;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Get_fail</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++) &#123;</div><div class="line">		<span class="keyword">if</span>(AC[<span class="number">0</span>].ch[i]!=<span class="number">0</span>) &#123;</div><div class="line">			AC[AC[<span class="number">0</span>].ch[i]].fail=<span class="number">0</span>;</div><div class="line">			q.push(AC[<span class="number">0</span>].ch[i]);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">while</span>(!q.empty()) &#123;</div><div class="line">		<span class="keyword">int</span> u=q.front();</div><div class="line">		q.pop();</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++) &#123;</div><div class="line">			<span class="keyword">if</span>(AC[u].ch[i]!=<span class="number">0</span>) &#123;</div><div class="line">				AC[AC[u].ch[i]].fail=AC[AC[u].fail].ch[i];</div><div class="line">				q.push(AC[u].ch[i]);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">else</span> </div><div class="line">			  AC[u].ch[i]=AC[AC[u].fail].ch[i];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">AC_work</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> l=s.length();</div><div class="line">	<span class="keyword">int</span> now=<span class="number">0</span>,ans=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;l;i++) &#123;</div><div class="line">		now=AC[now].ch[index(s[i])];</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=now;j &amp;&amp; AC[j].end!=<span class="number">-1</span>;j=AC[j].fail) &#123;</div><div class="line">			ans+=AC[j].end;</div><div class="line">			AC[j].end=<span class="number">-1</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ans;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> n;</div><div class="line">	<span class="built_in">string</span> s;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">		<span class="built_in">cin</span>&gt;&gt;s;</div><div class="line">		Build_Trie(s);</div><div class="line">	&#125;</div><div class="line">	Get_fail();</div><div class="line">	<span class="built_in">cin</span>&gt;&gt;s;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>,AC_work(s));</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><h4 id="题目描述-22"><a href="#题目描述-22" class="headerlink" title="题目描述"></a>题目描述</h4><p>有N个由小写字母组成的模式串以及一个文本串 T 。每个模式串可能会在文本串中出现多次。你需要找出<strong>哪些</strong>模式串在文本串 T 中出现的次数最多。</p>
</li>
<li><h4 id="输入输出格式-22"><a href="#输入输出格式-22" class="headerlink" title="输入输出格式"></a>输入输出格式</h4></li>
</ul>
<p><strong>输入格式：</strong></p>
<blockquote>
<p>输入含多组数据。<br>每组数据的第一行为一个正整数 N ，表示共有 N 个模式串， 1≤N≤150 。接下去 N 行，每行一个长度小于等于 70 的模式串。下一行是一个长度小于等于 106 的文本串 T 。<br>输入结束标志为 N=0 。</p>
</blockquote>
<p><strong>输出格式：</strong></p>
<blockquote>
<p>对于每组数据，第一行输出模式串最多出现的次数，接下去若干行每行输出一个出现次数最多的模式串，按输入顺序排列。</p>
</blockquote>
<ul>
<li><h4 id="输入输出样例-22"><a href="#输入输出样例-22" class="headerlink" title="输入输出样例"></a>输入输出样例</h4></li>
</ul>
<p><strong>输入样例#1：</strong></p>
<blockquote>
<p>2<br>aba<br>bab<br>ababababac<br>6<br>beta<br>alpha<br>haha<br>delta<br>dede<br>tata<br>dedeltalphahahahototatalpha<br>0</p>
</blockquote>
<p><strong>输出样例#1：</strong></p>
<blockquote>
<p>4<br>aba<br>2<br>alpha<br>haha</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">struct</span> Tree &#123;</div><div class="line">	<span class="keyword">int</span> fail;</div><div class="line">	<span class="keyword">int</span> vis[<span class="number">26</span>];</div><div class="line">	<span class="keyword">int</span> end;</div><div class="line">&#125; AC[<span class="number">100000</span>];</div><div class="line"><span class="keyword">int</span> cnt;</div><div class="line"><span class="keyword">struct</span> Result &#123;</div><div class="line">	<span class="keyword">int</span> num;</div><div class="line">	<span class="keyword">int</span> pos;</div><div class="line">&#125; Ans[<span class="number">100000</span>];</div><div class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &lt;(Result a,Result b) &#123;</div><div class="line">	<span class="keyword">if</span>(a.num!=b.num)</div><div class="line">		<span class="keyword">return</span> a.num&gt;b.num;</div><div class="line">	<span class="keyword">else</span></div><div class="line">		<span class="keyword">return</span> a.pos&lt;b.pos;</div><div class="line">&#125;</div><div class="line"><span class="built_in">string</span> s[<span class="number">100000</span>];</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">Clean</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	<span class="built_in">memset</span>(AC[x].vis,<span class="number">0</span>,<span class="keyword">sizeof</span>(AC[x].vis));</div><div class="line">	AC[x].fail=<span class="number">0</span>;</div><div class="line">	AC[x].end=<span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">Build</span><span class="params">(<span class="built_in">string</span> s,<span class="keyword">int</span> Num)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> l=s.length();</div><div class="line">	<span class="keyword">int</span> now=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;l; ++i) &#123;</div><div class="line">		<span class="keyword">if</span>(AC[now].vis[s[i]-<span class="string">'a'</span>]==<span class="number">0</span>) &#123;</div><div class="line">			AC[now].vis[s[i]-<span class="string">'a'</span>]=++cnt;</div><div class="line">			Clean(cnt);</div><div class="line">		&#125;</div><div class="line">		now=AC[now].vis[s[i]-<span class="string">'a'</span>];</div><div class="line">	&#125;</div><div class="line">	AC[now].end=Num;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Get_fail</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; Q;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">26</span>; ++i) &#123;</div><div class="line">		<span class="keyword">if</span>(AC[<span class="number">0</span>].vis[i]!=<span class="number">0</span>) &#123;</div><div class="line">			AC[AC[<span class="number">0</span>].vis[i]].fail=<span class="number">0</span>;</div><div class="line">			Q.push(AC[<span class="number">0</span>].vis[i]);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">while</span>(!Q.empty()) &#123;</div><div class="line">		<span class="keyword">int</span> u=Q.front();</div><div class="line">		Q.pop();</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">26</span>; ++i) &#123;</div><div class="line">			<span class="keyword">if</span>(AC[u].vis[i]!=<span class="number">0</span>) &#123;</div><div class="line">				AC[AC[u].vis[i]].fail=AC[AC[u].fail].vis[i];</div><div class="line">				Q.push(AC[u].vis[i]);</div><div class="line">			&#125; <span class="keyword">else</span></div><div class="line">				AC[u].vis[i]=AC[AC[u].fail].vis[i];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">AC_Query</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> l=s.length();</div><div class="line">	<span class="keyword">int</span> now=<span class="number">0</span>,ans=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;l; ++i) &#123;</div><div class="line">		now=AC[now].vis[s[i]-<span class="string">'a'</span>];</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> t=now; t; t=AC[t].fail)</div><div class="line">			Ans[AC[t].end].num++;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ans;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> n;</div><div class="line">	<span class="keyword">while</span>(<span class="number">233</span>) &#123;</div><div class="line">		<span class="built_in">cin</span>&gt;&gt;n;</div><div class="line">		<span class="keyword">if</span>(n==<span class="number">0</span>)<span class="keyword">break</span>;</div><div class="line">		cnt=<span class="number">0</span>;</div><div class="line">		Clean(<span class="number">0</span>);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</div><div class="line">			<span class="built_in">cin</span>&gt;&gt;s[i];</div><div class="line">			Ans[i].num=<span class="number">0</span>;</div><div class="line">			Ans[i].pos=i;</div><div class="line">			Build(s[i],i);</div><div class="line">		&#125;</div><div class="line">		AC[<span class="number">0</span>].fail=<span class="number">0</span>;</div><div class="line">		Get_fail();</div><div class="line">		<span class="built_in">cin</span>&gt;&gt;s[<span class="number">0</span>];</div><div class="line">		AC_Query(s[<span class="number">0</span>]);</div><div class="line">		sort(&amp;Ans[<span class="number">1</span>],&amp;Ans[n+<span class="number">1</span>]);</div><div class="line">		<span class="built_in">cout</span>&lt;&lt;Ans[<span class="number">1</span>].num&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">		<span class="built_in">cout</span>&lt;&lt;s[Ans[<span class="number">1</span>].pos]&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;=n; ++i) &#123;</div><div class="line">			<span class="keyword">if</span>(Ans[i].num==Ans[i<span class="number">-1</span>].num)</div><div class="line">				<span class="built_in">cout</span>&lt;&lt;s[Ans[i].pos]&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">			<span class="keyword">else</span> <span class="keyword">break</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="高精度"><a href="#高精度" class="headerlink" title="高精度"></a>高精度</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iosfwd&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_L 2005 <span class="comment">//最大长度，可以修改</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">class</span> BN &#123;</div><div class="line">    <span class="keyword">public</span>:</div><div class="line">        <span class="keyword">int</span> len, s[MAX_L];<span class="comment">//数的长度，记录数组</span></div><div class="line"><span class="comment">//构造函数</span></div><div class="line">        BN();</div><div class="line">        BN(<span class="keyword">const</span> <span class="keyword">char</span>*);</div><div class="line">        BN(<span class="keyword">int</span>);</div><div class="line">        <span class="keyword">bool</span> sign;<span class="comment">//符号 1正数 0负数</span></div><div class="line">        <span class="function"><span class="built_in">string</span> <span class="title">toStr</span><span class="params">()</span> <span class="keyword">const</span></span>;<span class="comment">//转化为字符串，主要是便于输出</span></div><div class="line">        <span class="keyword">friend</span> istream&amp; <span class="keyword">operator</span>&gt;&gt;(istream &amp;,BN &amp;);<span class="comment">//重载输入流</span></div><div class="line">        <span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream &amp;,BN &amp;);<span class="comment">//重载输出流</span></div><div class="line"><span class="comment">//重载复制</span></div><div class="line">        BN <span class="keyword">operator</span>=(<span class="keyword">const</span> <span class="keyword">char</span>*);</div><div class="line">        BN <span class="keyword">operator</span>=(<span class="keyword">int</span>);</div><div class="line">        BN <span class="keyword">operator</span>=(<span class="keyword">const</span> <span class="built_in">string</span>);</div><div class="line"><span class="comment">//重载各种比较</span></div><div class="line">        <span class="keyword">bool</span> <span class="keyword">operator</span>&gt;(<span class="keyword">const</span> BN &amp;) <span class="keyword">const</span>;</div><div class="line">        <span class="keyword">bool</span> <span class="keyword">operator</span>&gt;=(<span class="keyword">const</span> BN &amp;) <span class="keyword">const</span>;</div><div class="line">        <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> BN &amp;) <span class="keyword">const</span>;</div><div class="line">        <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;=(<span class="keyword">const</span> BN &amp;) <span class="keyword">const</span>;</div><div class="line">        <span class="keyword">bool</span> <span class="keyword">operator</span>==(<span class="keyword">const</span> BN &amp;) <span class="keyword">const</span>;</div><div class="line">        <span class="keyword">bool</span> <span class="keyword">operator</span>!=(<span class="keyword">const</span> BN &amp;) <span class="keyword">const</span>;</div><div class="line"><span class="comment">//重载四则运算</span></div><div class="line">        BN <span class="keyword">operator</span>+(<span class="keyword">const</span> BN &amp;) <span class="keyword">const</span>;</div><div class="line">        BN <span class="keyword">operator</span>++();</div><div class="line">        BN <span class="keyword">operator</span>++(<span class="keyword">int</span>);</div><div class="line">        BN <span class="keyword">operator</span>+=(<span class="keyword">const</span> BN&amp;);</div><div class="line">        BN <span class="keyword">operator</span>-(<span class="keyword">const</span> BN &amp;) <span class="keyword">const</span>;</div><div class="line">        BN <span class="keyword">operator</span>--();</div><div class="line">        BN <span class="keyword">operator</span>--(<span class="keyword">int</span>);</div><div class="line">        BN <span class="keyword">operator</span>-=(<span class="keyword">const</span> BN&amp;);</div><div class="line">        BN <span class="keyword">operator</span>*(<span class="keyword">const</span> BN &amp;)<span class="keyword">const</span>;</div><div class="line">        BN <span class="keyword">operator</span>*(<span class="keyword">const</span> <span class="keyword">int</span> num)<span class="keyword">const</span>;</div><div class="line">        BN <span class="keyword">operator</span>*=(<span class="keyword">const</span> BN&amp;);</div><div class="line">        BN <span class="keyword">operator</span>/(<span class="keyword">const</span> BN&amp;)<span class="keyword">const</span>;</div><div class="line">        BN <span class="keyword">operator</span>/=(<span class="keyword">const</span> BN&amp;);</div><div class="line"><span class="comment">//四则运算的衍生运算</span></div><div class="line">        BN <span class="keyword">operator</span>%(<span class="keyword">const</span> BN&amp;)<span class="keyword">const</span>;<span class="comment">//取模（余数）</span></div><div class="line">        <span class="function">BN <span class="title">factorial</span><span class="params">()</span><span class="keyword">const</span></span>;<span class="comment">//阶乘</span></div><div class="line">        <span class="function">BN <span class="title">Sqrt</span><span class="params">()</span><span class="keyword">const</span></span>;<span class="comment">//整数开根（向下取整）</span></div><div class="line">        <span class="function">BN <span class="title">pow</span><span class="params">(<span class="keyword">const</span> BN&amp;)</span><span class="keyword">const</span></span>;<span class="comment">//次方</span></div><div class="line"><span class="comment">//一些乱乱的函数</span></div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">clean</span><span class="params">()</span></span>;</div><div class="line">        ~BN();</div><div class="line">&#125;;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> max(a,b) a&gt;b ? a : b</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> min(a,b) a&lt;b ? a : b</span></div><div class="line">BN::BN() &#123;</div><div class="line">    <span class="built_in">memset</span>(s, <span class="number">0</span>, <span class="keyword">sizeof</span>(s));</div><div class="line">    len = <span class="number">1</span>;</div><div class="line">    sign = <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line">BN::BN(<span class="keyword">const</span> <span class="keyword">char</span> *num) &#123;</div><div class="line">    *<span class="keyword">this</span> = num;</div><div class="line">&#125;</div><div class="line">BN::BN(<span class="keyword">int</span> num) &#123;</div><div class="line">    *<span class="keyword">this</span> = num;</div><div class="line">&#125;</div><div class="line"><span class="built_in">string</span> BN::toStr() <span class="keyword">const</span> &#123;</div><div class="line">    <span class="built_in">string</span> res;</div><div class="line">    res = <span class="string">""</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</div><div class="line">        res = (<span class="keyword">char</span>)(s[i] + <span class="string">'0'</span>) + res;</div><div class="line">    <span class="keyword">if</span> (res == <span class="string">""</span>)</div><div class="line">        res = <span class="string">"0"</span>;</div><div class="line">    <span class="keyword">if</span> (!sign&amp;&amp;res != <span class="string">"0"</span>)</div><div class="line">        res = <span class="string">"-"</span> + res;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line">istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, BN &amp;num) &#123;</div><div class="line">    <span class="built_in">string</span> str;</div><div class="line">    in&gt;&gt;str;</div><div class="line">    num=str;</div><div class="line">    <span class="keyword">return</span> in;</div><div class="line">&#125;</div><div class="line">ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, BN &amp;num) &#123;</div><div class="line">    out&lt;&lt;num.toStr();</div><div class="line">    <span class="keyword">return</span> out;</div><div class="line">&#125;</div><div class="line">BN BN::<span class="keyword">operator</span>=(<span class="keyword">const</span> <span class="keyword">char</span> *num) &#123;</div><div class="line">    <span class="built_in">memset</span>(s, <span class="number">0</span>, <span class="keyword">sizeof</span>(s));</div><div class="line">    <span class="keyword">char</span> a[MAX_L] = <span class="string">""</span>;</div><div class="line">    <span class="keyword">if</span> (num[<span class="number">0</span>] != <span class="string">'-'</span>)</div><div class="line">        <span class="built_in">strcpy</span>(a, num);</div><div class="line">    <span class="keyword">else</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="built_in">strlen</span>(num); i++)</div><div class="line">            a[i - <span class="number">1</span>] = num[i];</div><div class="line">    sign = !(num[<span class="number">0</span>] == <span class="string">'-'</span>);</div><div class="line">    len = <span class="built_in">strlen</span>(a);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">strlen</span>(a); i++)</div><div class="line">        s[i] = a[len - i - <span class="number">1</span>] - <span class="number">48</span>;</div><div class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</div><div class="line">&#125;</div><div class="line">BN BN::<span class="keyword">operator</span>=(<span class="keyword">int</span> num) &#123;</div><div class="line">    <span class="keyword">char</span> temp[MAX_L];</div><div class="line">    <span class="built_in">sprintf</span>(temp, <span class="string">"%d"</span>, num);</div><div class="line">    *<span class="keyword">this</span> = temp;</div><div class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</div><div class="line">&#125;</div><div class="line">BN BN::<span class="keyword">operator</span>=(<span class="keyword">const</span> <span class="built_in">string</span> num) &#123;</div><div class="line">    <span class="keyword">const</span> <span class="keyword">char</span> *tmp;</div><div class="line">    tmp = num.c_str();</div><div class="line">    *<span class="keyword">this</span> = tmp;</div><div class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">bool</span> BN::<span class="keyword">operator</span>&lt;(<span class="keyword">const</span> BN &amp;num) <span class="keyword">const</span> &#123;</div><div class="line">    <span class="keyword">if</span> (sign^num.sign)</div><div class="line">        <span class="keyword">return</span> num.sign;</div><div class="line">    <span class="keyword">if</span> (len != num.len)</div><div class="line">        <span class="keyword">return</span> len &lt; num.len;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</div><div class="line">        <span class="keyword">if</span> (s[i] != num.s[i])</div><div class="line">            <span class="keyword">return</span> sign ? (s[i] &lt; num.s[i]) : (!(s[i] &lt; num.s[i]));</div><div class="line">    <span class="keyword">return</span> !sign;</div><div class="line">&#125;</div><div class="line"><span class="keyword">bool</span> BN::<span class="keyword">operator</span>&gt;(<span class="keyword">const</span> BN&amp;num)<span class="keyword">const</span> &#123;</div><div class="line">    <span class="keyword">return</span> num &lt; *<span class="keyword">this</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">bool</span> BN::<span class="keyword">operator</span>&lt;=(<span class="keyword">const</span> BN&amp;num)<span class="keyword">const</span> &#123;</div><div class="line">    <span class="keyword">return</span> !(*<span class="keyword">this</span>&gt;num);</div><div class="line">&#125;</div><div class="line"><span class="keyword">bool</span> BN::<span class="keyword">operator</span>&gt;=(<span class="keyword">const</span> BN&amp;num)<span class="keyword">const</span> &#123;</div><div class="line">    <span class="keyword">return</span> !(*<span class="keyword">this</span>&lt;num);</div><div class="line">&#125;</div><div class="line"><span class="keyword">bool</span> BN::<span class="keyword">operator</span>!=(<span class="keyword">const</span> BN&amp;num)<span class="keyword">const</span> &#123;</div><div class="line">    <span class="keyword">return</span> *<span class="keyword">this</span> &gt; num || *<span class="keyword">this</span> &lt; num;</div><div class="line">&#125;</div><div class="line"><span class="keyword">bool</span> BN::<span class="keyword">operator</span>==(<span class="keyword">const</span> BN&amp;num)<span class="keyword">const</span> &#123;</div><div class="line">    <span class="keyword">return</span> !(num != *<span class="keyword">this</span>);</div><div class="line">&#125;</div><div class="line">BN BN::<span class="keyword">operator</span>+(<span class="keyword">const</span> BN &amp;num) <span class="keyword">const</span> &#123;</div><div class="line">    <span class="keyword">if</span> (sign^num.sign) &#123;</div><div class="line">        BN tmp = sign ? num : *<span class="keyword">this</span>;</div><div class="line">        tmp.sign = <span class="number">1</span>;</div><div class="line">        <span class="keyword">return</span> sign ? *<span class="keyword">this</span> - tmp : num - tmp;</div><div class="line">    &#125;</div><div class="line">    BN result;</div><div class="line">    result.len = <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> temp = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; temp || i &lt; (max(len, num.len)); i++) &#123;</div><div class="line">        <span class="keyword">int</span> t = s[i] + num.s[i] + temp;</div><div class="line">        result.s[result.len++] = t % <span class="number">10</span>;</div><div class="line">        temp = t / <span class="number">10</span>;</div><div class="line">    &#125;</div><div class="line">    result.sign = sign;</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">&#125;</div><div class="line">BN BN::<span class="keyword">operator</span>++() &#123;</div><div class="line">    *<span class="keyword">this</span> = *<span class="keyword">this</span> + <span class="number">1</span>;</div><div class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</div><div class="line">&#125;</div><div class="line">BN BN::<span class="keyword">operator</span>++(<span class="keyword">int</span>) &#123;</div><div class="line">    BN old = *<span class="keyword">this</span>;</div><div class="line">    ++(*<span class="keyword">this</span>);</div><div class="line">    <span class="keyword">return</span> old;</div><div class="line">&#125;</div><div class="line">BN BN::<span class="keyword">operator</span>+=(<span class="keyword">const</span> BN &amp;num) &#123;</div><div class="line">    *<span class="keyword">this</span> = *<span class="keyword">this</span> + num;</div><div class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</div><div class="line">&#125;</div><div class="line">BN BN::<span class="keyword">operator</span>-(<span class="keyword">const</span> BN &amp;num) <span class="keyword">const</span> &#123;</div><div class="line">    BN b=num,a=*<span class="keyword">this</span>;</div><div class="line">    <span class="keyword">if</span> (!num.sign &amp;&amp; !sign) &#123;</div><div class="line">        b.sign=<span class="number">1</span>;</div><div class="line">        a.sign=<span class="number">1</span>;</div><div class="line">        <span class="keyword">return</span> b-a;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (!b.sign) &#123;</div><div class="line">        b.sign=<span class="number">1</span>;</div><div class="line">        <span class="keyword">return</span> a+b;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (!a.sign) &#123;</div><div class="line">        a.sign=<span class="number">1</span>;</div><div class="line">        b=BN(<span class="number">0</span>)-(a+b);</div><div class="line">        <span class="keyword">return</span> b;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (a&lt;b) &#123;</div><div class="line">        BN c=(b-a);</div><div class="line">        c.sign=<span class="literal">false</span>;</div><div class="line">        <span class="keyword">return</span> c;</div><div class="line">    &#125;</div><div class="line">    BN result;</div><div class="line">    result.len = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, g = <span class="number">0</span>; i &lt; a.len; i++) &#123;</div><div class="line">        <span class="keyword">int</span> x = a.s[i] - g;</div><div class="line">        <span class="keyword">if</span> (i &lt; b.len) x -= b.s[i];</div><div class="line">        <span class="keyword">if</span> (x &gt;= <span class="number">0</span>) g = <span class="number">0</span>;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            g = <span class="number">1</span>;</div><div class="line">            x += <span class="number">10</span>;</div><div class="line">        &#125;</div><div class="line">        result.s[result.len++] = x;</div><div class="line">    &#125;</div><div class="line">    result.clean();</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">&#125;</div><div class="line">BN BN::<span class="keyword">operator</span> * (<span class="keyword">const</span> BN &amp;num)<span class="keyword">const</span> &#123;</div><div class="line">    BN result;</div><div class="line">    result.len = len + num.len;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; num.len; j++)</div><div class="line">            result.s[i + j] += s[i] * num.s[j];</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; result.len; i++) &#123;</div><div class="line">        result.s[i + <span class="number">1</span>] += result.s[i] / <span class="number">10</span>;</div><div class="line">        result.s[i] %= <span class="number">10</span>;</div><div class="line">    &#125;</div><div class="line">    result.clean();</div><div class="line">    result.sign = !(sign^num.sign);</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">&#125;</div><div class="line">BN BN::<span class="keyword">operator</span>*(<span class="keyword">const</span> <span class="keyword">int</span> num)<span class="keyword">const</span> &#123;</div><div class="line">    BN x = num;</div><div class="line">    BN z = *<span class="keyword">this</span>;</div><div class="line">    <span class="keyword">return</span> x*z;</div><div class="line">&#125;</div><div class="line">BN BN::<span class="keyword">operator</span>*=(<span class="keyword">const</span> BN&amp;num) &#123;</div><div class="line">    *<span class="keyword">this</span> = *<span class="keyword">this</span> * num;</div><div class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</div><div class="line">&#125;</div><div class="line">BN BN::<span class="keyword">operator</span> /(<span class="keyword">const</span> BN&amp;num)<span class="keyword">const</span> &#123;</div><div class="line">    BN ans;</div><div class="line">    ans.len = len - num.len + <span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span> (ans.len &lt; <span class="number">0</span>) &#123;</div><div class="line">        ans.len = <span class="number">1</span>;</div><div class="line">        <span class="keyword">return</span> ans;</div><div class="line">    &#125;</div><div class="line">    BN divisor = *<span class="keyword">this</span>, divid = num;</div><div class="line">    divisor.sign = divid.sign = <span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span> k = ans.len - <span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span> j = len - <span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span> (k &gt;= <span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">while</span> (divisor.s[j] == <span class="number">0</span>) j--;</div><div class="line">        <span class="keyword">if</span> (k &gt; j) k = j;</div><div class="line">        <span class="keyword">char</span> z[MAX_L];</div><div class="line">        <span class="built_in">memset</span>(z, <span class="number">0</span>, <span class="keyword">sizeof</span>(z));</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = j; i &gt;= k; i--)</div><div class="line">            z[j - i] = divisor.s[i] + <span class="string">'0'</span>;</div><div class="line">        BN dividend = z;</div><div class="line">        <span class="keyword">if</span> (dividend &lt; divid) &#123;</div><div class="line">            k--;</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> key = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span> (divid*key &lt;= dividend) key++;</div><div class="line">        key--;</div><div class="line">        ans.s[k] = key;</div><div class="line">        BN temp = divid*key;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; i++)</div><div class="line">            temp = temp * <span class="number">10</span>;</div><div class="line">        divisor = divisor - temp;</div><div class="line">        k--;</div><div class="line">    &#125;</div><div class="line">    ans.clean();</div><div class="line">    ans.sign = !(sign^num.sign);</div><div class="line">    <span class="keyword">return</span> ans;</div><div class="line">&#125;</div><div class="line">BN BN::<span class="keyword">operator</span>/=(<span class="keyword">const</span> BN&amp;num) &#123;</div><div class="line">    *<span class="keyword">this</span> = *<span class="keyword">this</span> / num;</div><div class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</div><div class="line">&#125;</div><div class="line">BN BN::<span class="keyword">operator</span>%(<span class="keyword">const</span> BN&amp; num)<span class="keyword">const</span> &#123;</div><div class="line">    BN a = *<span class="keyword">this</span>, b = num;</div><div class="line">    a.sign = b.sign = <span class="number">1</span>;</div><div class="line">    BN result, temp = a / b*b;</div><div class="line">    result = a - temp;</div><div class="line">    result.sign = sign;</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">&#125;</div><div class="line">BN BN::<span class="built_in">pow</span>(<span class="keyword">const</span> BN&amp; num)<span class="keyword">const</span> &#123;</div><div class="line">    BN result = <span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span> (BN i = <span class="number">0</span>; i &lt; num; i++)</div><div class="line">        result = result*(*<span class="keyword">this</span>);</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">&#125;</div><div class="line">BN BN::factorial()<span class="keyword">const</span> &#123;</div><div class="line">    BN result = <span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span> (BN i = <span class="number">1</span>; i &lt;= *<span class="keyword">this</span>; i++)</div><div class="line">        result *= i;</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">&#125;</div><div class="line"><span class="keyword">void</span> BN::clean() &#123;</div><div class="line">    <span class="keyword">if</span> (len == <span class="number">0</span>) len++;</div><div class="line">    <span class="keyword">while</span> (len &gt; <span class="number">1</span> &amp;&amp; s[len - <span class="number">1</span>] == <span class="string">'\0'</span>)</div><div class="line">        len--;</div><div class="line">&#125;</div><div class="line">BN BN::Sqrt()<span class="keyword">const</span> &#123;</div><div class="line">    <span class="keyword">if</span>(*<span class="keyword">this</span>&lt;<span class="number">0</span>)<span class="keyword">return</span> <span class="number">-1</span>;</div><div class="line">    <span class="keyword">if</span>(*<span class="keyword">this</span>&lt;=<span class="number">1</span>)<span class="keyword">return</span> *<span class="keyword">this</span>;</div><div class="line">    BN l=<span class="number">0</span>,r=*<span class="keyword">this</span>,mid;</div><div class="line">    <span class="keyword">while</span>(r-l&gt;<span class="number">1</span>) &#123;</div><div class="line">        mid=(l+r)/<span class="number">2</span>;</div><div class="line">        <span class="keyword">if</span>(mid*mid&gt;*<span class="keyword">this</span>)</div><div class="line">            r=mid;</div><div class="line">        <span class="keyword">else</span></div><div class="line">            l=mid;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> l;</div><div class="line">&#125;</div><div class="line">BN::~BN() &#123;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> <span class="number">0</span>;&#125;</div></pre></td></tr></table></figure>
<hr>
<p><strong>目前想到的只有这些啦</strong><br><del>如果有遗漏考场上现yy吧</del></p>
<p><strong>预祝NOIp2017 RP++ 頑張って！</strong><br><del>flag：拿了1=我就女装给你们看</del></p>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sukixj.github.io/2017/11/03/qbkqccd7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuki">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/03/qbkqccd7/" itemprop="url">清北考前冲刺Day7</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-11-03T22:37:01+08:00">
                2017-11-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>Last day sprint</strong></p>
<h2 id="上午"><a href="#上午" class="headerlink" title="上午"></a>上午</h2><p><strong>期望得分：100+60+0=160</strong><br><strong>实际得分：60+40+0=100</strong></p>
<h3 id="纸牌"><a href="#纸牌" class="headerlink" title="纸牌"></a>纸牌</h3><ul>
<li><h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p>在桌面上放着n张纸牌，每张纸牌有两面，每面都写着一个非负整数。你的邪王真眼可以看到所有牌朝上的一面和朝下的一面写的数字。现在你需要将一些牌翻过来，使得所有牌朝上的一面中，至少有一半（≥n/2）的数字是一样的。请你求出最少需要翻几张牌，或者判断无解。<br>注意：在翻牌的时候，你不能把牌扔掉，不能偷偷把别的牌放进来，也不能用笔涂改牌上面的数字。</p>
</li>
<li><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>第一行包含一个整数n，表示牌的数量；<br>接下来n行，每行两个非负整数ai, bi，表示每张牌上写的两个数字，ai对应朝上的一面，bi对应朝下的一面。</p>
</li>
<li><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>如果有解，则输出一个整数，表示最少的翻牌次数，否则输出Impossible。</p>
</li>
<li><h4 id="样例输入1"><a href="#样例输入1" class="headerlink" title="样例输入1"></a>样例输入1</h4><p>3<br>1 2<br>2 1<br>3 4</p>
</li>
<li><h4 id="样例输出1"><a href="#样例输出1" class="headerlink" title="样例输出1"></a>样例输出1</h4><p>1</p>
</li>
<li><h4 id="样例解释1"><a href="#样例解释1" class="headerlink" title="样例解释1"></a>样例解释1</h4><p>把第一张牌翻过来，那么就有两个2一个3朝上了，2的数量超过了半数。</p>
</li>
<li><h4 id="样例输入2"><a href="#样例输入2" class="headerlink" title="样例输入2"></a>样例输入2</h4><p>3<br>1 2<br>3 4<br>5 6</p>
</li>
<li><h4 id="样例输出2"><a href="#样例输出2" class="headerlink" title="样例输出2"></a>样例输出2</h4><p>Impossible</p>
</li>
<li><h4 id="样例解释2"><a href="#样例解释2" class="headerlink" title="样例解释2"></a>样例解释2</h4><p>所有数字都只有一个，因此相同的数字数超过半数是不可能的。<br><img src="https://i.loli.net/2017/11/03/59fc5b8baab88.png" alt=""><br><del>破出题人卡 log</del>  <del>谁让他不喜欢STL</del><br>如果这题不卡 log 的话就可以用 map 或者 set 水，我就用的 multiset 然后被卡成了 60。<br>正解离散化一下，然后模拟就好了，注意有坑：牌的正反面可能是相同的。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 1000000007</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 500055</span></div><div class="line"><span class="keyword">int</span> n,i,x,y,top[N*<span class="number">2</span>],bot[N*<span class="number">2</span>],ans,hf,lst,p;</div><div class="line"><span class="keyword">struct</span> T &#123;</div><div class="line">	<span class="keyword">int</span> v, f;</div><div class="line">&#125;;</div><div class="line">T a[N*<span class="number">2</span>];</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmpv</span><span class="params">(<span class="keyword">const</span> T &amp;a, <span class="keyword">const</span> T &amp;b)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> a.v &lt; b.v;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmpf</span><span class="params">(<span class="keyword">const</span> T &amp;a, <span class="keyword">const</span> T &amp;b)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> a.f &lt; b.f;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"card.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"card.out"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a[i*<span class="number">2</span><span class="number">-1</span>].v, &amp;a[i*<span class="number">2</span>].v);</div><div class="line">		a[i*<span class="number">2</span><span class="number">-1</span>].f = i*<span class="number">2</span><span class="number">-1</span>;</div><div class="line">		a[i*<span class="number">2</span>].f = i*<span class="number">2</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">std</span>::sort(a+<span class="number">1</span>, a+n*<span class="number">2</span>+<span class="number">1</span>, cmpv);</div><div class="line">	lst = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=n*<span class="number">2</span>; ++i) &#123;</div><div class="line">		p += (lst!=a[i].v);</div><div class="line">		lst = a[i].v;</div><div class="line">		a[i].v = p;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">std</span>::sort(a+<span class="number">1</span>, a+n*<span class="number">2</span>+<span class="number">1</span>, cmpf);</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</div><div class="line">		x = a[i*<span class="number">2</span><span class="number">-1</span>].v;</div><div class="line">		y = a[i*<span class="number">2</span>].v;</div><div class="line">		++top[x];</div><div class="line">		<span class="keyword">if</span> (x!=y) ++bot[y];</div><div class="line">	&#125;</div><div class="line">	hf = (n+<span class="number">1</span>)/<span class="number">2</span>;</div><div class="line">	ans = inf;</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=p; ++i) &#123;</div><div class="line">		<span class="keyword">if</span> (top[i]+bot[i] &lt; hf) <span class="keyword">continue</span>;</div><div class="line">		<span class="keyword">if</span> (top[i] &gt;= hf) &#123;</div><div class="line">			ans = <span class="number">0</span>;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> (hf-top[i] &lt; ans) ans = hf-top[i];</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (ans == inf) <span class="built_in">printf</span>(<span class="string">"Impossible\n"</span>);</div><div class="line">	<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="后缀数组"><a href="#后缀数组" class="headerlink" title="后缀数组"></a>后缀数组</h3><ul>
<li><h4 id="题目描述-1"><a href="#题目描述-1" class="headerlink" title="题目描述"></a>题目描述</h4>给定一个字符串S，它的长为n，后缀数组的功能是，将其所有后缀按字典序从小到大排好序。我们对其做一点小小的改动：再给定一个数字m，记ssi表示从S的第i位开始、长度最多为m的子串，我们希望将这些字符串{ssi}按字典序从小到大排序。举个栗子，当S=”abcab”，m=2时，ssi的值分别为：<br>  ss1=”ab”<br>  ss2=”bc”<br>  ss3=”ca”<br>  ss4=”ab”<br>  ss5=”b”<br>但是，只是把{ssi}全部排好序还是太简单了。初始状态下，ss1~ssn按顺序排成一行，我们只能通过不断交换某两个相邻字符串的位置来做排序。再举个栗子，把上面提到的ss1~ss5排好序的一种方案是：<br>(0)    原序列：”ab”, “bc”, “ca”, “ab”, “b”<br>(1)    交换第3和第4个串：”ab”, “bc”, “ab”, ca”, “b”<br>(2)    交换第2和第3个串：”ab”, “ab”, “bc”, ca”, “b”<br>(3)    交换第4和第5个串：”ab”, “ab”, “bc”, b”, “ca”<br>(4)    交换第3和第4个串：”ab”, “ab”, “b”, bc”, “ca”<br>现在，你需要求出，最少通过多少次相邻字符串交换，才能把所有子串{ssi}排成字典序从小到大的形式。</li>
</ul>
<p>( ´_ゝ｀)<del>NOIP怎么可能会考后缀数组</del></p>
<ul>
<li><h4 id="输入格式-1"><a href="#输入格式-1" class="headerlink" title="输入格式"></a>输入格式</h4><p>第一行包含两个整数n和m；<br>第二行包含字符串S，它的长为n，只包含小写字母。</p>
</li>
<li><h4 id="输出格式-1"><a href="#输出格式-1" class="headerlink" title="输出格式"></a>输出格式</h4><p>一个整数，表示最少交换次数。</p>
</li>
<li><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>5 2<br>abcab</p>
</li>
<li><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>4</p>
</li>
<li><h4 id="样例解释"><a href="#样例解释" class="headerlink" title="样例解释"></a>样例解释</h4><p>样例就是题目描述中提到的例子。</p>
</li>
<li><h4 id="数据范围"><a href="#数据范围" class="headerlink" title="数据范围"></a>数据范围</h4><p>对于20%的数据，有n≤10;<br>对于40%的数据，有n≤100;<br>对于60%的数据，有n≤5000;<br>另有10%的数据，有m≤5;<br>另有10%的数据，S是随机生成的;<br>对于100%的数据，有1≤m≤n≤50000</p>
</li>
</ul>
<p>好吧这就是一道求逆序对的裸题，但我竟然没想到，n^2 暴力只有40分，<del>可能是我常数太大了吧</del>。求逆序对我们可以用归并排序。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 50005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="built_in">string</span> A[MAXN],T[MAXN];</div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> cnt;</div><div class="line"><span class="keyword">int</span> n,m;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">merge_sort</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(y-x&gt;=<span class="number">1</span>) &#123;</div><div class="line">		<span class="keyword">int</span> m=(y-x)/<span class="number">2</span>+x;</div><div class="line">		<span class="keyword">int</span> p=x,q=m+<span class="number">1</span>,i=x;</div><div class="line">		merge_sort(x,m);</div><div class="line">		merge_sort(m+<span class="number">1</span>,y);</div><div class="line">		<span class="keyword">while</span>(p&lt;=m || q&lt;=y) &#123;</div><div class="line">			<span class="keyword">if</span>(q&gt;y || (p&lt;=m &amp;&amp; A[p]&lt;=A[q])) T[i++]=A[p++];</div><div class="line">			<span class="keyword">else</span> &#123;</div><div class="line">				T[i++]=A[q++];</div><div class="line">				cnt+=m+<span class="number">1</span>-p;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">for</span>(i=x;i&lt;=y;i++) A[i]=T[i];</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">	<span class="built_in">string</span> s;</div><div class="line">	<span class="built_in">cin</span>&gt;&gt;s;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++) A[<span class="number">0</span>]+=s[i];</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++) &#123;</div><div class="line">		A[i]=A[i<span class="number">-1</span>];</div><div class="line">		<span class="keyword">if</span>(i+m<span class="number">-1</span>&lt;n) A[i]+=s[i+m<span class="number">-1</span>];</div><div class="line">		A[i].erase(<span class="number">0</span>,<span class="number">1</span>);</div><div class="line">	&#125;</div><div class="line">	merge_sort(<span class="number">0</span>,n<span class="number">-1</span>);</div><div class="line">	<span class="built_in">cout</span>&lt;&lt;cnt;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="巧克力"><a href="#巧克力" class="headerlink" title="巧克力"></a>巧克力</h2><ul>
<li><h4 id="题目描述-2"><a href="#题目描述-2" class="headerlink" title="题目描述"></a>题目描述</h4><p>有一块分成n<em>m个格子的矩形巧克力，虽然形状上很规整但质量分布并不均匀，每一格有各自的重量，用n</em>m个正整数表示。你需要将这一整块巧克力切成k小块，要求每块都是矩形，且它们的重量分别为a1~ak。一块巧克力的重量等于它包含的所有格子的重量之和。<br>切巧克力的时候，你可以每次选一块大的巧克力，沿着某条格线横向或纵向将其切成两块小的巧克力。切下来的小块巧克力可以继续切割。切割路线不能是折线或斜线。任何时候当前的所有巧克力块都必须是矩形的。<br>对于给定的巧克力和分割要求，请你判断是否存在一个切割方案满足上述要求。</p>
</li>
<li><h4 id="输入格式-2"><a href="#输入格式-2" class="headerlink" title="输入格式"></a>输入格式</h4><p>输入包含多组测试数据。输入文件的第一行包含一个正整数T，表示数据组数；<br>接下来，每组测试数据的第一行包含3个正整数n, m, k，表示巧克力的长、宽以及它需要被切成多少块；<br>接下来n行，每行m个正整数，第i行第j个数wi,j表示巧克力第i行第j列那一格的重量；<br>接下来一行包含k个正整数a1~ak，表示要求切成的每块巧克力的重量。</p>
</li>
<li><h4 id="输出格式-2"><a href="#输出格式-2" class="headerlink" title="输出格式"></a>输出格式</h4><p>输出T行，表示对每组测试数据的判断结果。如果第i组测试数据存在一种切割方案，则在第i行输出”yes”，否则输出”no”。</p>
</li>
<li><h4 id="样例输入-1"><a href="#样例输入-1" class="headerlink" title="样例输入"></a>样例输入</h4><p>2<br>3 3 4<br>1 2 3<br>4 5 6<br>7 8 9<br>12 16 8 9<br>2 2 2<br>1 1<br>1 1<br>1 3</p>
</li>
<li><h4 id="样例输出-1"><a href="#样例输出-1" class="headerlink" title="样例输出"></a>样例输出</h4><p>yes<br>no</p>
</li>
<li><h4 id="样例解释-1"><a href="#样例解释-1" class="headerlink" title="样例解释"></a>样例解释</h4></li>
<li>对于第一组数据，切割方案如下图：<br><img src="https://i.loli.net/2017/11/03/59fc6ffe99c76.png" alt=""><br>对于第二组数据，不存在方案。<br><img src="https://i.loli.net/2017/11/03/59fc703a1f0e0.png" alt=""><br>测试点1、3、5、7、9<br>wi,j=1<br>小数据搜索，大数据状态压缩DP+记忆化搜索<br>F[ i ][ j ][ sta ]表示是否能用 sta 中的巧克力拼出i*j的矩形<br>最终答案为F[ n ][ m ][ 2k - 1 ]<br>转移时枚举横切/竖切，以竖切为例<br>再枚举 sta’，表示 sta’ 中的巧克力被分到左边，其余分到右边<br>根据 sta’ 中的巧克力面积和可以算出左边应该切多长（k）<br>F[ i ][ j ][ sta ] |= (F[ i ][ k ][ sta’ ] &amp;&amp; F[ i ][ j - k ][ sta - sta’ ])<br>j那维在存储时可以省去<br>测试点2、4、6、8、10<br>小数据搜索，大数据状态压缩DP+记忆化搜索<br>F[ i1 ][ i2 ][ j1 ][ j2 ][ sta ] 表示从子矩形( i1 , j1 ) - ( i2 , j2 )中能否刚好切出 sta 中的巧克力<br>最终答案为F[ 1 ][ n ][ 1 ][ m ][ 2k - 1 ]<br>转移时枚举横切/竖切，以竖切为例<br>再枚举 sta’，表示 sta’ 中的巧克力被分到左边，其余分到右边<br>根据 sta’ 中的巧克力面积和可以算出左边应该切多长（k），或者无法切<br>怎么算？二分或枚举<br>转移类似<br>j2 那维在存储时可以省去<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;list&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXK 15</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 11</span></div><div class="line"><span class="keyword">struct</span> Quad &#123;</div><div class="line">	<span class="keyword">int</span> a, b, c, d;</div><div class="line">	Quad(<span class="keyword">int</span> _a, <span class="keyword">int</span> _b, <span class="keyword">int</span> _c, <span class="keyword">int</span> _d): a(_a), b(_b), c(_c), d(_d) &#123;&#125;</div><div class="line">&#125;;</div><div class="line"><span class="built_in">std</span>::<span class="built_in">list</span>&lt;Quad&gt; lf, lfx, lfy;</div><div class="line"><span class="keyword">char</span> f[N][N][N][<span class="number">1</span>&lt;&lt;MAXK],fx[N][N][N][<span class="number">1010</span>],fy[N][N][N][<span class="number">1010</span>];</div><div class="line"><span class="keyword">int</span> sumx[N][N][N],sumy[N][N][N],suma[<span class="number">1</span>&lt;&lt;MAXK],bg[<span class="number">1</span>&lt;&lt;MAXK],ed[<span class="number">1</span>&lt;&lt;MAXK],c[<span class="number">15000000</span>],e[MAXK+<span class="number">1</span>],a[<span class="number">20</span>],</div><div class="line">    n,m,K,i,j,l,r,T,sta,nc,w;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">calcx</span><span class="params">(<span class="keyword">int</span> j1, <span class="keyword">int</span> j2, <span class="keyword">int</span> i1, <span class="keyword">int</span> w)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (fx[j1][j2][i1][w] != <span class="number">0</span>) <span class="keyword">return</span> fx[j1][j2][i1][w];</div><div class="line">	lfx.push_back(Quad(j1,j2,i1,w));</div><div class="line">	<span class="keyword">int</span> l, r, k;</div><div class="line">	l = i1<span class="number">-1</span>;</div><div class="line">	r = n+<span class="number">1</span>;</div><div class="line">	<span class="keyword">while</span> (r-l &gt; <span class="number">1</span>) &#123;</div><div class="line">		k = l+r&gt;&gt;<span class="number">1</span>;</div><div class="line">		<span class="keyword">if</span> (sumx[j1][j2][k]-sumx[j1][j2][i1<span class="number">-1</span>] &lt;= w) l = k;</div><div class="line">		<span class="keyword">else</span> r = k;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (sumx[j1][j2][l]-sumx[j1][j2][i1<span class="number">-1</span>] != w) l = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">return</span> fx[j1][j2][i1][w]=l;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">calcy</span><span class="params">(<span class="keyword">int</span> i1, <span class="keyword">int</span> i2, <span class="keyword">int</span> j1, <span class="keyword">int</span> w)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (fy[i1][i2][j1][w] != <span class="number">0</span>) <span class="keyword">return</span> fy[i1][i2][j1][w];</div><div class="line">	lfy.push_back(Quad(i1,i2,j1,w));</div><div class="line">	<span class="keyword">int</span> l, r, k;</div><div class="line">	l = j1<span class="number">-1</span>;</div><div class="line">	r = m+<span class="number">1</span>;</div><div class="line">	<span class="keyword">while</span> (r-l &gt; <span class="number">1</span>) &#123;</div><div class="line">		k = l+r&gt;&gt;<span class="number">1</span>;</div><div class="line">		<span class="keyword">if</span> (sumy[i1][i2][k]-sumy[i1][i2][j1<span class="number">-1</span>] &lt;= w) l = k;</div><div class="line">		<span class="keyword">else</span> r = k;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (sumy[i1][i2][l]-sumy[i1][i2][j1<span class="number">-1</span>] != w) l = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">return</span> fy[i1][i2][j1][w]=l;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">work</span><span class="params">(<span class="keyword">int</span> i1, <span class="keyword">int</span> i2, <span class="keyword">int</span> j1, <span class="keyword">int</span> j2, <span class="keyword">int</span> sta)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (f[i1][i2][j1][sta] != <span class="number">0</span>) <span class="keyword">return</span> f[i1][i2][j1][sta]==<span class="number">1</span>;</div><div class="line">	<span class="keyword">if</span> (bg[sta] == ed[sta]) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">	lf.push_back(Quad(i1,i2,j1,sta));</div><div class="line">	<span class="keyword">int</span> i, sta2, x, y;</div><div class="line">	<span class="keyword">for</span> (i=bg[sta]; i&lt;ed[sta]; ++i) &#123;</div><div class="line">		sta2 = c[i];</div><div class="line">		x = calcx(j1,j2,i1,suma[sta2]);</div><div class="line">		<span class="keyword">if</span> (x != <span class="number">-1</span>)</div><div class="line">			<span class="keyword">if</span> (work(i1,x,j1,j2,sta2) &amp;&amp; work(x+<span class="number">1</span>,i2,j1,j2,sta-sta2)) &#123;</div><div class="line">				f[i1][i2][j1][sta] = <span class="number">1</span>;</div><div class="line">				<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">			&#125;</div><div class="line">		y = calcy(i1,i2,j1,suma[sta2]);</div><div class="line">		<span class="keyword">if</span> (y != <span class="number">-1</span>)</div><div class="line">			<span class="keyword">if</span> (work(i1,i2,j1,y,sta2) &amp;&amp; work(i1,i2,y+<span class="number">1</span>,j2,sta-sta2)) &#123;</div><div class="line">				f[i1][i2][j1][sta] = <span class="number">1</span>;</div><div class="line">				<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">			&#125;</div><div class="line">	&#125;</div><div class="line">	f[i1][i2][j1][sta] = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> sta, <span class="keyword">int</span> t)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (t == MAXK) &#123;</div><div class="line">		<span class="keyword">if</span> (sta &gt; <span class="number">0</span>) c[nc++] = sta;</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (sta&amp;e[t]) dfs(sta-e[t], t+<span class="number">1</span>);</div><div class="line">	dfs(sta, t+<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"chocolate.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"chocolate.out"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</div><div class="line">	e[<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=MAXK; ++i) e[i] = e[i<span class="number">-1</span>]*<span class="number">2</span>;</div><div class="line">	nc = <span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span> (sta=<span class="number">1</span>; sta&lt;e[MAXK]; ++sta) &#123;</div><div class="line">		bg[sta] = nc;</div><div class="line">		dfs(sta, <span class="number">0</span>);</div><div class="line">		--nc;</div><div class="line">		ed[sta] = nc;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</div><div class="line">	<span class="keyword">while</span> (T--) &#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;n, &amp;m, &amp;K);</div><div class="line">		<span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=n; ++i)</div><div class="line">			<span class="keyword">for</span> (j=<span class="number">1</span>; j&lt;=m; ++j) &#123;</div><div class="line">				<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;w);</div><div class="line">				sumy[i][i][j] = sumy[i][i][j<span class="number">-1</span>]+w;</div><div class="line">				sumx[j][j][i] = sumx[j][j][i<span class="number">-1</span>]+w;</div><div class="line">			&#125;</div><div class="line">		<span class="keyword">for</span> (l=<span class="number">1</span>; l&lt;n; ++l)</div><div class="line">			<span class="keyword">for</span> (r=l+<span class="number">1</span>; r&lt;=n; ++r)</div><div class="line">				<span class="keyword">for</span> (j=<span class="number">1</span>; j&lt;=m; ++j) sumy[l][r][j] = sumy[l][r<span class="number">-1</span>][j]+sumy[r][r][j];</div><div class="line">		<span class="keyword">for</span> (l=<span class="number">1</span>; l&lt;m; ++l)</div><div class="line">			<span class="keyword">for</span> (r=l+<span class="number">1</span>; r&lt;=m; ++r)</div><div class="line">				<span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=n; ++i) sumx[l][r][i] = sumx[l][r<span class="number">-1</span>][i]+sumx[r][r][i];</div><div class="line">		<span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=K; ++i) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</div><div class="line">		<span class="keyword">for</span> (sta=<span class="number">0</span>; sta&lt;e[K]; ++sta) &#123;</div><div class="line">			suma[sta] = <span class="number">0</span>;</div><div class="line">			<span class="keyword">for</span> (i=sta, j=<span class="number">1</span>; i&gt;<span class="number">0</span>; i&gt;&gt;=<span class="number">1</span>, ++j)</div><div class="line">				<span class="keyword">if</span> (i&amp;<span class="number">1</span>) suma[sta] += a[j];</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> (suma[e[K]<span class="number">-1</span>] != sumy[<span class="number">1</span>][n][m]) &#123;</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"no\n"</span>);</div><div class="line">			<span class="keyword">continue</span>;</div><div class="line">		&#125;</div><div class="line">		lf.clear();</div><div class="line">		lfx.clear();</div><div class="line">		lfy.clear();</div><div class="line">		<span class="keyword">if</span> (work(<span class="number">1</span>,n,<span class="number">1</span>,m,e[K]<span class="number">-1</span>)) <span class="built_in">printf</span>(<span class="string">"yes\n"</span>);</div><div class="line">		<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"no\n"</span>);</div><div class="line">		<span class="keyword">for</span> (<span class="built_in">std</span>::<span class="built_in">list</span>&lt;Quad&gt;::iterator it=lf.begin(); it!=lf.end(); ++it) f[it-&gt;a][it-&gt;b][it-&gt;c][it-&gt;d] = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="built_in">std</span>::<span class="built_in">list</span>&lt;Quad&gt;::iterator it=lfx.begin(); it!=lfx.end(); ++it) fx[it-&gt;a][it-&gt;b][it-&gt;c][it-&gt;d] = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="built_in">std</span>::<span class="built_in">list</span>&lt;Quad&gt;::iterator it=lfy.begin(); it!=lfy.end(); ++it) fy[it-&gt;a][it-&gt;b][it-&gt;c][it-&gt;d] = <span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="下午"><a href="#下午" class="headerlink" title="下午"></a>下午</h2><p><strong>期望得分：100+30+10=140</strong><br><strong>实际得分：100+0+0=100</strong></p>
<h2 id="三向城"><a href="#三向城" class="headerlink" title="三向城"></a>三向城</h2><ul>
<li><h4 id="题目描述-3"><a href="#题目描述-3" class="headerlink" title="题目描述"></a>题目描述</h4><p>三向城是一个巨大的城市，之所以叫这个名字，是因为城市中遍布着数不尽的三岔路口。（来自取名力为0的出题人）<br>具体来说，城中有无穷多个路口，每个路口有唯一的一个正整数标号。除了1号路口外，每个路口都连出正好3条道路通向另外3个路口：编号为x（x&gt;1）的路口连出3条道路通向编号为x<em>2，x</em>2+1和x/2（向下取整）的3个路口。1号路口只连出两条道路，分别连向2号和3号路口。<br>所有道路都是可以双向通行的，并且长度都为1。现在，有n个问题：从路口x到路口y的最短路长度是多少？</p>
</li>
<li><h4 id="输入格式-3"><a href="#输入格式-3" class="headerlink" title="输入格式"></a>输入格式</h4><p>第一行包含一个整数n，表示询问数量；<br>接下来n行，每行包含两个正整数x, y，表示询问从路口x到路口y的最短路长度。</p>
</li>
<li><h4 id="输出格式-3"><a href="#输出格式-3" class="headerlink" title="输出格式"></a>输出格式</h4><p>输出n行，每行包含一个整数，表示对每次询问的回答。如果对于某个询问不存在从x到y的路径，则输出-1。</p>
</li>
<li><h4 id="样例输入-2"><a href="#样例输入-2" class="headerlink" title="样例输入"></a>样例输入</h4><p>3<br>5 7<br>2 4<br>1 1</p>
</li>
<li><h4 id="样例输出-2"><a href="#样例输出-2" class="headerlink" title="样例输出"></a>样例输出</h4><p>4<br>1<br>0</p>
</li>
<li><h4 id="样例解释-2"><a href="#样例解释-2" class="headerlink" title="样例解释"></a>样例解释</h4><p>5号路口到7号路口的路径为：5-&gt;2-&gt;1-&gt;3-&gt;7，长度为4；<br>2号路口到4号路口的路径为：2-&gt;4，长度为1；<br>1号路口到本身的路径长度为0；</p>
</li>
<li><h4 id="数据范围-1"><a href="#数据范围-1" class="headerlink" title="数据范围"></a>数据范围</h4><p>对30%的数据，x,y≤20；<br>对60%的数据，x,y≤105，n≤10；<br>对100%的数据，x,y≤109，n≤104。</p>
</li>
</ul>
<p>这题很简单啊，这就是一颗有无限个点的完全二叉树，然后最短路就是随便loglog就出来了，因为最近公共祖先的位置，log返回深度，然后根据情况加加减减就完事了，具体看代码，超级简单。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> n,ans;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"city.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"city.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">	<span class="keyword">while</span>(n--) &#123;</div><div class="line">		<span class="keyword">int</span> x,y;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</div><div class="line">		<span class="keyword">if</span>(x&lt;<span class="number">1</span> || y&lt;<span class="number">1</span>) &#123;</div><div class="line">			<span class="built_in">puts</span>(<span class="string">"-1"</span>);</div><div class="line">			<span class="keyword">continue</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">bool</span> flag=<span class="literal">true</span>;</div><div class="line">		<span class="keyword">if</span>(x&gt;y) swap(x,y);</div><div class="line">		<span class="keyword">int</span> z=y;</div><div class="line">		<span class="keyword">while</span>(z&gt;x) z&gt;&gt;=<span class="number">1</span>;</div><div class="line">		<span class="keyword">if</span>(z==x) flag=<span class="literal">false</span>;</div><div class="line">		<span class="keyword">int</span> a=x;</div><div class="line">		<span class="keyword">while</span>(a!=z) &#123;</div><div class="line">			<span class="keyword">if</span>(a&gt;z) a&gt;&gt;=<span class="number">1</span>;</div><div class="line">			<span class="keyword">if</span>(z&gt;a) z&gt;&gt;=<span class="number">1</span>;</div><div class="line">		&#125; </div><div class="line">		<span class="keyword">if</span>(flag) &#123;</div><div class="line">			ans=(<span class="keyword">int</span>)log2(x)+(<span class="keyword">int</span>)log2(y)<span class="number">-2</span>*(<span class="keyword">int</span>)log2(a);</div><div class="line">		&#125; <span class="keyword">else</span> ans=(<span class="keyword">int</span>)log2(y)-(<span class="keyword">int</span>)log2(x);</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="https://i.loli.net/2017/11/03/59fc74cfc0b48.png" alt=""><br><img src="https://i.loli.net/2017/11/03/59fc74cf89460.png" alt=""><br>对于期望一脸懵逼，暴力都不会打。。</p>
<ul>
<li>测试点1~2<br>n&lt;=10, k=1<br>枚举所有可能的子集选法</li>
<li>测试点3~4<br>n&lt;=100, k=1<br>利用期望的可加性：和的期望=期望的和<br>单独计算每张画纸最后颜色的期望<br>一次作画中，被区间覆盖到的点有1/2概率被选入子集<br>被选入后又有1/c的概率变成各个颜色</li>
<li>测试点5<br>N = 1, Li = Ri，即只有一张画纸<br>动态规划计算K次操作后最后呈现出每种颜色的概率<br>F[ i ][ j ]表示涂色i次后显示颜色j的概率<br>转移时枚举t，表示刷上颜色t<br>F[ i + 1 ][ j * t % c ] += F[ i ][ j ] / c<br>G[ i ][ j ]表示i次被包含在区间里，j次被选中的概率<br>G[ i ][ j ] = C( i , j ) / 2i = (G[ i - 1][ j ] + G[ i - 1][ j - 1 ]) / 2<br>ans = ∑<em>(𝑖=0)^𝐾▒〖∑</em>(𝑗=0)^(𝑐−1)▒𝐹 [𝑖][𝑗]∗𝐺[𝐾][𝑖]∗𝑗〗</li>
<li>测试点6<br>Li = Ri<br>和测试点5基本一样<br>统计每个点被覆盖了几次后用5的方法单独计算</li>
<li>测试点7~10<br>N&lt;=100, k&lt;=100<br>和测试点5~6基本一样<br>和的期望=期望的和<br>无论区间长短，区间内每个被覆盖到的画纸都有1/2的概率被选中上色<br>对每张画纸单独计算，统计被多少个区间覆盖<br>用和之前一样的方法计算每张画纸最后的期望<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> eps 1e-9</span></div><div class="line"><span class="keyword">int</span> k,n,T,i,j,c,K,x,y,mx,cnt[<span class="number">105</span>];</div><div class="line"><span class="keyword">double</span> g[<span class="number">105</span>][<span class="number">105</span>],f[<span class="number">105</span>][<span class="number">105</span>],ans;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"paint.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"paint.out"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</div><div class="line">	g[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;<span class="number">100</span>; ++i)</div><div class="line">		<span class="keyword">for</span> (j=<span class="number">0</span>; j&lt;=i; ++j) &#123;</div><div class="line">			g[i+<span class="number">1</span>][j] += g[i][j]/<span class="number">2.0</span>;</div><div class="line">			g[i+<span class="number">1</span>][j+<span class="number">1</span>] += g[i][j]/<span class="number">2.0</span>;</div><div class="line">		&#125;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;n, &amp;c, &amp;K);</div><div class="line">	mx = <span class="number">0</span>;</div><div class="line">	<span class="built_in">memset</span>(cnt, <span class="number">0</span>, <span class="keyword">sizeof</span> cnt);</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=K; ++i) &#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;x, &amp;y);</div><div class="line">		<span class="keyword">for</span> (j=x; j&lt;=y; ++j) &#123;</div><div class="line">			++cnt[j];</div><div class="line">			<span class="keyword">if</span> (cnt[j] &gt; mx) mx = cnt[j];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">memset</span>(f, <span class="number">0</span>, <span class="keyword">sizeof</span> f);</div><div class="line">	f[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;mx; ++i)</div><div class="line">		<span class="keyword">for</span> (j=<span class="number">0</span>; j&lt;c; ++j)</div><div class="line">			<span class="keyword">if</span> (f[i][j] &gt; eps)</div><div class="line">				<span class="keyword">for</span> (k=<span class="number">0</span>; k&lt;c; ++k) f[i+<span class="number">1</span>][j*k%c] += f[i][j]/c;</div><div class="line">	ans = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=n; ++i)</div><div class="line">		<span class="keyword">for</span> (j=<span class="number">0</span>; j&lt;=cnt[i]; ++j)</div><div class="line">			<span class="keyword">for</span> (k=<span class="number">0</span>; k&lt;c; ++k) ans += g[cnt[i]][j]*f[j][k]*k;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%.3lf\n"</span>, ans);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="https://i.loli.net/2017/11/03/59fc75fe1b1af.png" alt=""><br><img src="https://i.loli.net/2017/11/03/59fc75fdcbc6a.png" alt=""></p>
<ul>
<li>测试点1~3<br>N&lt;=8<br>预处理两两之间的最短路长度<br>枚举按什么顺序收割、播种所有点，再求路线长度</li>
<li>测试点4<br>m = n - 1，且对1 ≤ i ≤ m，保证xi = i - 1，yi = i<br>是一条直线，家和花店在两端<br>最优策略是先收割前半段或后半段的花田<br>总共往返2趟<br>Ans = 4<em>所有道路总长度-2</em>(家到第一个花店的距离+最后一个花田到花店的距离)</li>
<li>测试点5~6<br>m=n-1，且每个花田至多只与另外两个花田有道路相连<br>是一条直线，家和花店不一定在两端<br>最优策略依旧是先收割前半段或后半段的花田<br>总共往返两趟<br>Ans = 所有道路长度<em>4<br>如果起点在端点，ans -= 2</em>家到第一个花田的距离<br>如果终点在端点，ans -= 2*最后一个花田到花店的距离</li>
<li>测试点7~10<br>N&lt;=20<br>状态压缩DP<br>Floyd预处理两两之间最短路，并预处理：<br>F[ i ][ sta ]表示从家开始，当前走到点i，已经走过sta中的点，走过的最短距离是多少<br>G[ i ][ sta ]表示从花店开始，当前走到点i，已经走过sta中的点，走过的最短距离是多少<br>枚举先收割哪些花田，记为A，其余的花田记为B<br>分交货前和交货后两段，单独计算最短距离。以交货前为例：<br>枚举A中最后一个收割的点i、B中第一个收割的点j<br>求min{F[ i ][ A ] + dis( i , j )+G[ j ][ B ]}<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 1000000007</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 24</span></div><div class="line"><span class="keyword">int</span> a[N][N],d[N][N],f[<span class="number">2</span>][N][<span class="number">1050000</span>],e[N],cnt[<span class="number">1050000</span>],n,n1,n2,x,y,z,i,j,m,k,q,ans,sta;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"vanilla.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"vanilla.out"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</div><div class="line">	e[<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=<span class="number">22</span>; ++i) e[i] = e[i<span class="number">-1</span>]&lt;&lt;<span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;e[<span class="number">20</span>]; ++i)</div><div class="line">		<span class="keyword">for</span> (x=i; x!=<span class="number">0</span>; x&gt;&gt;=<span class="number">1</span>) cnt[i] += x&amp;<span class="number">1</span>;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=n; ++i)</div><div class="line">		<span class="keyword">for</span> (j=<span class="number">1</span>; j&lt;=n; ++j) d[i][j] = inf*(i!=j);</div><div class="line">	<span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=m; ++i) &#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;x, &amp;y, &amp;z);</div><div class="line">		++x;</div><div class="line">		++y;</div><div class="line">		<span class="keyword">if</span> (z&lt;d[x][y]) d[x][y] = d[y][x] = z;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> (k=<span class="number">1</span>; k&lt;=n; ++k)</div><div class="line">		<span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=n; ++i)</div><div class="line">			<span class="keyword">for</span> (j=<span class="number">1</span>; j&lt;=n; ++j)</div><div class="line">				<span class="keyword">if</span> (d[i][k]+d[k][j] &lt; d[i][j]) d[i][j] = d[i][k]+d[k][j];</div><div class="line">	<span class="keyword">if</span> (n == <span class="number">3</span>) &#123;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, (d[<span class="number">1</span>][<span class="number">2</span>]+d[<span class="number">2</span>][<span class="number">3</span>])*<span class="number">2</span>);</div><div class="line">		<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line">	n1 = (n<span class="number">-2</span>)/<span class="number">2</span>;</div><div class="line">	n2 = n<span class="number">-2</span>-n1;</div><div class="line">	<span class="keyword">for</span> (q=<span class="number">0</span>; q&lt;=<span class="number">1</span>; ++q) &#123;</div><div class="line">		<span class="keyword">for</span> (i=<span class="number">1</span>; i&lt;=n; ++i)</div><div class="line">			<span class="keyword">for</span> (j=<span class="number">0</span>; j&lt;e[n<span class="number">-2</span>]; ++j) f[q][i][j] = inf;</div><div class="line">		<span class="keyword">if</span> (q == <span class="number">0</span>) &#123;</div><div class="line">			<span class="keyword">for</span> (i=<span class="number">2</span>; i&lt;n; ++i) f[q][i][e[i<span class="number">-2</span>]] = d[<span class="number">1</span>][i];</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			<span class="keyword">for</span> (i=<span class="number">2</span>; i&lt;n; ++i) f[q][i][e[i<span class="number">-2</span>]] = d[n][i];</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">for</span> (j=<span class="number">1</span>; j&lt;e[n<span class="number">-2</span>]; ++j)</div><div class="line">			<span class="keyword">if</span> (cnt[j] &lt; n2)</div><div class="line">				<span class="keyword">for</span> (i=<span class="number">2</span>; i&lt;n; ++i)</div><div class="line">					<span class="keyword">if</span> (f[q][i][j] &lt; inf)</div><div class="line">						<span class="keyword">for</span> (k=<span class="number">2</span>; k&lt;n; ++k)</div><div class="line">							<span class="keyword">if</span> (f[q][i][j]+d[i][k] &lt; f[q][k][j|e[k<span class="number">-2</span>]]) f[q][k][j|e[k<span class="number">-2</span>]] = f[q][i][j]+d[i][k];</div><div class="line">	&#125;</div><div class="line">	ans = inf;</div><div class="line">	<span class="keyword">for</span> (sta=<span class="number">0</span>; sta&lt;e[n<span class="number">-2</span>]; ++sta)</div><div class="line">		<span class="keyword">if</span> (cnt[sta] == n1) &#123;</div><div class="line">			x = inf;</div><div class="line">			<span class="keyword">for</span> (i=<span class="number">2</span>; i&lt;n; ++i)</div><div class="line">				<span class="keyword">if</span> (sta&amp;e[i<span class="number">-2</span>])</div><div class="line">					<span class="keyword">for</span> (j=<span class="number">2</span>; j&lt;n; ++j)</div><div class="line">						<span class="keyword">if</span> (!(sta&amp;e[j<span class="number">-2</span>]))</div><div class="line">							<span class="keyword">if</span> (f[<span class="number">0</span>][i][sta]+d[i][j]+f[<span class="number">1</span>][j][e[n<span class="number">-2</span>]<span class="number">-1</span>-sta] &lt; x) x = f[<span class="number">0</span>][i][sta]+d[i][j]+f[<span class="number">1</span>][j][e[n<span class="number">-2</span>]<span class="number">-1</span>-sta];</div><div class="line">			<span class="keyword">for</span> (i=<span class="number">2</span>; i&lt;n; ++i)</div><div class="line">				<span class="keyword">if</span> (sta&amp;e[i<span class="number">-2</span>])</div><div class="line">					<span class="keyword">for</span> (j=<span class="number">2</span>; j&lt;n; ++j)</div><div class="line">						<span class="keyword">if</span> (!(sta&amp;e[j<span class="number">-2</span>]))</div><div class="line">							<span class="keyword">if</span> (x+f[<span class="number">1</span>][i][sta]+d[i][j]+f[<span class="number">0</span>][j][e[n<span class="number">-2</span>]<span class="number">-1</span>-sta] &lt; ans) ans = x+f[<span class="number">1</span>][i][sta]+d[i][j]+f[<span class="number">0</span>][j][e[n<span class="number">-2</span>]<span class="number">-1</span>-sta];</div><div class="line">		&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<p>The last day is end.<br>这几天的考试，只能说是正常发挥，丢的分不是太多，但还需要稳，这样的话一等奖线是可以到的，但是有很多能突破的点都没有突破出去，经验还是不足啊。<del>或许是时间少？</del> 不管怎么样还是要稳住，一定拿出一等奖！！</p>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sukixj.github.io/2017/11/02/qbkqccd6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuki">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/02/qbkqccd6/" itemprop="url">清北考前冲刺Day6</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-11-02T21:34:01+08:00">
                2017-11-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="上午"><a href="#上午" class="headerlink" title="上午"></a>上午</h2><p><strong>期望得分：100+100+0=200</strong><br><strong>实际得分：100+5+0=105</strong><br><img src="https://i.loli.net/2017/11/02/59fb0a23d90c3.png" alt=""><br><img src="https://i.loli.net/2017/11/02/59fb0a8cc9733.png" alt=""><br>送分题，直接模拟即可。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 1000005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n,a[MAXN];</div><div class="line"><span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; ve[<span class="number">3</span>];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"book.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"book.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</div><div class="line">		<span class="keyword">if</span>(a[i]==<span class="number">5</span>) ve[<span class="number">0</span>].push_back(<span class="number">1</span>);</div><div class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(a[i]==<span class="number">10</span>) &#123;</div><div class="line">			<span class="keyword">if</span>(ve[<span class="number">0</span>].size()) ve[<span class="number">0</span>].pop_back();</div><div class="line">			<span class="keyword">else</span> &#123;</div><div class="line">				<span class="built_in">puts</span>(<span class="string">"NO"</span>);</div><div class="line">				<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">			&#125;</div><div class="line">			ve[<span class="number">1</span>].push_back(<span class="number">1</span>);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(a[i]==<span class="number">20</span>) &#123;</div><div class="line">			<span class="keyword">if</span>(ve[<span class="number">1</span>].size() &amp;&amp; ve[<span class="number">0</span>].size()) &#123;</div><div class="line">				ve[<span class="number">1</span>].pop_back();</div><div class="line">				ve[<span class="number">0</span>].pop_back();</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">else</span> <span class="keyword">if</span>(ve[<span class="number">0</span>].size()&gt;=<span class="number">3</span>) &#123;</div><div class="line">				ve[<span class="number">0</span>].pop_back();</div><div class="line">				ve[<span class="number">0</span>].pop_back();</div><div class="line">				ve[<span class="number">0</span>].pop_back();</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">else</span> &#123;</div><div class="line">				<span class="built_in">puts</span>(<span class="string">"NO"</span>);</div><div class="line">				<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">puts</span>(<span class="string">"YES"</span>);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="https://i.loli.net/2017/11/02/59fb0a8cd8a5b.png" alt=""><br>写着写着就写炸了。。我的方法好蠢啊，如果出口重复就GG了，<del>好吧我也没考虑到</del><br>然后就掉成了5分。。<br><strong>正解就是从后往前来个括号匹配，如果没有被钦定了是出口就试图让它变成入口看看是否合法，否则就是出口，处理完看看是不是符合要求。</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1000007</span>;</div><div class="line"><span class="keyword">int</span> p = <span class="number">0</span>;</div><div class="line"><span class="keyword">int</span> z[maxn],a[maxn],n,m;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"program.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"program.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;=n; i++)</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;m);</div><div class="line">	<span class="keyword">int</span> x;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;=m; i++) &#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;x);</div><div class="line">		<span class="keyword">if</span> (a[x]&gt;<span class="number">0</span>) a[x] = -a[x];</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> x = n; x&gt;=<span class="number">1</span>; x--) &#123;</div><div class="line">		<span class="keyword">if</span> (a[x]&gt;<span class="number">0</span>) &#123;</div><div class="line">			<span class="keyword">if</span> (z[p] == -a[x]) p--;</div><div class="line">			<span class="keyword">else</span> &#123;</div><div class="line">				a[x] = -a[x];</div><div class="line">				p++;</div><div class="line">				z[p]= a[x];</div><div class="line">			&#125;</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			p++;</div><div class="line">			z[p]=a[x];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (p==<span class="number">0</span>) &#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;=n; i++) &#123;</div><div class="line">			<span class="keyword">if</span> (a[i]&gt;<span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">"+%d "</span>,a[i]);</div><div class="line">			<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d "</span>,a[i]);</div><div class="line">		&#125;</div><div class="line">	&#125; <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"NO\n"</span>);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="https://i.loli.net/2017/11/02/59fb0a8cdf419.png" alt=""><br><img src="https://i.loli.net/2017/11/02/59fb0a8cc283b.png" alt=""><br>这道题做出来不存在的。<br>骗分也没成功。<br>正解是在树上进行括号匹配。。<br>f [ i ][ j ][ k ]表示从 i 号点到 j 号点能否以 k 的方式到达。<br>k 表示括号完全匹配或者少一个右括号。<br>代码能看懂算我输。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n,m;</div><div class="line"><span class="keyword">int</span> g[<span class="number">105</span>][<span class="number">105</span>][<span class="number">40</span>],q[<span class="number">105</span>*<span class="number">105</span>*<span class="number">40</span>][<span class="number">3</span>],t,x,y,z;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"maze.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"maze.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">	<span class="built_in">memset</span>(g,<span class="number">0</span>,<span class="keyword">sizeof</span>(g));</div><div class="line">	t = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;=m; i++) &#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;x,&amp;y,&amp;z);</div><div class="line">		<span class="keyword">if</span> (z!=<span class="number">0</span>) &#123;</div><div class="line">			<span class="keyword">if</span> (z&lt;<span class="number">0</span>) z = <span class="built_in">abs</span>(z);</div><div class="line">			<span class="keyword">else</span> z+=<span class="number">10</span>;</div><div class="line">			g[x][y][z] = <span class="number">1</span>;</div><div class="line">			g[y][x][z] = <span class="number">1</span>;</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			g[x][y][z] = <span class="number">1</span>;</div><div class="line">			g[y][x][z] = <span class="number">1</span>;</div><div class="line">			t++;</div><div class="line">			q[t][<span class="number">0</span>] = x;</div><div class="line">			q[t][<span class="number">1</span>] = y;</div><div class="line">			q[t][<span class="number">2</span>] = <span class="number">0</span>;</div><div class="line">			t++;</div><div class="line">			q[t][<span class="number">0</span>] = y;</div><div class="line">			q[t][<span class="number">1</span>] = x;</div><div class="line">			q[t][<span class="number">2</span>] = <span class="number">0</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">1</span>; i&lt;=n; i++) &#123;</div><div class="line">		g[i][i][<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">		t++;</div><div class="line">		q[t][<span class="number">0</span>] = i;</div><div class="line">		q[t][<span class="number">1</span>] = i;</div><div class="line">		q[t][<span class="number">2</span>] = <span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> s = <span class="number">1</span>; s&lt;=t; s++) &#123;</div><div class="line">		<span class="keyword">int</span> x = q[s][<span class="number">0</span>];</div><div class="line">		<span class="keyword">int</span> y = q[s][<span class="number">1</span>];</div><div class="line">		<span class="keyword">int</span> status = q[s][<span class="number">2</span>];</div><div class="line">		<span class="keyword">if</span> (status!=<span class="number">0</span>) &#123;</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;=n; i++)</div><div class="line">				<span class="keyword">if</span> (g[i][x][status<span class="number">-10</span>] == <span class="number">1</span>) &#123;</div><div class="line">					<span class="keyword">if</span> (g[i][y][<span class="number">0</span>] ==<span class="number">0</span>) &#123;</div><div class="line">						g[i][y][<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">						t++;</div><div class="line">						q[t][<span class="number">0</span>] = i;</div><div class="line">						q[t][<span class="number">1</span>] = y;</div><div class="line">						q[t][<span class="number">2</span>] = <span class="number">0</span>;</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">1</span>; i&lt;=n; i++) &#123;</div><div class="line">				<span class="keyword">if</span> (g[i][x][<span class="number">0</span>] ==<span class="number">1</span> &amp;&amp; g[i][y][<span class="number">0</span>] == <span class="number">0</span>) &#123;</div><div class="line">					g[i][y][<span class="number">0</span>] =<span class="number">1</span>;</div><div class="line">					t++;</div><div class="line">					q[t][<span class="number">0</span>]= i;</div><div class="line">					q[t][<span class="number">1</span>] = y;</div><div class="line">					q[t][<span class="number">2</span>]= <span class="number">0</span>;</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">if</span> (g[y][i][<span class="number">0</span>] == <span class="number">1</span> &amp;&amp; g[x][i][<span class="number">0</span>] ==<span class="number">0</span>) &#123;</div><div class="line">					g[x][i][<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">					t++;</div><div class="line">					q[t][<span class="number">0</span>] = x;</div><div class="line">					q[t][<span class="number">1</span>] = i;</div><div class="line">					q[t][<span class="number">2</span>]= <span class="number">0</span>;</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j&lt;=<span class="number">10</span>; j ++) &#123;</div><div class="line">					<span class="keyword">if</span> (g[y][i][j] == <span class="number">1</span> &amp;&amp; g[x][i][j+<span class="number">20</span>] == <span class="number">0</span>) &#123;</div><div class="line">						g[x][i][j+<span class="number">20</span>] = <span class="number">1</span>;</div><div class="line">						t++;</div><div class="line">						q[t][<span class="number">0</span>] = x;</div><div class="line">						q[t][<span class="number">1</span>] = i;</div><div class="line">						q[t][<span class="number">2</span>] = j+<span class="number">20</span>;</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> tt = <span class="number">0</span>;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;tt);</div><div class="line">	<span class="keyword">for</span> (; tt; tt--) &#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</div><div class="line">		<span class="keyword">if</span> (g[x][y][<span class="number">0</span>] ==<span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">"YES\n"</span>);</div><div class="line">		<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"NO\n"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<h2 id="下午"><a href="#下午" class="headerlink" title="下午"></a>下午</h2><p><strong>期望得分：100+？+30=130+</strong><br><strong>实际得分：100+20+30=150</strong><br><img src="https://i.loli.net/2017/11/02/59fb129feef89.png" alt=""><br><img src="https://i.loli.net/2017/11/02/59fb129fd5d01.png" alt=""><br>刚开始没注意 m 的范围，以为很小，就想用一个数组记录下所有的 f [ i ] 值，这个其实很好求，先把 x 二进制分解，他的位数就是我们需要加的 a[ i ] 的范围，因为前面全是零，然后只有 x 二进制位上是 1 才会对答案贡献，那我们就把每个 1 取出来，用 lowbit 求出最后一个 1 ，然后对应加的 a[ i ] 就是 log2( lowbit )，但后来才意会到 m 的范围。。。不可能会用数组存下的。所以就想到了另一个方法：<strong>我们 x 最大是到 m 的，那所有小于 m 的 x 我们都可以取到，因为是求最大值，我们就不可能傻傻的加上一个负数，只考虑正数，如果我们想让答案加上一个正数，x 对应的二进制位就一定是 1 ，如果 m 的某个二进制位上是 1 ，那我们一定可以找到一个 x ，使 x 在 m 的为 1 的二进制位上的数为 0 ，然后它后面的二进制位上的数可以是 0 ，也可以是 1 。那我们就使对应 a[ i ] 是正数时，第 i 个二进制位为 1 。或者使 m 的最高位为 1 。ans=max( a[ m的最高位 ] , 后面正数的和 )。在写代码的时候用一个数组记录出每一个 1 的位置，然后就在每个 1 之间进行操作，总复杂度会是 O（n）的，</strong>具体可以看代码。<del>不开long long见祖宗</del><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 100005</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line">ll n,m,a[MAXN],ans,can[MAXN];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"maximum.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"maximum.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;n);</div><div class="line">	<span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;n;i++) <span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;a[i]);</div><div class="line">	<span class="built_in">string</span> M;</div><div class="line">	<span class="built_in">cin</span>&gt;&gt;M;</div><div class="line">	ll len=M.length(),cnt=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;len;i++) <span class="keyword">if</span>(M[i]==<span class="string">'1'</span>) can[++cnt]=i;</div><div class="line">	ll gg=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=cnt;i++) &#123;</div><div class="line">		<span class="keyword">for</span>(ll j=can[i<span class="number">-1</span>];j&lt;can[i];j++) <span class="keyword">if</span>(a[j]&gt;<span class="number">0</span>) gg+=a[j];</div><div class="line">		ans=max(gg,ans+a[can[i]]);</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%lld"</span>,ans);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>顺便贴一个30分做法<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 100005</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n,a[MAXN],f[MAXN],m,ans;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">lb</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> x&amp;(-x);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">	<span class="built_in">string</span> M;</div><div class="line">	<span class="built_in">cin</span>&gt;&gt;M;</div><div class="line">	<span class="keyword">int</span> len=M.length(),now=<span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++) &#123;</div><div class="line">		m+=(now*(M[i]-<span class="string">'0'</span>));</div><div class="line">		now&lt;&lt;=<span class="number">1</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=m;i++) &#123;</div><div class="line">		<span class="keyword">int</span> j=i;</div><div class="line">		<span class="keyword">while</span>(j) &#123;</div><div class="line">			f[i]+=a[<span class="keyword">int</span>(log2(lb(j)))];</div><div class="line">			j-=lb(j);</div><div class="line">		&#125;</div><div class="line">		ans=max(ans,f[i]);</div><div class="line">	&#125; </div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>,ans);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="https://i.loli.net/2017/11/02/59fb129fd4ceb.png" alt=""><br>二分答案+DP<br>表示我只写了二分答案没写DP。<br>结果挂成了20分。<br>二分两个数之间的差的最大值<br>f [ i ] 表示 i 不改变的最小修改的元素个数<br>f [ i ] = min( f [ j ] + ( i - j - 1) , i - 1 ) abs( A[ j ] - A[ i ] ) &lt; 二分出来的答案*（i - j）<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n,k;</div><div class="line"><span class="keyword">int</span> a[<span class="number">2000</span>],f[<span class="number">2000</span>];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">ok</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	f[<span class="number">1</span>] = <span class="number">0</span>;</div><div class="line">	<span class="keyword">int</span> ans = n;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i&lt;=n; i++) &#123;</div><div class="line">		f[i] = i<span class="number">-1</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j&lt;i; j++)</div><div class="line">			<span class="keyword">if</span> (<span class="built_in">abs</span>(a[i]-a[j])&lt;=((<span class="keyword">long</span> <span class="keyword">long</span>)x*(i-j))) f[i] = min(f[i],f[j]+(i-j<span class="number">-1</span>));</div><div class="line">		ans = min(ans,f[i]+n-i);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ans&lt;=k;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"minimum.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"minimum.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;k);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;=n; i++)</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">	<span class="keyword">int</span> l = <span class="number">0</span>, r = <span class="number">1000000001</span>;</div><div class="line">	<span class="keyword">for</span> (; r-l&gt;<span class="number">1</span>; ) &#123;</div><div class="line">		<span class="keyword">int</span> mid = (l+r)/<span class="number">2</span>;</div><div class="line">		<span class="keyword">if</span> (ok(mid)) r = mid;</div><div class="line">		<span class="keyword">else</span> l = mid;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (ok(l)) <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,l);</div><div class="line">	<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,r);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="https://i.loli.net/2017/11/02/59fb129fd8996.png" alt=""><br>绞尽脑汁只会30分写法。<br>遇到A加y遇到B减x  ，求序列中相等的数的最远距离，分块维护。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">200000</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> len = <span class="number">400</span>;</div><div class="line"><span class="keyword">int</span> n, A, B,m;</div><div class="line"><span class="keyword">int</span> a[maxn],b[maxn],l[maxn],r[maxn],lb[maxn],tot;</div><div class="line"><span class="keyword">int</span> answer[<span class="number">300</span>][<span class="number">300</span>];</div><div class="line"><span class="keyword">int</span> rt[<span class="number">300</span>][maxn], lt[<span class="number">300</span>][maxn],d[maxn];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">0</span>, r = m; l &lt; r;) &#123;</div><div class="line">		<span class="keyword">int</span> mid = (l + r) / <span class="number">2</span>;</div><div class="line">		<span class="keyword">if</span> (b[mid] == x) <span class="keyword">return</span> mid;</div><div class="line">		<span class="keyword">if</span> (b[mid]&gt;x) r = mid;</div><div class="line">		<span class="keyword">else</span> l = mid + <span class="number">1</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">double</span> ti = clock();</div><div class="line">	freopen(<span class="string">"sequence.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"sequence.out"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;n, &amp;A, &amp;B);</div><div class="line">	a[<span class="number">0</span>] = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</div><div class="line">		<span class="keyword">char</span> c;</div><div class="line">		<span class="keyword">for</span> (<span class="built_in">scanf</span>(<span class="string">" %c"</span>, &amp;c); c != <span class="string">'A'</span> &amp;&amp; c != <span class="string">'B'</span>; <span class="built_in">scanf</span>(<span class="string">" %c"</span>, &amp;c));</div><div class="line">		<span class="keyword">if</span> (c == <span class="string">'A'</span>) a[i] = a[i - <span class="number">1</span>] + B;</div><div class="line">		<span class="keyword">else</span> a[i] = a[i - <span class="number">1</span>] - A;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++) b[i] = a[i];</div><div class="line">	sort(b, b + n + <span class="number">1</span>);</div><div class="line">	m = unique(b, b + n + <span class="number">1</span>) - b;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++) &#123;</div><div class="line">		a[i] = find(a[i]);</div><div class="line">		<span class="keyword">if</span> (a[i] == <span class="number">-1</span>) &#123;</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"???\n"</span>);</div><div class="line">			<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	n++;</div><div class="line">	<span class="keyword">int</span> k = n / len;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= k; i++) &#123;</div><div class="line">		<span class="keyword">int</span> ans = <span class="number">0</span>;</div><div class="line">		tot++;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = i*len; j &lt; n; j++) &#123;</div><div class="line">			<span class="keyword">if</span> (j%len == <span class="number">0</span>) &#123;</div><div class="line">				answer[i][j / len] = ans;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">if</span> (lb[a[j]] != tot) &#123;</div><div class="line">				lb[a[j]] = tot;</div><div class="line">				l[a[j]] = j;</div><div class="line">			&#125;</div><div class="line">			ans = max(ans, j - l[a[j]]);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) r[i] = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">		r[a[i]] = i;</div><div class="line">		<span class="keyword">if</span> (i%len == len - <span class="number">1</span>) &#123;</div><div class="line">			<span class="keyword">int</span> tmp = i / len;</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++)</div><div class="line">				rt[tmp][j] = r[j];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) l[i] = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</div><div class="line">		l[a[i]] = i;</div><div class="line">		<span class="keyword">if</span> (i%len == <span class="number">0</span>) &#123;</div><div class="line">			<span class="keyword">int</span> tmp = i / len;</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++)</div><div class="line">				lt[tmp][j] = l[j];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> q;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;q);</div><div class="line">	<span class="keyword">int</span> ans = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (; q; q--) &#123;</div><div class="line">		<span class="keyword">int</span> L, R;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;L, &amp;R);</div><div class="line">		L--;</div><div class="line">		<span class="keyword">int</span> kl = L / len, kr = R / len;</div><div class="line">		ans = <span class="number">0</span>;</div><div class="line">		<span class="keyword">if</span> (kl == kr) &#123;</div><div class="line">			tot++;</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = L; i &lt;= R; i++) &#123;</div><div class="line">				<span class="keyword">if</span> (lb[a[i]] != tot) &#123;</div><div class="line">					lb[a[i]] = tot;</div><div class="line">					l[a[i]] = i;</div><div class="line">				&#125;</div><div class="line">				ans = max(ans, i - l[a[i]]);</div><div class="line">			&#125;</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			ans = answer[kl + <span class="number">1</span>][kr];</div><div class="line">			tot++;</div><div class="line">			<span class="keyword">int</span> tmp = min(n, (kl + <span class="number">1</span>)*len);</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = L; i &lt; tmp; i++) &#123;</div><div class="line">				<span class="keyword">if</span> (lb[a[i]] != tot) &#123;</div><div class="line">					lb[a[i]] = tot;</div><div class="line">					l[a[i]] = i;</div><div class="line">					ans = max(ans, rt[kr - <span class="number">1</span>][a[i]] - i);</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			tmp = min(R + <span class="number">1</span>, n);</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = kr*len; i &lt; tmp; i++) &#123;</div><div class="line">				<span class="keyword">if</span> (lb[a[i]] != tot) &#123;</div><div class="line">					<span class="keyword">if</span> (lt[kl + <span class="number">1</span>][a[i]] != <span class="number">-1</span>) ans = max(ans, i - lt[kl + <span class="number">1</span>][a[i]]);</div><div class="line">				&#125; <span class="keyword">else</span> ans = max(ans, i - l[a[i]]);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p>上午T2炸了，好气呀，<del>不然晚上就有我的奖了</del>，说明自己DEBUG能力还不够啊，明天好好考，争取拿个更高的成绩！</p>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sukixj.github.io/2017/11/01/qbkqccd5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuki">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/01/qbkqccd5/" itemprop="url">清北考前冲刺Day5</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-11-01T20:53:43+08:00">
                2017-11-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="上午"><a href="#上午" class="headerlink" title="上午"></a>上午</h2><p><strong>期望得分：100+60+30=190</strong><br><strong>实际得分：100+60+0=160</strong><br><img src="http://upload-images.jianshu.io/upload_images/8471136-d537e1ad1a792316.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><img src="http://upload-images.jianshu.io/upload_images/8471136-81faced4f028172b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><img src="http://upload-images.jianshu.io/upload_images/8471136-7a2e38beaf5ddc39.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><img src="http://upload-images.jianshu.io/upload_images/8471136-d9641fcdef6f7590.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>答案对于 p 的位置无关，假设 p 是（0,0,0,0,…,0）就好了<br>距离还是要 k ，所以肯定另一个点的坐标有 k 个 1。<br><strong>-&gt; 从n个位置挑出来k个位置放1 -&gt; 组合数 -&gt; C( n , k ) -&gt; 需要取模 -&gt; 逆元</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 1000005</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> mod 1000000007</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function">ll <span class="title">read</span><span class="params">()</span> </span>&#123;</div><div class="line">	ll x=<span class="number">0</span>,f=<span class="number">1</span>;</div><div class="line">	<span class="keyword">char</span> ch=getchar();</div><div class="line">	<span class="keyword">while</span>(ch&lt;<span class="string">'0'</span> || ch&gt;<span class="string">'9'</span>) &#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>)f=<span class="number">-1</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">while</span>(ch&gt;=<span class="string">'0'</span> &amp;&amp; ch&lt;=<span class="string">'9'</span>) &#123;x=x*<span class="number">10</span>+ch-<span class="string">'0'</span>;ch=getchar();&#125;</div><div class="line">	<span class="keyword">return</span> x*f;</div><div class="line">&#125;</div><div class="line">ll n,k;</div><div class="line"><span class="function">ll <span class="title">ex_gcd</span><span class="params">(ll a,ll b,ll &amp;x,ll &amp;y)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(a==<span class="number">0</span>&amp;&amp;b==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">-1</span>;</div><div class="line">	<span class="keyword">if</span>(b==<span class="number">0</span>) &#123;</div><div class="line">		x=<span class="number">1</span>;</div><div class="line">		y=<span class="number">0</span>;</div><div class="line">		<span class="keyword">return</span> a;</div><div class="line">	&#125;</div><div class="line">	ll d=ex_gcd(b,a%b,y,x);</div><div class="line">	y-=a/b*x;</div><div class="line">	<span class="keyword">return</span> d;</div><div class="line">&#125;</div><div class="line"><span class="function">ll <span class="title">inv</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">	ll x,y;</div><div class="line">	ll d=ex_gcd(a,n,x,y);</div><div class="line">	<span class="keyword">return</span> (x%n+n)%n;</div><div class="line">&#125;</div><div class="line"><span class="function">ll <span class="title">calc</span><span class="params">(<span class="keyword">int</span> zz,<span class="keyword">int</span> lzk)</span> </span>&#123;</div><div class="line">	ll ans=<span class="number">1</span>,gg=<span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=lzk+<span class="number">1</span>; i&lt;=zz; i++) ans=(ans*i)%mod;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=zz-lzk; i++) gg=(gg*i)%mod;</div><div class="line">	<span class="keyword">if</span>(gg==<span class="number">1</span>) <span class="keyword">return</span> ans;</div><div class="line">	<span class="keyword">return</span> ans*inv(gg,mod)%mod;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"cube.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"cube.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	n=read(),k=read();</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%lld"</span>,calc(n,k));</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-b92810c17a03f20d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><img src="http://upload-images.jianshu.io/upload_images/8471136-8fcef45044509d63.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><del>60暴力打完走人</del><br>要是只考虑限重的话，其实应该考虑的是原图的最大生成树。<br>最大生成树有一个性质，<strong>任意两点间的边权最小的边一定是连接两点<br>间所有路径中最大的（否则可以替换，使最大生成树变大）。</strong><br>这个题目，其实是求最大生成森林的过程，考虑Kruskal 过程，每合并<br>两个集合，实际上选的这条边是连接两个集合最大的限重。也就是货<br>物重量低于这个值，就可以通过这条边在两个集合之间运输，否则这<br>两个集合就一定至少需要两个仓库。<br><strong>所以整个kruskal 过程，实际上每次是在求，重量低于多少时可以减少<br>一个仓库。于是一开始有n 个仓库，把减少仓库的关键点记下来，对<br>于每个询问二分即可。</strong><br><del>好简单呀</del><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">int</span> n,m,q;</div><div class="line"><span class="keyword">struct</span> N &#123;</div><div class="line">	<span class="keyword">int</span> x,y,z;</div><div class="line">&#125; edge[<span class="number">100005</span>];</div><div class="line"><span class="keyword">int</span> fa[<span class="number">100005</span>];</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(N a,N b)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> a.z&gt;b.z;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> fa[x]==x?x:fa[x]=get(fa[x]);</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> p[<span class="number">100005</span>],cc,w;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"warehouse.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"warehouse.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;n,&amp;m,&amp;q);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; i++) &#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;edge[i].x,&amp;edge[i].y,&amp;edge[i].z);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) fa[i]=i;</div><div class="line">	sort(edge+<span class="number">1</span>,edge+m+<span class="number">1</span>,cmp);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; i++) &#123;</div><div class="line">		<span class="keyword">if</span>(get(edge[i].x)!=get(edge[i].y)) &#123;</div><div class="line">			fa[get(edge[i].x)] = edge[i].y;</div><div class="line">			p[++cc] = edge[i].z;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	assert(cc == n<span class="number">-1</span>);</div><div class="line">	reverse(p+<span class="number">1</span>,p+cc+<span class="number">1</span>);</div><div class="line">	<span class="keyword">while</span>(q--) &#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;w);</div><div class="line">		<span class="keyword">int</span> pos = lower_bound(p,p+cc+<span class="number">1</span>,w)-p;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,pos);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-d7c35fa99f7ec877.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><img src="http://upload-images.jianshu.io/upload_images/8471136-fbacfc55b49ae3a0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>这题我写的是30分暴力呀，<del>可他的数据也太强了吧</del><br>全场除了几个大佬满分没有得部分分的。。<br>首先不好处理的一点是，一个合法的单词有多种拆分方法。<br>可以认为从最后一个合法的位置拆分。<br>但是需要处理。cool , o 这种情况。<br><strong>然后用一个 trie 树进行计数，详见代码，a 数组是长度为 i 的前缀，后<br>面接j 字母不可能还是前缀的数量。b 数组是长度为 i 的前缀，最后一<br>个字母是 j 并且不是词典中的单词的数量。c 数组是长度为 i 的后缀，<br>第一个字母是 j 的数量。</strong><br>合并这三个数组即可。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line">LL mod = <span class="number">1e9</span>+<span class="number">7</span>;</div><div class="line"><span class="keyword">int</span> n,q;</div><div class="line"><span class="keyword">char</span> s[<span class="number">55</span>];</div><div class="line">LL cnt[<span class="number">105</span>];</div><div class="line"><span class="keyword">int</span> a[<span class="number">55</span>][<span class="number">26</span>];</div><div class="line"><span class="keyword">int</span> b[<span class="number">55</span>][<span class="number">26</span>];</div><div class="line"><span class="keyword">int</span> c[<span class="number">55</span>][<span class="number">26</span>];</div><div class="line"><span class="keyword">struct</span> Trie &#123;</div><div class="line">	<span class="keyword">int</span> trie[<span class="number">500050</span>][<span class="number">26</span>];</div><div class="line">	<span class="keyword">int</span> flag[<span class="number">500050</span>];</div><div class="line">	<span class="keyword">int</span> tot;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">char</span> * s)</span> </span>&#123;</div><div class="line">		<span class="keyword">int</span> id = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; s[i]; i++) &#123;</div><div class="line">			<span class="keyword">if</span>(trie[id][s[i]-<span class="string">'a'</span>]) id = trie[id][s[i]-<span class="string">'a'</span>];</div><div class="line">			<span class="keyword">else</span> id = trie[id][s[i]-<span class="string">'a'</span>]=++tot;</div><div class="line">		&#125;</div><div class="line">		flag[id] ++;</div><div class="line">		assert(flag[id] == <span class="number">1</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> l)</span> </span>&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">26</span>; i++) &#123;</div><div class="line">			<span class="keyword">if</span>(trie[x][i] == <span class="number">0</span> &amp;&amp; x) &#123;</div><div class="line">				a[l][i] ++;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">if</span>(trie[x][i] &amp;&amp; x &amp;&amp; !flag[trie[x][i]]) &#123;</div><div class="line">				b[l+<span class="number">1</span>][i] ++;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">if</span>(trie[x][i]) dfs(trie[x][i],l+<span class="number">1</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">solve1</span><span class="params">()</span> </span>&#123;</div><div class="line">		dfs(<span class="number">0</span>,<span class="number">0</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">dfs2</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> l)</span> </span>&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">26</span>; i++) &#123;</div><div class="line">			<span class="keyword">if</span>(trie[x][i]) &#123;</div><div class="line">				c[l+<span class="number">1</span>][i]++;</div><div class="line">				dfs2(trie[x][i],l+<span class="number">1</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">solve2</span><span class="params">()</span> </span>&#123;</div><div class="line">		dfs2(<span class="number">0</span>,<span class="number">0</span>);</div><div class="line">	&#125;</div><div class="line">&#125; t1,t2;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"word.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"word.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;q);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%s"</span>,s);</div><div class="line">		<span class="keyword">int</span> L = <span class="built_in">strlen</span>(s);</div><div class="line">		t1.insert(s);</div><div class="line">		reverse(s,s+L);</div><div class="line">		t2.insert(s);</div><div class="line">		cnt[L]++;</div><div class="line">	&#125;</div><div class="line">	t1.solve1();</div><div class="line">	t2.solve2();</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> l=<span class="number">1</span>; l&lt;=<span class="number">50</span>; l++) &#123; <span class="comment">//b</span></div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">26</span>; i++) &#123;</div><div class="line">			assert(c[<span class="number">1</span>][i] == <span class="number">0</span> || c[<span class="number">1</span>][i] == <span class="number">1</span>);</div><div class="line">			<span class="keyword">if</span>(c[<span class="number">1</span>][i]) &#123;</div><div class="line">				cnt[l]+=b[l][i];</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> l1 = <span class="number">1</span>; l1 &lt;=<span class="number">50</span>; l1++) &#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> l2 = <span class="number">1</span>; l2 &lt;=<span class="number">50</span>; l2++) &#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">26</span>; i++) &#123;</div><div class="line">				cnt[l1+l2] += a[l1][i]*<span class="number">1L</span>L * c[l2][i];</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> L;</div><div class="line">	<span class="keyword">while</span>(q--) &#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;L);</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,(<span class="keyword">int</span>)(cnt[L]%mod));</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<h2 id="下午"><a href="#下午" class="headerlink" title="下午"></a>下午</h2><p><strong>期望得分：100+60+30=190</strong><br><strong>实际得分：100+60+30=190</strong><br><img src="http://upload-images.jianshu.io/upload_images/8471136-8a3475368a71b198.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><img src="http://upload-images.jianshu.io/upload_images/8471136-547b10f98809210b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><img src="http://upload-images.jianshu.io/upload_images/8471136-121d937a0f5a76b2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"><br><del>好水</del>，随便模拟一下就过了。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 1005</span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n,p,k,a,b,c;</div><div class="line"><span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; ve[MAXN];</div><div class="line"><span class="keyword">int</span> mp[MAXN],chenge[MAXN];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"rotate.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"rotate.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;n,&amp;p,&amp;k);</div><div class="line">	<span class="keyword">int</span> pp=p;</div><div class="line">	<span class="keyword">while</span>(p--) &#123;</div><div class="line">		<span class="keyword">int</span> m;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;m);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</div><div class="line">			<span class="keyword">int</span> x;</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;x);</div><div class="line">			ve[p].push_back(x);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) mp[i]=chenge[i]=i;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;pp;i++) &#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;ve[i].size();j++) &#123;</div><div class="line">			<span class="keyword">int</span> from=ve[i][j],to;</div><div class="line">			<span class="keyword">if</span>(j==ve[i].size()<span class="number">-1</span>) to=ve[i][<span class="number">0</span>];</div><div class="line">			<span class="keyword">else</span> to=ve[i][j+<span class="number">1</span>];</div><div class="line">			a=mp[from],b=mp[to];</div><div class="line">			c=a;</div><div class="line">			<span class="keyword">while</span>(a!=from) &#123;</div><div class="line">				c=a;</div><div class="line">				a=mp[a];</div><div class="line">				<span class="keyword">if</span>(a==from) <span class="keyword">break</span>;</div><div class="line">			&#125;</div><div class="line">			chenge[c]=to;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) mp[i]=chenge[i];</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">printf</span>(<span class="string">"%d "</span>,mp[i]);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-fa047b02afe7567d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><img src="http://upload-images.jianshu.io/upload_images/8471136-47eec6e2f8478137.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><del>对于对位运算一无所知的我暴力60已经很好了</del><br>正解：<br><strong>因为 and 和 or 都是单调的，所以 and 和 or 可以用ST 表来维护。<br>枚举左端点，计算右端点数量。<br>利用ST 表二分，跳过连续段。</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line">LL mod = <span class="number">1e9</span>+<span class="number">7</span>;</div><div class="line">LL cnt;</div><div class="line"><span class="keyword">int</span> s[<span class="number">100005</span>],n,a,b,c,d;</div><div class="line"><span class="keyword">int</span> sta[<span class="number">100005</span>][<span class="number">20</span>],sto[<span class="number">100005</span>][<span class="number">20</span>];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">aska</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> L=r-l+<span class="number">1</span>;</div><div class="line">	<span class="keyword">int</span> t = log2(L);</div><div class="line">	<span class="keyword">return</span> sta[l][t] &amp; sta[r-(<span class="number">1</span>&lt;&lt;t)+<span class="number">1</span>][t];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">asko</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> L=r-l+<span class="number">1</span>;</div><div class="line">	<span class="keyword">int</span> t = log2(L);</div><div class="line">	<span class="keyword">return</span> sto[l][t] | sto[r-(<span class="number">1</span>&lt;&lt;t)+<span class="number">1</span>][t];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"range.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"range.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d%d%d%d"</span>,&amp;n,&amp;a,&amp;b,&amp;c,&amp;d);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;s[i]),sta[i][<span class="number">0</span>]=sto[i][<span class="number">0</span>]=s[i];</div><div class="line">	<span class="comment">// puts("aaa");</span></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;<span class="number">20</span>; j++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</div><div class="line">			<span class="keyword">if</span>(i+(<span class="number">1</span>&lt;&lt;j) <span class="number">-1</span> &lt;=n) &#123;</div><div class="line">				sta[i][j] = sta[i][j<span class="number">-1</span>] &amp; sta[i+(<span class="number">1</span>&lt;&lt;(j<span class="number">-1</span>))][j<span class="number">-1</span>];</div><div class="line">				sto[i][j] = sto[i][j<span class="number">-1</span>] | sto[i+(<span class="number">1</span>&lt;&lt;(j<span class="number">-1</span>))][j<span class="number">-1</span>];</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</div><div class="line">		<span class="keyword">int</span> andsum = s[i], orsum = s[i];</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=i; j&lt;=n; j++) &#123;</div><div class="line">			<span class="keyword">int</span> L=j,R=n+<span class="number">1</span>;</div><div class="line">			andsum = aska(i,j);</div><div class="line">			orsum = asko(i,j);</div><div class="line">			<span class="keyword">while</span>(R-L&gt;<span class="number">1</span>) &#123;</div><div class="line">				<span class="keyword">int</span> mid = (L+R)/<span class="number">2</span>;</div><div class="line">				<span class="keyword">if</span>(aska(i,mid) == andsum &amp;&amp; asko(i,mid) == orsum) &#123;</div><div class="line">					L=mid;</div><div class="line">				&#125; <span class="keyword">else</span> R=mid;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">if</span>(a &lt;= andsum &amp;&amp; andsum &lt;= b &amp;&amp; c &lt;= orsum &amp;&amp; orsum &lt;= d) &#123;</div><div class="line">				cnt += L-j+<span class="number">1</span>;</div><div class="line">			&#125;</div><div class="line">			j=L;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">cout</span>&lt;&lt;cnt%mod&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-e427237ccbc29630.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><img src="http://upload-images.jianshu.io/upload_images/8471136-5d9e39b441822fa2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>树形DP好难想啊，<del>不如直接DFS</del>，30分也是尽力了。<br><strong>f [ i ][ j ] 表示i 号节点在子树中拿 j 个果子的方案数。O(n^3)。<br>但是可以DFS 时可以直接把父节点状态传下去，减少一维合并复杂度。O(n^2)。</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line">LL mod = <span class="number">1e9</span>+<span class="number">7</span>;</div><div class="line"><span class="keyword">int</span> n,k;</div><div class="line"><span class="keyword">int</span> a[<span class="number">1005</span>];</div><div class="line"><span class="keyword">int</span> H[<span class="number">1005</span>],X[<span class="number">2005</span>],P[<span class="number">2005</span>],tot;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">	P[++tot]=y;</div><div class="line">	X[tot]=H[x];</div><div class="line">	H[x]=tot;</div><div class="line">&#125;</div><div class="line">LL pw2[<span class="number">1005</span>];</div><div class="line">LL dp[<span class="number">1005</span>][<span class="number">1005</span>];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> fa)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> siz=<span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=H[x]; i; i=X[i]) &#123;</div><div class="line">		<span class="keyword">if</span>(fa == P[i]) <span class="keyword">continue</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;=n-a[P[i]]; j++) &#123;</div><div class="line">			dp[P[i]][j+a[P[i]]] = dp[x][j];</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">int</span> tmp = dfs(P[i],x);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;=n; j++) &#123;</div><div class="line">			dp[x][j] = (pw2[tmp<span class="number">-1</span>] * dp[x][j] % mod + dp[P[i]][j])% mod;</div><div class="line">		&#125;</div><div class="line">		siz+=tmp;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> siz;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"fruit.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"fruit.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;k);</div><div class="line">	pw2[<span class="number">0</span>]= <span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) pw2[i] = pw2[i<span class="number">-1</span>] * <span class="number">2</span> % mod;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,x,y; i&lt;n; i++) &#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</div><div class="line">		add(x,y);</div><div class="line">		add(y,x);</div><div class="line">	&#125;</div><div class="line">	dp[<span class="number">1</span>][a[<span class="number">1</span>]] = <span class="number">1</span>;</div><div class="line">	dfs(<span class="number">1</span>,<span class="number">0</span>);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,(<span class="keyword">int</span>)dp[<span class="number">1</span>][k]);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>今天丢的分挺少的，慢慢感觉就找回来了，先把基础分拿牢再说。</strong><br><del>明天我要AK</del></p>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sukixj.github.io/2017/11/01/note2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuki">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/01/note2/" itemprop="url">NOI Linux 评测注意事项</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-11-01T19:45:09+08:00">
                2017-11-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><h3 id="文件输入输出"><a href="#文件输入输出" class="headerlink" title="文件输入输出"></a>文件输入输出</h3></li>
<li><h3 id="long-long-gt-lld-I64d会被自动识别成-d"><a href="#long-long-gt-lld-I64d会被自动识别成-d" class="headerlink" title="long long -&gt; %lld ( %I64d会被自动识别成%d )"></a>long long -&gt; %lld ( %I64d会被自动识别成%d )</h3></li>
<li><h3 id="unsigned-long-long-gt-llu"><a href="#unsigned-long-long-gt-llu" class="headerlink" title="unsigned long long -&gt; %llu"></a>unsigned long long -&gt; %llu</h3></li>
<li><h3 id="头文件要写全"><a href="#头文件要写全" class="headerlink" title="头文件要写全"></a>头文件要写全</h3></li>
<li><h3 id="文件名及后缀必须使用小写"><a href="#文件名及后缀必须使用小写" class="headerlink" title="文件名及后缀必须使用小写"></a>文件名及后缀必须使用小写</h3></li>
<li><h3 id="代码限制100KB（打表）"><a href="#代码限制100KB（打表）" class="headerlink" title="代码限制100KB（打表）"></a>代码限制100KB（<del>打表</del>）</h3></li>
<li><h3 id="使用的函数和变量名不要和Linux中的内置函数和变量名冲突，如pipe、fork等名称"><a href="#使用的函数和变量名不要和Linux中的内置函数和变量名冲突，如pipe、fork等名称" class="headerlink" title="使用的函数和变量名不要和Linux中的内置函数和变量名冲突，如pipe、fork等名称"></a>使用的函数和变量名不要和Linux中的内置函数和变量名冲突，如pipe、fork等名称</h3></li>
<li><h3 id="不要使用-include-头文件，会引入许多可能与自己命名产生冲突的函数和变量。"><a href="#不要使用-include-头文件，会引入许多可能与自己命名产生冲突的函数和变量。" class="headerlink" title="不要使用#include 头文件，会引入许多可能与自己命名产生冲突的函数和变量。"></a>不要使用#include <bits stdc++.h="">头文件，会引入许多可能与自己命名产生冲突的函数和变量。</bits></h3></li>
<li><h3 id="Linux系统下rand-函数与Windows不同-gt-rand-lt-lt-15-rand"><a href="#Linux系统下rand-函数与Windows不同-gt-rand-lt-lt-15-rand" class="headerlink" title="Linux系统下rand()函数与Windows不同 -&gt; (rand()&lt;&lt;15)^rand()"></a>Linux系统下rand()函数与Windows不同 -&gt; (rand()&lt;&lt;15)^rand()</h3></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sukixj.github.io/2017/10/31/qbkqccd4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuki">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/31/qbkqccd4/" itemprop="url">清北考前冲刺Day4</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-10-31T22:07:03+08:00">
                2017-10-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="上午"><a href="#上午" class="headerlink" title="上午"></a>上午</h1><p><strong>期望得分：50+30+100=180</strong><br><strong>实际得分：0+0+10=10</strong></p>
<h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><ul>
<li><h3 id="【问题描述】"><a href="#【问题描述】" class="headerlink" title="【问题描述】"></a>【问题描述】</h3>给定一个可重集合，一开始只有一个元素 0 。然后你可以操作若干轮，每一轮，你需要对于集合中的每个元素 x 进行如下三种操作之一：<br>1、将 x 变为 x + 1。<br>2 、将 x 分裂为两个非负整数 y, z ，且满足 x  y  z 。<br>3    、什么都不做。<br>每一轮，集合中的每个元素都必须进行上面三个操作之一。<br>对于一个最终的集合，你的任务是判断至少进行了多少轮。</li>
<li><h3 id="【输入文件】"><a href="#【输入文件】" class="headerlink" title="【输入文件】"></a>【输入文件】</h3>第一行为一个正整数 n ，表示集合的最终大小。<br>第二行为 n 个非负整数，描述集合中的元素。</li>
<li><h3 id="【输出文件】"><a href="#【输出文件】" class="headerlink" title="【输出文件】"></a>【输出文件】</h3>输出一个非负整数，为最少的轮数。</li>
<li><h3 id="【输入输出样例】"><a href="#【输入输出样例】" class="headerlink" title="【输入输出样例】"></a>【输入输出样例】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-e377d04e7f438f6e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
<li><h3 id="【数据规模和约定】"><a href="#【数据规模和约定】" class="headerlink" title="【数据规模和约定】"></a>【数据规模和约定】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-52cb438c5d07aed6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>这题。。爆搜比答案多1.。。<br>倒着考虑，把大的数使它尽量缩小，然后能合并就合并。但暴力会超时，所以我们可以直接用桶排序，把本来不需要平移的东西平移过去，相当于原来是上面整体向下挪一格-&gt;把原来下面不需要动的数向上弹一格。<br><strong>有一个很显然的思路，就是应该尽快把数分解得多一些，然后再同时进行第一种操作。<br>正着贪心不好操作，可以考虑反着贪心：每次把能减一的都减一，所有的零两两合并。<br>使用一些手段加速上述算法即可。</strong></li>
</ul>
<h2 id="道路分组"><a href="#道路分组" class="headerlink" title="道路分组"></a>道路分组</h2><ul>
<li><h3 id="【问题描述】-1"><a href="#【问题描述】-1" class="headerlink" title="【问题描述】"></a>【问题描述】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-9a8ee3776c31ad2a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
<li><h3 id="【输入文件】-1"><a href="#【输入文件】-1" class="headerlink" title="【输入文件】"></a>【输入文件】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-7c32bd7cb566ef85.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
<li><h3 id="【输出文件】-1"><a href="#【输出文件】-1" class="headerlink" title="【输出文件】"></a>【输出文件】</h3>输入文件为 road.out。<br>输出一个正整数，为最少的道路组数。</li>
<li><h3 id="【输入输出样例】-1"><a href="#【输入输出样例】-1" class="headerlink" title="【输入输出样例】"></a>【输入输出样例】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-bfe23efaef6bdb8a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
<li><h3 id="【数据规模和约定】-1"><a href="#【数据规模和约定】-1" class="headerlink" title="【数据规模和约定】"></a>【数据规模和约定】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-fdb5d0a84d00efe3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
</ul>
<p>题目中的分组方式是可以贪心进行的：从第一条边开始，尽可能地添加边。再从上一组的末尾后的第一条边开始，重复进行这个操作。<br>可以发现，这个问题是可以被二分的。每次二分出长度为 的一段，我们都需要  ( Ok )的时间进行判断。所以，直接的二分是不可行的。因为每次的二分都需要  ( Om )的时间。如果答案的组数比较多，这种办法很容易超时。<br>观察直接二分出现的问题，主要在于二分的第一步跨得太大了，不容易收回来。一种机智的解决办法是，设置一个值 d，把二分答案改成每次+ d 地进行判断，然后再进行二分。<br>但这样的办法并没有抓住问题的本质。事实上我们需要解决的问题是：如果一次二分最后得出可以多取 k 条边，那么这次二分的时间复杂度应该和 k 直接相关。<br>对于这个问题，我们可以这么解决：先做一次倍增，把尝试的值由1变成2，变成4，直到变到2^p时，第一次发现不可行了，再停下来。之后，我们可以在这个2^p范围内做一次二分。容易发现，2^( p-1) ≤ k &lt; 2^p，即2^p = O( k )，所以一次二分的复杂度就是 （O( klogk )），总的时间复杂度就是 （O( mlogm )）。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">500010</span>;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">int</span> n, m;</div><div class="line"><span class="keyword">int</span> vis[N], u[N], v[N];</div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vec[N];</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (vis[u]) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	<span class="keyword">if</span> (u == n) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">	vis[u] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">bool</span> ret = <span class="literal">false</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; vec[u].size(); i++) &#123;</div><div class="line">		ret = dfs(vec[u][i]);</div><div class="line">		<span class="keyword">if</span> (ret) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">int</span> x = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) ch = getchar();</div><div class="line">	<span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch)) &#123;</div><div class="line">		x = x*<span class="number">10</span>+(ch-<span class="string">'0'</span>);</div><div class="line">		ch=getchar();</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> x;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> sta, <span class="keyword">int</span> las)</span> </span>&#123;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = sta; i &lt;= las; i++)</div><div class="line">		vec[u[i]].push_back(v[i]);</div><div class="line"></div><div class="line">	<span class="keyword">bool</span> ret = dfs(<span class="number">1</span>);</div><div class="line"></div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = sta; i &lt;= las; i++) &#123;</div><div class="line">		vis[u[i]] = vis[v[i]] = <span class="number">0</span>;</div><div class="line">		vec[u[i]].clear();</div><div class="line">	&#125;</div><div class="line">	vis[<span class="number">1</span>] = <span class="number">0</span>;</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"road.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"road.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	n = read(), m = read();</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</div><div class="line">		<span class="comment">//scanf("%d%d", &amp;u[i], &amp;v[i]);</span></div><div class="line">		u[i] = read();</div><div class="line">		v[i] = read();</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> now = <span class="number">0</span>, ans = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span> (now &lt; m) &#123;</div><div class="line">		<span class="keyword">int</span> i;</div><div class="line">		<span class="keyword">for</span> (i = <span class="number">1</span>; i + now &lt;= m; i &lt;&lt;= <span class="number">1</span>)</div><div class="line">			<span class="keyword">if</span> (check(now, now + i - <span class="number">1</span>)) <span class="keyword">break</span>;</div><div class="line">		i &gt;&gt;= <span class="number">1</span>;</div><div class="line">		<span class="keyword">int</span> nowtmp = now + i;</div><div class="line">		<span class="keyword">for</span> (; i &gt; <span class="number">0</span>; i &gt;&gt;= <span class="number">1</span>)</div><div class="line">			<span class="keyword">if</span> (nowtmp + i &lt;= m &amp;&amp; !check(now, nowtmp + i - <span class="number">1</span>))</div><div class="line">				nowtmp += i;</div><div class="line">		ans++;</div><div class="line">		now = nowtmp;</div><div class="line"></div><div class="line">	&#125;</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="补兵"><a href="#补兵" class="headerlink" title="补兵"></a>补兵</h2><ul>
<li><h3 id="【问题描述】-2"><a href="#【问题描述】-2" class="headerlink" title="【问题描述】"></a>【问题描述】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-55843c09599870b1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
<li><h3 id="【输入文件】-2"><a href="#【输入文件】-2" class="headerlink" title="【输入文件】"></a>【输入文件】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-2f1e5b0f47312a09.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
<li><h3 id="【输出文件】-2"><a href="#【输出文件】-2" class="headerlink" title="【输出文件】"></a>【输出文件】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-a992385c3e19666b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
<li><h3 id="【输入输出样例】-2"><a href="#【输入输出样例】-2" class="headerlink" title="【输入输出样例】"></a>【输入输出样例】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-fae36188cf3cf6e9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
<li><h3 id="【数据规模和约定】-2"><a href="#【数据规模和约定】-2" class="headerlink" title="【数据规模和约定】"></a>【数据规模和约定】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-52c0c86818e8d146.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><del>这题标程还没理解，我还是觉得我写的贪心是对的。</del><br><img src="http://upload-images.jianshu.io/upload_images/8471136-46e20f188a7564c8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1000</span> + <span class="number">10</span>;</div><div class="line"><span class="keyword">int</span> a[MAXN];</div><div class="line"><span class="keyword">int</span> cnt[MAXN], sta[MAXN], c[MAXN];</div><div class="line"><span class="keyword">int</span> f[MAXN][MAXN];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"cs.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"cs.out"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</div><div class="line">	<span class="keyword">int</span> T;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> num = <span class="number">1</span>; num &lt;= T; ++num) &#123;</div><div class="line">		<span class="keyword">int</span> N, maxn = <span class="number">0</span>;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;N);</div><div class="line">		<span class="built_in">memset</span>(cnt, <span class="number">0</span>, <span class="keyword">sizeof</span>(cnt));</div><div class="line">		<span class="built_in">memset</span>(c, <span class="number">0</span>, <span class="keyword">sizeof</span>(c));</div><div class="line">		<span class="built_in">memset</span>(f, <span class="number">0</span>, <span class="keyword">sizeof</span>(f));</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; ++i) &#123;</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</div><div class="line">			++cnt[a[i]];</div><div class="line">			maxn = max(maxn, a[i]);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">int</span> top = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= maxn; ++i)</div><div class="line">			<span class="keyword">if</span> (cnt[i] == <span class="number">0</span>) sta[++top] = i;</div><div class="line">			<span class="keyword">else</span> &#123;</div><div class="line">				<span class="keyword">while</span> (cnt[i] &gt; <span class="number">1</span> &amp;&amp; top &gt; <span class="number">0</span>) &#123;</div><div class="line">					c[sta[top--]] = i;</div><div class="line">					--cnt[i];</div><div class="line">				&#125;</div><div class="line">				c[i] = i;</div><div class="line">			&#125;</div><div class="line">		<span class="keyword">int</span> ans = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= maxn; ++i)</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= i; ++j) &#123;</div><div class="line">				<span class="keyword">if</span> (j &gt; <span class="number">0</span>) f[i][j] = f[i - <span class="number">1</span>][j - <span class="number">1</span>];</div><div class="line">				<span class="keyword">if</span> (c[i] != <span class="number">0</span> &amp;&amp; j + c[i] - i &lt; i)</div><div class="line">					f[i][j] = max(f[i][j], f[i - <span class="number">1</span>][j + c[i] - i] + <span class="number">1</span>);</div><div class="line">				ans = max(ans, f[i][j]);</div><div class="line">			&#125;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h1 id="下午"><a href="#下午" class="headerlink" title="下午"></a>下午</h1><p><strong>期望得分：40+50+20=110</strong><br><strong>实际得分：40+30+0=70</strong></p>
<h2 id="数列"><a href="#数列" class="headerlink" title="数列"></a>数列</h2><ul>
<li><h3 id="【问题描述】-3"><a href="#【问题描述】-3" class="headerlink" title="【问题描述】"></a>【问题描述】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-d98d1b8bc2c54740.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
<li><h3 id="【输入文件】-3"><a href="#【输入文件】-3" class="headerlink" title="【输入文件】"></a>【输入文件】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-c0f15c432654043e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
<li><h3 id="【输出文件】-3"><a href="#【输出文件】-3" class="headerlink" title="【输出文件】"></a>【输出文件】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-79e9333a1650316a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
<li><h3 id="【输入输出样例】-3"><a href="#【输入输出样例】-3" class="headerlink" title="【输入输出样例】"></a>【输入输出样例】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-0fb5d6e8c6d4777c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
<li><h3 id="【数据规模和约定】-3"><a href="#【数据规模和约定】-3" class="headerlink" title="【数据规模和约定】"></a>【数据规模和约定】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-fe54b73ce3657056.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>这题我好亏啊，一开始先写了个暴力放在那里，然后去做了其他题，到了最后想出正解了，但是没等敲完时间就到了，我就没来得及改那个程序就被无奈的收上去了。。<br><del>40分</del><br>正解就是用辗转相除的时候随便加一加答案就好了很简单。<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line">ll ans=<span class="number">0</span>;</div><div class="line"><span class="function">ll <span class="title">f</span><span class="params">(ll a,ll b)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(!b) &#123;</div><div class="line">		<span class="keyword">return</span> a;</div><div class="line">	&#125;</div><div class="line">	ans+=a/b;</div><div class="line">	<span class="keyword">return</span> f(b,a%b);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"seq.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"seq.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	ll a,b;</div><div class="line">	<span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b;</div><div class="line">	ans=<span class="number">1</span>;</div><div class="line">	f(a,b);</div><div class="line">	<span class="built_in">cout</span>&lt;&lt;ans;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="车辆销售"><a href="#车辆销售" class="headerlink" title="车辆销售"></a>车辆销售</h2><ul>
<li><h3 id="【问题描述】-4"><a href="#【问题描述】-4" class="headerlink" title="【问题描述】"></a>【问题描述】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-9cc9e996c7eaa8a4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
<li><h3 id="【输入文件】-4"><a href="#【输入文件】-4" class="headerlink" title="【输入文件】"></a>【输入文件】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-56f5bc326ee8f8a4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
<li><h3 id="【输出文件】-4"><a href="#【输出文件】-4" class="headerlink" title="【输出文件】"></a>【输出文件】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-c26946ac7ee9193f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
<li><h3 id="【输入输出样例】-4"><a href="#【输入输出样例】-4" class="headerlink" title="【输入输出样例】"></a>【输入输出样例】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-da96509be0912db0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
<li><h3 id="【数据规模和约定】-4"><a href="#【数据规模和约定】-4" class="headerlink" title="【数据规模和约定】"></a>【数据规模和约定】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-6987d3e606d3b609.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>写了个BFS 30分暴力，<del>本来以为能拿50分</del>。。<br>正解完全没想到：<br>本题是最大生成树基础上的一点变形。<br>用 算法求最大生成树，在并查集合并时，把原本的一个根连向另一个根改成两个根都连向一个新建的节点，并把当前正在处理的边的权值赋给这个新节点做点权。这样形成的结构会是一棵树。<br>一个点的答案大致上是树的根到自己的路径上，相邻两个节点的子树叶节点数的平方和。需要注意的是父子两个节点权值相同的情况，这个部分需要特殊处理。<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">510000</span>;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">struct</span> node &#123;</div><div class="line">	<span class="keyword">int</span> u, v, l;</div><div class="line">	<span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> node &amp;no) <span class="keyword">const</span> &#123;</div><div class="line">		<span class="keyword">return</span> l &gt; no.l;</div><div class="line">	&#125;</div><div class="line">&#125; e[N];</div><div class="line"><span class="keyword">int</span> n, m, newn;</div><div class="line"><span class="keyword">int</span> son[N][<span class="number">2</span>];</div><div class="line"><span class="keyword">int</span> fa[N], size[N], value[N];</div><div class="line">ll ans[N];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">char</span> ch = getchar();</div><div class="line">	<span class="keyword">int</span> x = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)) ch = getchar();</div><div class="line">	<span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch)) &#123;</div><div class="line">		x = x*<span class="number">10</span>+(ch-<span class="string">'0'</span>);</div><div class="line">		ch=getchar();</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> x;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getf</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (fa[x] == x) <span class="keyword">return</span> x;</div><div class="line">	fa[x] = getf(fa[x]);</div><div class="line">	<span class="keyword">return</span> fa[x];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> fa, ll cnt)</span> </span>&#123;</div><div class="line">	ll delta = <span class="number">0</span>;</div><div class="line">	<span class="keyword">if</span> (fa) &#123;</div><div class="line">		<span class="keyword">if</span> (value[u] == value[fa]) size[u] = size[fa];</div><div class="line">		<span class="keyword">else</span> delta = (ll)(size[fa] - size[u]) * (ll)(size[fa] - size[u]);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (son[u][<span class="number">0</span>]) &#123;</div><div class="line">		dfs(son[u][<span class="number">0</span>], u, cnt + delta);</div><div class="line">		dfs(son[u][<span class="number">1</span>], u, cnt + delta);</div><div class="line">	&#125; <span class="keyword">else</span> ans[u] = cnt + delta;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"car.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"car.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	n = read(), m = read();</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</div><div class="line">		e[i].u = read();</div><div class="line">		e[i].v = read();</div><div class="line">		e[i].l = read();</div><div class="line">	&#125;</div><div class="line">	sort(e + <span class="number">1</span>, e + <span class="number">1</span> + m);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) fa[i] = i;</div><div class="line"></div><div class="line">	newn = n;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) size[i] = <span class="number">1</span>;</div><div class="line"></div><div class="line"></div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</div><div class="line">		<span class="keyword">int</span> u = getf(e[i].u), v = getf(e[i].v);</div><div class="line">		<span class="keyword">if</span> (u == v) <span class="keyword">continue</span>;</div><div class="line">		newn++;</div><div class="line">		son[newn][<span class="number">0</span>] = u;</div><div class="line">		son[newn][<span class="number">1</span>] = v;</div><div class="line">		fa[u] = fa[v] = newn;</div><div class="line">		fa[newn] = newn;</div><div class="line">		value[newn] = e[i].l;</div><div class="line">		size[newn] = size[u] + size[v];</div><div class="line">	&#125;</div><div class="line">	dfs(newn, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%lld "</span>, ans[i]);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="取数"><a href="#取数" class="headerlink" title="取数"></a>取数</h2><ul>
<li><h3 id="【问题描述】-5"><a href="#【问题描述】-5" class="headerlink" title="【问题描述】"></a>【问题描述】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-1eeaeaf1f2cd351e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
<li><h3 id="【输入文件】-5"><a href="#【输入文件】-5" class="headerlink" title="【输入文件】"></a>【输入文件】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-3b8ef38516419f0c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
<li><h3 id="【输出文件】-5"><a href="#【输出文件】-5" class="headerlink" title="【输出文件】"></a>【输出文件】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-aced0e14605d9b66.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
<li><h3 id="【输入输出样例】-5"><a href="#【输入输出样例】-5" class="headerlink" title="【输入输出样例】"></a>【输入输出样例】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-e9ca1ff560f52dce.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
<li><h3 id="【数据规模和约定】-5"><a href="#【数据规模和约定】-5" class="headerlink" title="【数据规模和约定】"></a>【数据规模和约定】</h3><img src="http://upload-images.jianshu.io/upload_images/8471136-7346bc841c370791.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>写了个n^2DP（<del>结果写炸了</del>）<del>明明手造样例都能过</del><br>这题正解玄学：<br><img src="http://upload-images.jianshu.io/upload_images/8471136-a136bcbdd9da249d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>回去慢慢研究吧。<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1000010</span>;</div><div class="line"><span class="keyword">const</span> LL inf=<span class="number">10000000</span>;</div><div class="line"><span class="keyword">int</span> n,m,x,y,z,L,sum;</div><div class="line"><span class="keyword">int</span> cnt[N];</div><div class="line">LL ans0,ans;</div><div class="line">LL f[N],s[N];</div><div class="line"><span class="function">LL <span class="title">read</span><span class="params">()</span> </span>&#123;</div><div class="line">	LL x=<span class="number">0</span>,f=<span class="number">1</span>;</div><div class="line">	<span class="keyword">char</span> ch=getchar();</div><div class="line">	<span class="keyword">while</span>(ch&lt;<span class="string">'0'</span>||ch&gt;<span class="string">'9'</span>) &#123;</div><div class="line">		<span class="keyword">if</span>(ch==<span class="string">'-'</span>)f=<span class="number">-1</span>;</div><div class="line">		ch=getchar();</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">while</span>(ch&gt;=<span class="string">'0'</span>&amp;&amp;ch&lt;=<span class="string">'9'</span>) &#123;</div><div class="line">		x=x*<span class="number">10</span>+ch-<span class="string">'0'</span>;</div><div class="line">		ch=getchar();</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> x*f;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(LL c)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> i,a,tot=<span class="number">0</span>;</div><div class="line">	LL ss=<span class="number">0</span>;</div><div class="line">	<span class="built_in">memset</span>(cnt,<span class="number">0</span>,<span class="keyword">sizeof</span>(cnt));</div><div class="line">	<span class="built_in">memset</span>(f,<span class="number">0</span>,<span class="keyword">sizeof</span>(f));</div><div class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;=n; i++) &#123;</div><div class="line">		a=i-m;</div><div class="line">		<span class="keyword">if</span>(a&gt;=<span class="number">1</span>&amp;&amp;c-s[a]&gt;<span class="number">0</span>&amp;&amp;(f[a]&gt;ss||(f[a]==ss&amp;&amp;cnt[a]&lt;tot))) &#123;</div><div class="line">			ss=f[a];</div><div class="line">			tot=cnt[a];</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(c-s[i]&gt;<span class="number">0</span>) &#123;</div><div class="line">			f[i]=ss+c-s[i];</div><div class="line">			cnt[i]=tot+<span class="number">1</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	ans0=sum=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;=n; i++)</div><div class="line">		<span class="keyword">if</span>(f[i]&gt;ans0||(f[i]==ans0&amp;&amp;sum&gt;cnt[i])) &#123;</div><div class="line">			sum=cnt[i];</div><div class="line">			ans0=f[i];</div><div class="line">		&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">pd</span><span class="params">(LL c)</span> </span>&#123;</div><div class="line">	solve(c);</div><div class="line">	<span class="keyword">if</span>(sum&lt;L) <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">	<span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> a,b,c,i,j,k;</div><div class="line">	LL l,r;</div><div class="line">	freopen(<span class="string">"number.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"number.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	n=read();</div><div class="line">	m=read();</div><div class="line">	L=read();</div><div class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;=n; i++)</div><div class="line">		s[i]=read();</div><div class="line">	ans=<span class="number">0</span>;</div><div class="line">	l=<span class="number">0</span>;</div><div class="line">	r=(LL)inf*N/<span class="number">2</span>;</div><div class="line">	<span class="keyword">while</span>(l&lt;r<span class="number">-1</span>) &#123;</div><div class="line">		LL mid=(l+r)/<span class="number">2</span>;</div><div class="line">		<span class="keyword">if</span>(pd(mid)) l=mid;</div><div class="line">		<span class="keyword">else</span> r=mid;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(pd(r)) &#123;</div><div class="line">		solve(r);</div><div class="line">		ans=(LL)L*r-ans0;</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		solve(l);</div><div class="line">		ans=(LL)L*l-ans0;</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,ans);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>今天的题目好玄学。。按自己认为对的思路写的好像得分都不高。。<br>但是我能稳住敲暴力的分了呀<br><del>感觉我的感觉找回来了</del></p>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sukixj.github.io/2017/10/31/noip/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuki">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/31/noip/" itemprop="url">NOIP2017备考策略</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-10-31T21:21:55+08:00">
                2017-10-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="值得复习的东西："><a href="#值得复习的东西：" class="headerlink" title="值得复习的东西："></a><strong>值得复习的东西：</strong></h2><ul>
<li>各种算法的模板（正确度、熟练度）</li>
<li>之前写过的题目（模拟赛题目、OJ题目）<h2 id="1、数据结构"><a href="#1、数据结构" class="headerlink" title="1、数据结构"></a>1、数据结构</h2></li>
<li><strong>栈（单调栈）</strong></li>
<li><strong>队列（单调队列）</strong></li>
<li><strong>并查集</strong></li>
<li><strong>倍增（ST表）</strong></li>
</ul>
<p>对于近8年左右的提高组题目，高级的数据结构都不是必须的。<br>几道使用数据结构能拿到很好的分数：NOIP2012借教室（线段树）、开车旅行（set）、NOIP2016蚯蚓（堆）。<br>掌握一些高级数据结构可以直观而有效的解决一些NOIP的题，但往往因为一些常数上的问题被卡掉一些分数。<br>一些值得掌握的高级数据结构：树状数组、线段树、堆（优先队列）、平衡树（set和map）。</p>
<h2 id="2、字符串"><a href="#2、字符串" class="headerlink" title="2、字符串"></a>2、字符串</h2><p>近几年，字符串问题不太出现，但基本的字符串模拟能力需要具备。<br><strong>字符串 hash 需要掌握。一定要写双哈希。多选两个模数。</strong><br>KMP、扩展KMP、Manacher、最小表示法。<br>最小表示法：给你一个字符串，环状，找一个位置切开，使字典序最小。</p>
<h2 id="3、图与树"><a href="#3、图与树" class="headerlink" title="3、图与树"></a>3、图与树</h2><p><del>这里应有星号w（重要）</del></p>
<ul>
<li>最短路<br>dijkstra算法优先，SPFA尽量不要用；Floyd算法。</li>
<li>最小生成树（最小生成树的各种性质、启发式合并）</li>
<li>割点、割边、强联通分量（容易被遗漏的部分、近几年没有考察过）</li>
<li>拓扑排序<h2 id="4、数学相关"><a href="#4、数学相关" class="headerlink" title="4、数学相关"></a>4、数学相关</h2>数学类型的问题基本每年都会出现，也需要做重点准备。</li>
</ul>
<p><strong>一些需要掌握的算法：</strong></p>
<ul>
<li>欧几里得算法、扩展欧几里得算法</li>
<li>二项式定理、杨辉三角</li>
<li>筛法求素数（欧拉筛）、欧拉函数</li>
<li>快速幂、矩阵快速幂</li>
<li>费马小定理、乘法逆元</li>
<li>概率与期望（去年简单题试水，<del>今年上难度</del>）<h2 id="5、动态规划"><a href="#5、动态规划" class="headerlink" title="5、动态规划"></a>5、动态规划</h2><del>花样很多、范围特别大</del></li>
</ul>
<p><strong>一些常见的动态规划类型：</strong></p>
<ul>
<li>状压DP（对位操作不熟练可以考虑多做一步压缩与解压）</li>
<li>区间DP（先枚举长度，再枚举端点）</li>
<li>树DP（有时会涉及DP套DP）</li>
<li>DAG上的DP（根据拓扑序进行转移）</li>
<li>背包DP（十年前的大热点，现在已经基本不出现了）</li>
</ul>
<p><strong>DP优化：</strong></p>
<ul>
<li>前缀和优化（一维、二维）</li>
<li>单调栈、单调队列优化</li>
<li>线段树、堆等高级数据结构进行的优化</li>
<li><del>斜率优化</del><h2 id="6、搜索"><a href="#6、搜索" class="headerlink" title="6、搜索"></a>6、搜索</h2><strong>最实用的的骗分手段，偶尔会出一道题。</strong><br>正解是搜索往往比较繁琐（最优性剪枝、可行性剪枝）。<br>记忆化搜索实现动态规划。<h2 id="7、一些考试技巧"><a href="#7、一些考试技巧" class="headerlink" title="7、一些考试技巧"></a>7、一些考试技巧</h2></li>
<li>考试之前，要对自己的时间分配有一个大致的安排。</li>
<li>不要在一道题上卡死，如果思路不顺，可以考虑直接打暴力跳过。</li>
<li>就算是想出了正解的题，写完之后尽量打对拍，或者数据分治。</li>
<li>namespace 分段程序确保分数。</li>
<li>每场考试中，最关键的一般都是第二题<br>如果第二题比较简单，你需要尽可能快地做出第二题，留够大概两小时用于第二题。<br>如果第二题稍微难一些，这道题往往是这场考试的分档题。</li>
<li>考虑贪心的可行性，很多情况往往是没有什么道理的，不容易被看出</li>
<li>观察题目中具有单调性的部分。</li>
<li>设计能通过部分分的暴力算法，再进行优化。</li>
<li>观察题目中比较异常的部分分设置（比如某个量固定为某个值），尝试通过解决这些数据的方法进行突破。<h1 id="Day1暴力-Day2暴力-一等奖get"><a href="#Day1暴力-Day2暴力-一等奖get" class="headerlink" title="Day1暴力 + Day2暴力 = 一等奖get"></a>Day1暴力 + Day2暴力 = 一等奖get</h1><h1 id="祝我棍棍节快乐！"><a href="#祝我棍棍节快乐！" class="headerlink" title="祝我棍棍节快乐！"></a><del>祝我棍棍节快乐！</del></h1></li>
</ul>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sukixj.github.io/2017/10/30/qbkqccd3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuki">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/30/qbkqccd3/" itemprop="url">清北考前冲刺Day3</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-10-30T21:34:49+08:00">
                2017-10-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="上午"><a href="#上午" class="headerlink" title="上午"></a>上午</h1><p><strong>期望得分：100+0+50=150</strong><br><strong>实际得分：100+0+0=100</strong><br><img src="http://upload-images.jianshu.io/upload_images/8471136-cb2a175be5e97d11.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><img src="http://upload-images.jianshu.io/upload_images/8471136-0ece99db77a77ca4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p><strong><del>第一题真是简单啊</del></strong><br>样例出的很全面：<br><strong>第一个是两个奇数，Chito胜。</strong><br><strong>第二个是两个偶数，Yuri胜。</strong><br><strong>第三个是两个一样的偶数，Yuri胜。</strong><br>那么我就猜测是不是长和宽的乘积（棋盘的面积）奇数Chito胜，偶数Yuri胜呢？<br>答案是：是的。因为能决定必胜态或是必败态的只有棋盘的面积了。<br><del>而且T1也不会很复杂吧</del><br>5min代码：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> n,m;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"star.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"star.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m) &#123;</div><div class="line">		<span class="keyword">if</span>(n==<span class="number">0</span> &amp;&amp; m==<span class="number">0</span>) <span class="keyword">break</span>;</div><div class="line">		<span class="keyword">if</span>((n*m)&amp;<span class="number">1</span>) <span class="built_in">puts</span>(<span class="string">"Chito"</span>);</div><div class="line">		<span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">"Yuri"</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><del>旁边还有个写sg函数的大佬</del><br><img src="http://upload-images.jianshu.io/upload_images/8471136-c2dabf3178f13e1f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><strong>这题真的没思路，感觉我在位运算方面好弱啊。</strong><br><strong>正解好像是建 trie 树，保存它二进制的字符串。然后瞎搞搞，<del>老师说的我还是没懂</del></strong><br>存下代码慢慢研究吧。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PROC <span class="meta-string">"shana"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cctype&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;memory.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cctype&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> qw;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> _l (qw)</span></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> BUF_SIZE = <span class="number">30</span>;</div><div class="line"><span class="keyword">char</span> buf[BUF_SIZE], *buf_s = buf, *<span class="keyword">buf_t</span> = buf + <span class="number">1</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PTR_NEXT() \</span></div><div class="line">    &#123; \</div><div class="line">        buf_s ++; \</div><div class="line">        <span class="meta-keyword">if</span> (buf_s == buf_t) \</div><div class="line">        &#123; \</div><div class="line">            buf_s = buf; \</div><div class="line">            buf_t = buf + fread(buf, 1, BUF_SIZE, stdin); \</div><div class="line">        &#125; \</div><div class="line">    &#125;</div><div class="line">   </div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> readInt(_n_) \</span></div><div class="line">    &#123; \</div><div class="line">        while (*buf_s != <span class="meta-string">'-'</span> &amp;&amp; !isdigit(*buf_s)) \</div><div class="line">            PTR_NEXT(); \</div><div class="line">        bool register _nega_ = false; \</div><div class="line">        <span class="meta-keyword">if</span> (*buf_s == <span class="meta-string">'-'</span>) \</div><div class="line">        &#123; \</div><div class="line">            _nega_ = true; \</div><div class="line">            PTR_NEXT(); \</div><div class="line">        &#125; \</div><div class="line">        int register _x_ = 0; \</div><div class="line">        while (isdigit(*buf_s)) \</div><div class="line">        &#123; \</div><div class="line">            _x_ = _x_ * 10 + *buf_s - <span class="meta-string">'0'</span>; \</div><div class="line">            PTR_NEXT(); \</div><div class="line">        &#125; \</div><div class="line">        <span class="meta-keyword">if</span> (_nega_) \</div><div class="line">            _x_ = -_x_; \</div><div class="line">        (_n_) = (_x_); \</div><div class="line">    &#125;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">50010</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxl = <span class="number">31</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxnd = maxn * maxl;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> inv = <span class="number">500000004</span>;</div><div class="line"><span class="keyword">int</span> v0, n, rt, tn, a[maxn];</div><div class="line"><span class="keyword">int</span> tr[maxnd][<span class="number">2</span>], rb[maxnd][maxl], c[maxnd];</div><div class="line">qw k;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">trieIns</span><span class="params">(<span class="keyword">int</span> v)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> p = rt;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = maxl - <span class="number">1</span>; i &gt;= <span class="number">0</span>; -- i) &#123;</div><div class="line">		<span class="keyword">int</span> v0 = (v &gt;&gt; i) &amp; <span class="number">1</span>;</div><div class="line">		<span class="keyword">if</span> (!tr[p][v0])</div><div class="line">			tr[p][v0] = ++ tn;</div><div class="line">		p = tr[p][v0];</div><div class="line">		++ c[p];</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = maxl - <span class="number">1</span>; j &gt;= <span class="number">0</span>; -- j)</div><div class="line">			<span class="keyword">if</span> ((v &gt;&gt; j) &amp; <span class="number">1</span>)</div><div class="line">				++ rb[p][j];</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">cntUpper</span><span class="params">(<span class="keyword">int</span> v, <span class="keyword">int</span> vu)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> p = rt, s = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = maxl - <span class="number">1</span>; i &gt;= <span class="number">0</span>; -- i) &#123;</div><div class="line">		<span class="keyword">int</span> v0 = (v &gt;&gt; i) &amp; <span class="number">1</span>;</div><div class="line">		<span class="keyword">if</span> ((vu &gt;&gt; i) &amp; <span class="number">1</span>) &#123;</div><div class="line">			p = tr[p][v0 ^ <span class="number">1</span>];</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span> &#123;</div><div class="line">			s += c[tr[p][v0 ^ <span class="number">1</span>]];</div><div class="line">			p = tr[p][v0];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> s;</div><div class="line">&#125;</div><div class="line"><span class="function">qw <span class="title">check</span><span class="params">(<span class="keyword">int</span> v)</span> </span>&#123;</div><div class="line">	qw s = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++ i)</div><div class="line">		s += cntUpper(a[i], v);</div><div class="line">	<span class="keyword">return</span> s &gt;&gt; <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">sumUpper</span><span class="params">(<span class="keyword">int</span> v, <span class="keyword">int</span> vu)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> s = <span class="number">0</span>, p = rt;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = maxl - <span class="number">1</span>; i &gt;= <span class="number">0</span>; -- i) &#123;</div><div class="line">		<span class="keyword">int</span> v0 = (v &gt;&gt; i) &amp; <span class="number">1</span>;</div><div class="line">		<span class="keyword">if</span> ((vu &gt;&gt; i) &amp; <span class="number">1</span>)</div><div class="line">			p = tr[p][v0 ^ <span class="number">1</span>];</div><div class="line">		<span class="keyword">else</span> &#123;</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; maxl; ++ j)</div><div class="line">				<span class="keyword">if</span> ((v &gt;&gt; j) &amp; <span class="number">1</span>)</div><div class="line">					s = (_l s + (<span class="number">1L</span>L &lt;&lt; j) * (_l c[tr[p][v0 ^ <span class="number">1</span>]] - _l rb[tr[p][v0 ^ <span class="number">1</span>]][j])) % mod;</div><div class="line">				<span class="keyword">else</span></div><div class="line">					s = (_l s + (<span class="number">1L</span>L &lt;&lt; j) * _l rb[tr[p][v0 ^ <span class="number">1</span>]][j]) % mod;</div><div class="line">			p = tr[p][v0];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> s;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"war.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"war.out"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</div><div class="line"></div><div class="line">	readInt(n);</div><div class="line">	readInt(k);</div><div class="line">	rt = <span class="number">1</span>;</div><div class="line">	tn = <span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++ i) &#123;</div><div class="line">		readInt(a[i]);</div><div class="line">		trieIns(a[i]);</div><div class="line">	&#125;</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> l = <span class="number">0</span>, r = <span class="number">2147483647</span>;</div><div class="line">		<span class="keyword">while</span> (l &lt; r) &#123;</div><div class="line">			<span class="keyword">int</span> mid = (_l l + r + <span class="number">1</span>) &gt;&gt; <span class="number">1</span>;</div><div class="line">			<span class="keyword">if</span> (check(mid - <span class="number">1</span>) &lt; k)</div><div class="line">				r = mid - <span class="number">1</span>;</div><div class="line">			<span class="keyword">else</span></div><div class="line">				l = mid;</div><div class="line">		&#125;</div><div class="line">		v0 = l;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (v0) &#123;</div><div class="line">		<span class="comment">//printf("%d %lld\n", v0, check(v0));</span></div><div class="line">		<span class="keyword">int</span> ans = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++ i)</div><div class="line">			ans = (_l ans + sumUpper(a[i], v0 - <span class="number">1</span>)) % mod;</div><div class="line">		ans = (_l ans * inv % mod + ((k - check(v0 - <span class="number">1</span>)) % mod + mod) * _l v0) % mod;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span> &#123;</div><div class="line">		<span class="keyword">int</span> ans = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++ i)</div><div class="line">			ans = (_l ans + sumUpper(a[i], <span class="number">0</span>)) % mod;</div><div class="line">		ans = _l ans * inv % mod;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-b2b7d81f2afb3b58.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>这题看到第k大顿时想到了主席树。<del>可我不会写啊</del><br>因为个人比较喜欢分块，就写了个分块+堆瞎搞，样例过了，自己出的数据也过了。<br>自信满满的敲完了文件。等到老师收上去的时候，输出格式中竟然还有输出-1这种操作？<br><del>GG</del><br><strong>这题正解是用线段树，因为 k 比较小，我们就可以开个数组维护前 k 大值，怎么维护？<br>类似于归并排序，先维护每个区间的最大值，然后第二大值就是左儿子的最大值和右儿子的最大值中较大的那个，利用一个指针取完后指针后移一个位置然后继续维护直到维护出前10大（k&lt;=10）。我们发现传一个数组比较麻烦，所以我们把数组放到一个结构体中，query( )函数的返回类型就为一个结构体。然后具体看代码吧。</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> wmt 1,n,1</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> lson l,m,rt&lt;&lt;1</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rson m+1,r,rt&lt;&lt;1|1</span></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">100010</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxk=<span class="number">10</span>;</div><div class="line"><span class="keyword">int</span> n,m,col[maxn&lt;&lt;<span class="number">2</span>|<span class="number">1</span>];</div><div class="line"><span class="keyword">struct</span> rec &#123;</div><div class="line">	<span class="keyword">int</span> res[maxk];</div><div class="line">	rec() &#123;</div><div class="line">		<span class="built_in">memset</span>(res,<span class="number">0</span>,<span class="keyword">sizeof</span>(res));</div><div class="line">	&#125;</div><div class="line">	rec <span class="keyword">operator</span>+(<span class="keyword">const</span> rec &amp;b)<span class="keyword">const</span> &#123;</div><div class="line">		rec z;</div><div class="line">		<span class="keyword">int</span> p1=<span class="number">0</span>,p2=<span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">0</span>; a&lt;maxk; a++)</div><div class="line">			<span class="keyword">if</span> (res[p1]&gt;b.res[p2]) z.res[a]=res[p1++];</div><div class="line">			<span class="keyword">else</span> z.res[a]=b.res[p2++];</div><div class="line">		<span class="keyword">return</span> z;</div><div class="line">	&#125;</div><div class="line">&#125; z[maxn&lt;&lt;<span class="number">2</span>|<span class="number">1</span>];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">color</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> c)</span> </span>&#123;</div><div class="line">	col[rt]+=c;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">0</span>; a&lt;maxk; a++)</div><div class="line">		<span class="keyword">if</span> (z[rt].res[a]) z[rt].res[a]+=c;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_col</span><span class="params">(<span class="keyword">int</span> rt)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (col[rt]) &#123;</div><div class="line">		color(rt&lt;&lt;<span class="number">1</span>,col[rt]);</div><div class="line">		color(rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,col[rt]);</div><div class="line">		col[rt]=<span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> rt)</span> </span>&#123;</div><div class="line">	z[rt]=z[rt&lt;&lt;<span class="number">1</span>]+z[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (l==r) &#123;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;z[rt].res[<span class="number">0</span>]);</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">	build(lson);</div><div class="line">	build(rson);</div><div class="line">	update(rt);</div><div class="line">&#125;</div><div class="line"><span class="function">rec <span class="title">query</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt,<span class="keyword">int</span> nowl,<span class="keyword">int</span> nowr)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (nowl&lt;=l &amp;&amp; r&lt;=nowr) <span class="keyword">return</span> z[rt];</div><div class="line">	push_col(rt);</div><div class="line">	<span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">	<span class="keyword">if</span> (nowl&lt;=m) &#123;</div><div class="line">		<span class="keyword">if</span> (m&lt;nowr) <span class="keyword">return</span> query(lson,nowl,nowr)+query(rson,nowl,nowr);</div><div class="line">		<span class="keyword">else</span> <span class="keyword">return</span> query(lson,nowl,nowr);</div><div class="line">	&#125; <span class="keyword">else</span> <span class="keyword">return</span> query(rson,nowl,nowr);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt,<span class="keyword">int</span> nowl,<span class="keyword">int</span> nowr,<span class="keyword">int</span> v)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (nowl&lt;=l &amp;&amp; r&lt;=nowr) &#123;</div><div class="line">		color(rt,v);</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line">	push_col(rt);</div><div class="line">	<span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">	<span class="keyword">if</span> (nowl&lt;=m) modify(lson,nowl,nowr,v);</div><div class="line">	<span class="keyword">if</span> (m&lt;nowr) modify(rson,nowl,nowr,v);</div><div class="line">	update(rt);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"noname.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"noname.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">	build(wmt);</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>; a&lt;=m; a++) &#123;</div><div class="line">		<span class="keyword">int</span> opt,l,r,v;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d%d%d"</span>,&amp;opt,&amp;l,&amp;r,&amp;v);</div><div class="line">		<span class="keyword">if</span> (opt==<span class="number">0</span>) &#123;</div><div class="line">			<span class="keyword">if</span> (r-l+<span class="number">1</span>&lt;v) <span class="built_in">printf</span>(<span class="string">"-1\n"</span>);</div><div class="line">			<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,query(wmt,l,r).res[v<span class="number">-1</span>]);</div><div class="line">		&#125; <span class="keyword">else</span> modify(wmt,l,r,v);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<h2 id="下午"><a href="#下午" class="headerlink" title="下午"></a>下午</h2><p><strong>期望得分：40+70+0=110</strong><br><strong>实际得分：<del>爆零</del></strong><br><img src="http://upload-images.jianshu.io/upload_images/8471136-e42d8d459c8d7c4a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-cd34b7a06e7109df.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>这题我是把简单问题复杂化了,写了个DFS还炸了。。其实很简单：<strong>先判断有几个环：</strong></p>
<ul>
<li><strong>如果有多个环，那么连接环的那个节点所连出去的边一定不会满足要求，那么方案数就是0。</strong></li>
<li><strong>如果有一个环，那么这个图就成了一个章鱼图，方案数只能在那个环上改变，因为环之外的分支边所能贡献的点是一一对应的，所以只有两种方案（在环上顺时针或者逆时针）。</strong></li>
<li><strong>如果没有环，那么图就成了一棵树，有 n-1 条边，所以会有一个点是不会有边给它贡献的，方案数就是节点个数。</strong></li>
</ul>
<p><strong>然后在整张图上分别判断强联通分量上会出现那种情况，可以用并查集或者dfs判断环，然后乘一乘就好了。</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cctype&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">100010</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> mo=<span class="number">1000000007</span>;</div><div class="line"><span class="keyword">int</span> n,m,en,size;</div><div class="line"><span class="keyword">bool</span> vis[maxn],circle;</div><div class="line"><span class="keyword">struct</span> edge</div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> e;</div><div class="line">    edge *next;</div><div class="line">&#125;*v[maxn],ed[maxn&lt;&lt;<span class="number">1</span>];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> e)</span></span></div><div class="line">&#123;</div><div class="line">    en++;</div><div class="line">    ed[en].next=v[s];v[s]=ed+en;v[s]-&gt;e=e;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> now,<span class="keyword">int</span> pre)</span></span></div><div class="line">&#123;</div><div class="line">    vis[now]=<span class="literal">true</span>;</div><div class="line">    size++;</div><div class="line">    <span class="keyword">for</span> (edge *e=v[now];e;e=e-&gt;next)</div><div class="line">        <span class="keyword">if</span> (e-&gt;e!=pre)</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">if</span> (vis[e-&gt;e]) circle=<span class="literal">true</span>;</div><div class="line">            <span class="keyword">else</span> dfs(e-&gt;e,now);</div><div class="line">        &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	freopen(<span class="string">"girl.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"girl.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">    <span class="keyword">for</span> (;m--;)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">int</span> s,e;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;s,&amp;e);</div><div class="line">        add_edge(s,e);</div><div class="line">        add_edge(e,s);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> ans=<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>;a&lt;=n;a++)</div><div class="line">        <span class="keyword">if</span> (!vis[a])</div><div class="line">        &#123;</div><div class="line">            circle=<span class="literal">false</span>;</div><div class="line">            size=<span class="number">0</span>;</div><div class="line">            dfs(a,<span class="number">0</span>);</div><div class="line">            <span class="keyword">if</span> (circle) ans=(ans&lt;&lt;<span class="number">1</span>)%mo;</div><div class="line">            <span class="keyword">else</span> ans=(<span class="keyword">long</span> <span class="keyword">long</span>)ans*size%mo;</div><div class="line">        &#125;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-5799f3b436f58fbb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>一开始就是奔着前四十暴力去的，然后开始转进制，然后发现：-k进制怎么转啊=-= 瞎搞了一个小时，还是没搞出来，但是搞着搞着好像找到了规律：<strong>k进制和-k进制的数偶数位上的数都是一样的，因为无论正数还是负数，它的偶数次幂都是相等的。</strong>但一看时间：还有不到半小时。。因为觉得正解挺好敲的（<del>反正暴力也转不过来</del>）就去试着敲了一下正解，不出所料，果然没调出来= =。<br>正解和我找的那个规律是一样的，把n转成k进制，然后计算它偶数位上的数能放多少个就行了，可以用数位DP来写，<del>直接搜索好像也能过。</del><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> n,f[<span class="number">2</span>][<span class="number">2</span>];</div><div class="line"><span class="keyword">int</span> k,bit[<span class="number">60</span>];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"endless.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"endless.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="keyword">while</span> (~<span class="built_in">scanf</span>(<span class="string">"%I64d%d"</span>,&amp;n,&amp;k)) &#123;</div><div class="line">		<span class="keyword">int</span> num=<span class="number">0</span>;</div><div class="line">		<span class="keyword">while</span> (n)</div><div class="line">			bit[++num]=n%k,n/=k;</div><div class="line">		<span class="keyword">if</span> (num&amp;<span class="number">1</span>) f[<span class="number">1</span>][<span class="number">0</span>]=bit[num],f[<span class="number">1</span>][<span class="number">1</span>]=<span class="number">1</span>;</div><div class="line">		<span class="keyword">else</span> f[<span class="number">1</span>][<span class="number">0</span>]=<span class="number">1</span>,f[<span class="number">1</span>][<span class="number">1</span>]=<span class="number">0</span>;</div><div class="line">		<span class="keyword">int</span> now=<span class="number">1</span>,last=<span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> a=num<span class="number">-1</span>; a&gt;=<span class="number">1</span>; a--) &#123;</div><div class="line">			now^=<span class="number">1</span>;</div><div class="line">			last^=<span class="number">1</span>;</div><div class="line">			<span class="keyword">if</span> (a&amp;<span class="number">1</span>) f[now][<span class="number">0</span>]=f[last][<span class="number">0</span>]*k+f[last][<span class="number">1</span>]*bit[a],f[now][<span class="number">1</span>]=f[last][<span class="number">1</span>];</div><div class="line">			<span class="keyword">else</span> &#123;</div><div class="line">				f[now][<span class="number">0</span>]=f[last][<span class="number">0</span>];</div><div class="line">				f[now][<span class="number">1</span>]=<span class="number">0</span>;</div><div class="line">				<span class="keyword">if</span> (!bit[a]) f[now][<span class="number">1</span>]=f[last][<span class="number">1</span>];</div><div class="line">				<span class="keyword">else</span> f[now][<span class="number">0</span>]+=f[last][<span class="number">1</span>];</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%I64d\n"</span>,f[now][<span class="number">0</span>]+f[now][<span class="number">1</span>]);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/8471136-677404c9d3f52b19.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>第一眼看这道题感觉可以用树链剖分的思想来做，其实也就是贪心。然后觉得比较难写，就先去写的前两道题，没想到时间不够。<br>正解之一是可以用树链剖分思想写的，同样可以A。<br>std的做法是对于叶子节点建线段树，然后查最大值和区间减法，具体看代码<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cctype&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> wmt 1,cnt,1</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> lson l,m,rt&lt;&lt;1</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rson m+1,r,rt&lt;&lt;1|1</span></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">200010</span>;</div><div class="line"><span class="keyword">int</span> n,k,en,z[maxn],f[maxn],s[maxn],leaf[maxn],l[maxn],r[maxn];</div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> y[maxn&lt;&lt;<span class="number">2</span>|<span class="number">1</span>],col[maxn&lt;&lt;<span class="number">2</span>|<span class="number">1</span>];</div><div class="line"><span class="keyword">bool</span> del[maxn];</div><div class="line"><span class="keyword">struct</span> edge</div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> e;</div><div class="line">    edge *next;</div><div class="line">&#125;*v[maxn],*ve[maxn],ed[maxn];</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> e)</span></span></div><div class="line">&#123;</div><div class="line">    en++;</div><div class="line">    ed[en].next=v[s];v[s]=ed+en;v[s]-&gt;e=e;</div><div class="line">&#125;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> update(rt) y[rt]=max(y[rt&lt;&lt;1],y[rt&lt;&lt;1|1]);</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> push_col(rt)\</span></div><div class="line">    <span class="meta-keyword">if</span> (col[rt])\</div><div class="line">    &#123;\</div><div class="line">        col[rt&lt;&lt;1]+=col[rt];y[rt&lt;&lt;1]+=col[rt];\</div><div class="line">        col[rt&lt;&lt;1|1]+=col[rt];y[rt&lt;&lt;1|1]+=col[rt];\</div><div class="line">        col[rt]=0;\</div><div class="line">    &#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt,<span class="keyword">int</span> nowl,<span class="keyword">int</span> nowr,<span class="keyword">int</span> delta)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (nowl&lt;=l &amp;&amp; r&lt;=nowr)</div><div class="line">    &#123;</div><div class="line">        y[rt]+=delta;</div><div class="line">        col[rt]+=delta;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    push_col(rt);</div><div class="line">    <span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span> (nowl&lt;=m) modify(lson,nowl,nowr,delta);</div><div class="line">    <span class="keyword">if</span> (m&lt;nowr) modify(rson,nowl,nowr,delta);</div><div class="line">    update(rt);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (l==r) <span class="keyword">return</span> l;</div><div class="line">    push_col(rt);</div><div class="line">    <span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span> (y[rt&lt;&lt;<span class="number">1</span>]&gt;y[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]) <span class="keyword">return</span> query(lson);</div><div class="line">    <span class="keyword">else</span> <span class="keyword">return</span> query(rson);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	freopen(<span class="string">"tour.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"tour.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;k);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>;a&lt;=n;a++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;z[a]);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>;a&lt;n;a++)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">int</span> p1,p2;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;p1,&amp;p2);</div><div class="line">        f[p2]=p1;</div><div class="line">        add_edge(p1,p2);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> root;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>;a&lt;=n;a++)</div><div class="line">        <span class="keyword">if</span> (!f[a]) root=a;</div><div class="line">    <span class="keyword">int</span> size=<span class="number">1</span>;</div><div class="line">    s[<span class="number">1</span>]=root;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>;a&lt;=n;a++)</div><div class="line">        ve[a]=v[a];</div><div class="line">    <span class="built_in">memset</span>(l,<span class="number">0x3f</span>,<span class="keyword">sizeof</span>(l));</div><div class="line">    <span class="keyword">int</span> cnt=<span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> (size)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">int</span> now=s[size];</div><div class="line">        <span class="keyword">if</span> (!ve[now])</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">if</span> (!v[now]) </div><div class="line">            &#123;</div><div class="line">                l[now]=r[now]=++cnt;</div><div class="line">                leaf[cnt]=now;</div><div class="line">            &#125;</div><div class="line">            l[f[now]]=min(l[f[now]],l[now]);</div><div class="line">            r[f[now]]=max(r[f[now]],r[now]);</div><div class="line">            size--;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span></div><div class="line">        &#123;</div><div class="line">            size++;</div><div class="line">            s[size]=ve[now]-&gt;e;</div><div class="line">            ve[now]=ve[now]-&gt;next;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>;a&lt;=n;a++)</div><div class="line">        modify(wmt,l[a],r[a],z[a]);</div><div class="line">    k=min(k,cnt);</div><div class="line">    <span class="keyword">long</span> <span class="keyword">long</span> ans=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> a=<span class="number">1</span>;a&lt;=k;a++)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">int</span> p=query(wmt);</div><div class="line">        p=leaf[p];</div><div class="line">        <span class="keyword">while</span> (!del[p] &amp;&amp; p)</div><div class="line">        &#123;</div><div class="line">            modify(wmt,l[p],r[p],-z[p]);</div><div class="line">            ans+=z[p];</div><div class="line">            del[p]=<span class="literal">true</span>;</div><div class="line">            p=f[p];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%I64d\n"</span>,ans);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>贪心：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">100001</span>;</div><div class="line"><span class="keyword">int</span> to[M&lt;&lt;<span class="number">1</span>],nt[M&lt;&lt;<span class="number">1</span>],h[M],a[M],cnt=<span class="number">1</span>,tot;</div><div class="line">LL w[M],c[M];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert_edge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span> </span>&#123;</div><div class="line">	to[cnt]=v;</div><div class="line">	nt[cnt]=h[u];</div><div class="line">	h[u]=cnt++;</div><div class="line">	to[cnt]=u;</div><div class="line">	nt[cnt]=h[v];</div><div class="line">	h[v]=cnt++;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(LL x,LL y)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> x&gt;y;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> fa)</span> </span>&#123;</div><div class="line">	LL MAX=<span class="number">0</span>;</div><div class="line">	<span class="keyword">int</span> vp;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=h[u]; i; i=nt[i]) &#123;</div><div class="line">		<span class="keyword">int</span> v=to[i];</div><div class="line">		<span class="keyword">if</span>(v!=fa) &#123;</div><div class="line">			dfs(v,u);</div><div class="line">			<span class="keyword">if</span>(w[v]&gt;MAX)MAX=w[v],vp=v;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	w[u]=MAX+a[u];</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=h[u]; i; i=nt[i]) &#123;</div><div class="line">		<span class="keyword">int</span> v=to[i];</div><div class="line">		<span class="keyword">if</span>(v!=fa&amp;&amp;v!=vp)c[++tot]=w[v];</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	freopen(<span class="string">"tour.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</div><div class="line">	freopen(<span class="string">"tour.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</div><div class="line">	<span class="keyword">int</span> n,k;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;k);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">	<span class="built_in">memset</span>(h,<span class="keyword">sizeof</span>(h),<span class="number">0</span>);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++) &#123;</div><div class="line">		<span class="keyword">int</span> u,v;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;u,&amp;v);</div><div class="line">		insert_edge(u,v);</div><div class="line">	&#125;</div><div class="line">	tot=<span class="number">0</span>;</div><div class="line">	dfs(<span class="number">1</span>,<span class="number">1</span>);</div><div class="line">	c[++tot]=w[<span class="number">1</span>];</div><div class="line">	sort(c+<span class="number">1</span>,c+tot+<span class="number">1</span>,cmp);</div><div class="line">	LL ans=<span class="number">0</span>;</div><div class="line">	k=min(k,tot);</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;i++) ans+=c[i];</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%I64d"</span>,ans);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>上午100+下午爆零=总共100，今天考的我一点脾气都没有，原因可能是自己码力不够吧，想出正解写不完，把简单的问题想难了，这点是非常需要练习的。这两天好像状态不太好的样子，先调整一下心态吧，先冷静点做题再说。</strong></p>
<h2 id="zhx的题目有毒"><a href="#zhx的题目有毒" class="headerlink" title="zhx的题目有毒"></a><strong><del>zhx的题目有毒</del></strong></h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://sukixj.github.io/2017/10/30/note1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuki">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/30/note1/" itemprop="url">听钟长者讲平衡树&网络流</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-10-30T20:10:12+08:00">
                2017-10-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><h3 id="常见的平衡树："><a href="#常见的平衡树：" class="headerlink" title="常见的平衡树："></a>常见的平衡树：</h3></li>
<li><strong>Treap（比SBT慢，但比SBT好写）log( n )</strong></li>
<li><strong>SBT（快，比较好写，功能不太全面）log( n )</strong></li>
<li><strong>splay（特别慢，不太好写，功能最强大）理论log( n )实际$\sqrt{n}$</strong></li>
<li><strong>*RBT（红黑树，比SBT还快，特别难写）log( n )</strong><br><em>splay必须会，Treap和SBT会一个。</em></li>
<li><h3 id="基本的平衡树"><a href="#基本的平衡树" class="headerlink" title="基本的平衡树"></a>基本的平衡树</h3>一定是二叉树，保证左儿子每一个元素比当前节点小，右儿子每一个元素比当前节点大。<br>插入一个数：，与当前节点（假设为 rt）比较，比 rt 小就往左边查反之往右边，没有儿子新建一个节点。这是最简单的插入，缺点会导致深度特别深 -&gt; 不平衡。用一些手段使它平衡。<br>询问：考虑三个区间，左儿子、自己、右儿子，和线段树类似。</li>
<li><h3 id="Treap（-tree-heap）"><a href="#Treap（-tree-heap）" class="headerlink" title="Treap（= tree + heap）"></a>Treap（= tree + heap）</h3>每个节点存两个值：( key , value ) value就表示元素，前者满足堆的性质，后面满足平衡树的性质。插入时 key 值直接随机，这样可以保证深度log( n )。 </li>
<li><h4 id="两个核心操作："><a href="#两个核心操作：" class="headerlink" title="两个核心操作："></a>两个核心操作：</h4></li>
<li><strong>merge（p1，p2）：返回一棵树的根，以p1为根的Treap和以p2为根的Treap合并为一棵p3为根的Treap，需要保证p1中的所有元素小于等于p2中的所有元素。</strong></li>
<li><strong>split（p，k）：返回两棵树的根，把以p为根的t前k小的数拿出来组成一棵新的treap，剩下的组成一棵Treap，一棵Treap -&gt; 两棵Treap。</strong><br>插入x：先找有几个数比x小 -&gt; split（p，n），建一个有一个点（x）的Treap，先merge（分出来的第一棵树，x） -&gt; merge（刚才merge的树，分出的另一棵树）<br>删除x：先split（前 x） -&gt; split（x 和剩下的数）-&gt;丢掉 x -&gt;merge（剩余的两棵树）。</li>
<li><h4 id="实际操作："><a href="#实际操作：" class="headerlink" title="实际操作："></a>实际操作：</h4></li>
<li><p><strong>merge( p1 , p2 )：</strong><br>p1( value , key , l , r ) ，p1( value , key , l , r )<br>root 为 key 最大的节点（要么是 p1，要么是 p2）<br><strong>1）p1.key &gt;= p2.key -&gt; p1作为根 -&gt; p1 的左儿子不会发生变化（p1.l）（满足性质所有p1 &lt;= p2）-&gt; 右儿子merge（p1.r , p2）。</strong><br><strong>2）p1.key &lt; p2.key -&gt; p2 作为根 -&gt; 左儿子 merge（p1 , p2.l）-&gt; 右儿子 p2.r。</strong><br>递归实现。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> p1,<span class="keyword">int</span> p2)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span>(!p1) <span class="keyword">return</span> p2;</div><div class="line">	<span class="keyword">if</span>(!p2) <span class="keyword">return</span> p1;</div><div class="line">	<span class="keyword">if</span>(z[p1].key&lt;z[p2].key) &#123;</div><div class="line">		z[p1].r=merge(z[p1].r,p2);</div><div class="line">		<span class="keyword">return</span> p1;</div><div class="line">	&#125; </div><div class="line">	<span class="keyword">else</span> &#123;</div><div class="line">		z[p2].l=merge(p1,z[p2].l);</div><div class="line">		<span class="keyword">return</span> p2;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><strong>split（p , k）：</strong><br>p1( value , key , l , r , size )<br><strong>1）k &lt;= p.l.size（全部都在左子树里） -&gt; split( p.l , k ) -&gt; 返回 p1 和以 p 为根以 p2 为左子树以 p.r 为右子树的树。<br>2）k = p.l.size+1 （加上根节点） -&gt; 返回根加左子树和右子树。<br>3）k &gt; p.l.size+1 -&gt; split（p.r , k-p.l.size-1）-&gt; 返回以 p 为根以 p.l 和 p1 为左右子树的树和 p2 。</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">pair &lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; split(<span class="keyword">int</span> p,<span class="keyword">int</span> k) &#123;</div><div class="line">	<span class="keyword">if</span>(z[z[p].l].size&gt;=k) &#123;</div><div class="line">		<span class="keyword">if</span>(!z[p].l) <span class="keyword">return</span> make_pair(<span class="number">0</span>,p);</div><div class="line">		<span class="keyword">else</span> &#123;</div><div class="line">			pair &lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; px=split(z[p].l,k);</div><div class="line">			<span class="keyword">int</span> pl=px.first;</div><div class="line">			z[p].l=px.second;</div><div class="line">			<span class="keyword">return</span> make_pair(pl,p);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span> &#123;</div><div class="line">		<span class="keyword">if</span>(z[p].r==<span class="number">0</span>) <span class="keyword">return</span> make_pair(p,<span class="number">0</span>);</div><div class="line">		<span class="keyword">else</span> &#123;</div><div class="line">			pair &lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; px=split(z[p].r,k-z[z[p].l].size<span class="number">-1</span>);</div><div class="line">			z[p].r=px.first;</div><div class="line">			<span class="keyword">int</span> pr=px.second;</div><div class="line">			<span class="keyword">return</span> make_pair(p,pr);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>确定比x小的树有多少个：比当前节点小往左走，否则说明左子树的所有元素都比x小，就把答案加上左子树的元素个数然后往右走。</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">query_min</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">int</span> v)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(p)</div><div class="line">		<span class="keyword">if</span>(z[p].v&gt;=v) p=z[p].l;</div><div class="line">		<span class="keyword">else</span> ans+=z[z[p].l].size+<span class="number">1</span>,p=z[p].r;</div><div class="line">	<span class="keyword">return</span> ans;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<ul>
<li><h2 id="网络流（Dinic算法）"><a href="#网络流（Dinic算法）" class="headerlink" title="网络流（Dinic算法）"></a>网络流（Dinic算法）</h2>给你一张有向图，源点和汇点，源点有无限多的水，每条边简化成一根水管，每根水管都有流量，求最多有多少水能从源点流到汇点。</li>
<li>暴力：随便从起点到终点找一条路，可行流量就是路径上所有容积的最小值。dfs</li>
<li>Dinic：建图时建两条边，令反向边的流量是0。不断执行BFS然后DFS的过程，从起点开始BFS，BFS时候只会走那些流量不是0的边（不能流回来），理论上来说沿着这些边流下去流量就会增加了。<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="built_in">memset</span>(depth,<span class="number">-1</span>,<span class="keyword">sizeof</span>(depth));</div><div class="line">	depth[s]=<span class="number">1</span>;</div><div class="line">	que.push(s);</div><div class="line">	<span class="keyword">while</span> (que.size()) &#123;</div><div class="line">		<span class="keyword">int</span> now=que.front();</div><div class="line">		que.pop();</div><div class="line">		<span class="keyword">for</span> (edge *e=v[now];e;e=e-&gt;next)</div><div class="line">			<span class="keyword">if</span> (depth[e-&gt;e]==<span class="number">-1</span> &amp;&amp; e-&gt;f) &#123;</div><div class="line">				depth[e-&gt;e]=depth[now]+<span class="number">1</span>;</div><div class="line">				que.push(e-&gt;e);</div><div class="line">			&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> depth[e]!=<span class="number">-1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>如果我们BFS找到一条路可以流水，那么Dinic就再使用DFS让它流水。<br>用BFS分层，DFS每一层的流量往下流，可以防止出现环流。<br>反向边：可以把水推回去多少，防止出现堵塞的情况，出现最优解。</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> now,<span class="keyword">int</span> cur_flow)</span> </span>&#123; <span class="comment">//now 当前水流到哪里，cur_flow有多少水流到这里 </span></div><div class="line">	<span class="keyword">if</span> (now==e) <span class="keyword">return</span> cur_flow; <span class="comment">//水都流到汇点 </span></div><div class="line">	<span class="keyword">int</span> rest=cur_flow; <span class="comment">//流出去之后还有多少水 </span></div><div class="line">	<span class="keyword">for</span> (edge *e=v[now]; e; e=e-&gt;next)</div><div class="line">		<span class="keyword">if</span> (e-&gt;f &amp;&amp; depth[e-&gt;e]==depth[now]+<span class="number">1</span> &amp;&amp; rest) &#123; </div><div class="line">		<span class="comment">//能流的水不等于零 留到下个节点的深度恰好是当前节点+1（去除环流） 水还有剩  </span></div><div class="line">			<span class="keyword">int</span> new_flow=dfs(e-&gt;e,min(rest,e-&gt;f)); <span class="comment">//当前水管能流出去多少水 </span></div><div class="line">			e-&gt;f-=new_flow;<span class="comment">//水管容量 </span></div><div class="line">			e-&gt;op-&gt;f+=new_flow;<span class="comment">//反向边能流的流量加上流出去的水 </span></div><div class="line">			rest-=new_flow;<span class="comment">//剩下流量 </span></div><div class="line">		&#125;</div><div class="line">	<span class="keyword">return</span> cur_flow-rest;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>那么我们Dinic就可以这么写了<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dinic</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span> (bfs())</div><div class="line">		ans+=dfs(s,INF);</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>zhx说如果考网络流的题，直接随便跑个网络流如果能和答案匹配上就行了。。<br><del><strong>Dinic复杂度玄学</strong></del><br>二分图匹配是可以拿网络流跑的，<strong>左边建一个源点指向所有左边的点，流量为1，把所有的边定向从左往右，流量为1，建一个汇点所有右边的点指向汇点，流量为1，这样跑出来的最大流量就是最大匹配数。最大权值匹配就直接用网络流。</strong><del>管他对不对先跑了再说。</del><strong>答案要不就是跑出来的答案，要不就是所有的权值减去跑出来的答案。</strong></p>
<p>end.</p>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Yuki</p>
              <p class="site-description motion-element" itemprop="description">I will follow this path until the end</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">Artikel</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">Tags</span>
                
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yuki</span>

  
</div>


  <div class="powered-by">Erstellt mit  <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
